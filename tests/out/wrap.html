<!DOCTYPE html>
<html lang="en">
<head>
<title>default page title</title>
<meta charset="UTF-8">
<link rel='stylesheet' href='smd.css' />
</head>
<body>
<div class="wrapper">
<h2 style="border-top: 3px solid black;border-bottom: 2px dashed black">Script: wrap.md</h2>
<h3 style="font-size:1.3em;border-bottom: 3px solid black">Purpose: Testing @wrap and @parw functionality</h3>
<div class="extras"><h2>------------------------------------------</h2></div>
<div class="extras"><p>----------#TS> Put html.divx,p wrapper in effect for document</p></div>
<div class="extras"><h3>Test group 1 - Specifying the html tag inside an @var variable attribute</h3></div>
<div class="extras"><p>----------#0a> Use the primary document wrapper to begin</p></div>
<div class="extras"><h4>start wrap via indirection</h4></div>
<div class="extras"><p>wt1 = html.wt1</p></div>
<div class="extras"><p>wt1.works = html.wt2</p></div>
<div class="extras"><p>wt1.alsoworks = html.wt3</p></div>
<div class="extras"><h3>------------------------------------------</h3></div>
<div class="extras"><h3>--->wt1</h3></div>
<span class="myclass1" style="color:red;font-size:1.3em">----------#1a> wt1 line wrap test if this is <strong>RED</strong></span>
<div class="extras"><h4>--->wt1.works</h4></div>
<span class="myclass2" style="color:blue;font-size:1.3em">----------#2a> wt1.works line wrap test if this is <strong>BLUE</strong></span>
<div class="extras"><h4>--->wt1.alsoworks</h4></div>
<span class="myclass3" style="color:green;font-size:1.3em">----------#3a> wt1.alsoworks line wrap test if this is <strong>GREEN</strong></span>
<div class="extras"><h1></h1></div>
:---------:#4a> raw lines should never be wrapped<br />
:---------:#4b> raw lines should never be wrapped<br />
:---------:#4c> raw lines should never be wrapped<br />
:---------:#4d> raw lines should never be wrapped<br />
<div class="extras"><h4>--->popping stack back 1 level p class=myclass2</h4></div>
<span class="myclass2" style="color:blue;font-size:1.3em">----------#2b> wt1.works line wrap test</span>
<div class="extras"><h4>--->popping stack back 1 level p class=myclass1</h4></div>
<span class="myclass1" style="color:red;font-size:1.3em">----------#1b> wt1 line wrap test</span>
<div class="extras"><p>----------#0b> back to starting html.divx, p</p></div>
<div class="extras"><h3>end wrap via indirection</h3></div>
<div class="extras"><h1>------------------------------------------</h1></div>
<div class="extras"><h4>start tests that will fail because raw html is being passed in</h4></div>
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.&lt;span class="myclass1" style="color:red;font-size:1.3em"&gt;&lt;/span&gt;</em>]<br />
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.&lt;span class="myclass2" style="color:blue;font-size:1.3em"&gt;&lt;/span&gt;</em>]<br />
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.&lt;span class="myclass3" style="color:green;font-size:1.3em"&gt;&lt;/span&gt;</em>]<br />
<div class="extras"><h3>------------------------------------------</h3></div>
<div class="extras"><h4>start tests that will fail because a non html namespace is being used</h4></div>
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.bb</em>]<br />
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.wt2.fails</em>]<br />
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.wt2.alsofails</em>]<br />
<div class="extras"><h4>and now just some random testing ...</h4></div>
<div class="extras"><p>-------------->This should be the starting divx, p wrapper still</p></div>
<li>item 1</li>
<li>item 2</li>
<li>item 3<ol></li>
<li>apple</li>
<li>orange</li>
<li>banana</ol></li>
<div class="extras"><p>This will generate an error<br /></p></div>
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.var.wt1</em>]<br />
<div class="extras"><p>This will still be the default @wrap format</p></div>
<span class="myclass1" style="color:red;font-size:1.3em">This will work, and be red<br /><br /></span>
<span class="myclass1" style="color:red;font-size:1.3em">Also wrapped in the span class=myclass1 tag<br /></span>
<div class="extras"><p>And now back to the default html.divx, p tag</p></div>
And now we will test the special behavior of @wrap.<br />
<div class="extras"><p><span class="myclass2" style="color:blue;font-size:1.3em">Default wrap is now the blue one</span></p></div>
this should have no decoration
<div class="extras"><p><span class="myclass2" style="color:blue;font-size:1.3em">back to previous (blue)</span></p></div>
Now I've cleared everything<br />
<div class="extras"><p><span class="myclass3" style="color:green;font-size:1.3em">Now I'm using the html.divx,p,html.wt3 (green) wrap</span></p></div>
Once again, nothing.<br /><br />
Now I'm going to pass an invalid parameter to @parw<br />
WARNING: unknown option <em>-1</em> passed to @parw<br />
Still nothing, after trying a negative number with @parw<br /><br />
And now, let's pass 25 to @parw, but there's only 2 items on the stack...<br />
WARNING: only 2 items found on the stack that can be cleared<br />
Back to empty @wrap q, passed count of 25<br /><br />
Going to pop on empty stack, will issue warning<br /><br />
WARNING: wrapper stack is empty<br />
<div class="extras"><p><span class="myclass1" style="color:red;font-size:1.3em">Going red.</span></p></div>
<div class="extras"><p><span class="myclass1" style="color:red;font-size:1.3em">Another red line.</span></p></div>
<div class="extras"><p><span class="myclass2" style="color:blue;font-size:1.3em">And now blue</span></p></div>
<div class="extras"><p><span class="myclass3" style="color:green;font-size:1.3em">And now green</span></p></div>
And now I've cleared everything once again.<br /><br />
<div class="extras"><h2>------------------------------------------</h2></div>
<div class="extras"><h4>Finally, let&apos;s check all the edge conditions for parameter passing in one place</h4></div>
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.var.uniq1</em>]<br />
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.var.uniq1.attr_issue</em>]<br />
<div class="extras"><p class="plainTitle" style="color:purple;font-size:1.3em" attr_issue="this will fail">This is a test</p></div>
WARNING: @wrap tags cannot specify an attribute. Tag: [<em>html.uniq1.attr_issue</em>]. Removed [attr_issue].<br />
<p class="plainTitle" style="color:purple;font-size:1.3em" attr_issue="this will fail">And this will be a regular p, but will float right with a thin top border.</p>
<div class="extras"><p class="plainTitle" style="color:purple;font-size:1.3em" attr_issue="this will fail">And now we're back to the divx, uniq1</p></div>
<div class="extras"><p class="plainTitle" style="color:purple;font-size:1.3em" attr_issue="this will fail">Similar, but using hard coded namespace.</p></div>
WARNING: @wrap tags cannot specify an attribute. Tag: [<em>html.uniq1.attr_issue</em>]. Removed [attr_issue].<br />
<p class="plainTitle" style="color:purple;font-size:1.3em" attr_issue="this will fail">Again with the float right thing cause of attribute error.</p>
<div class="extras"><p class="plainTitle" style="color:purple;font-size:1.3em" attr_issue="this will fail">back to plain purple.</p></div>
ERROR: @wrap tags must <em><strong>exist</strong></em> in the html namespace. Tag: [<em>html.foo.bar.a</em>]<br />
Now let's test to make sure that the wrapper stack is maintained across imports ...
Current wrap stack level is: 0
<link>Current wrap stack level is: 2</link>
<link>Current tag before import of wrap1.md should be 'link': <link></link></link>
<link>WRAP1.MD -- Current wrap stack level is: 2</link>
<link>-----------</link>
<link>Current tag should be 'link': <link></link></link>
<code>WRAP1.MD -- Current wrap stack level is: 5</code>
<code>Current tag should be 'code': <code></code></code>
WARNING: only 3 items found on the stack that can be cleared<br />
<link>Current tag should be 'link': <link></link></link>
<link>WRAP1.MD -- Current wrap stack level is: 2</link>
<link>-----------</link>
<code>WRAP1.MD -- Current wrap stack level is: 5</code>
<code>Current tag should be 'code': <code></code></code>
<link>Current tag should be 'link': <link></link></link>
<link>WRAP1.MD -- Current wrap stack level is: 2</link>
<link>-----------</link>
<code>WRAP1.MD -- Current wrap stack level is: 5</code>
<code>Current tag should be 'code': <code></code></code>
<link>Current tag should be 'link': <link></link></link>
<link>WRAP1.MD -- Current wrap stack level is: 2</link>
<ol>WRAP1.MD -- Current wrap stack level is: 3</ol>
<ol>Current tag should be 'ol': <ol></ol></ol>
<ol>WRAP2.MD -- Current wrap stack level is: 3</ol>
<ol>wrap2.md import file</ol>
<ol>-----------</ol>
<ol>WRAP2.MD -- Current wrap stack level is: 3</ol>
<ol>Current tag should be 'ol': <ol></ol></ol>
<pre>WRAP2.MD -- Current wrap stack level is: 9</pre>
<pre>Current tag should be 'pre': <pre></pre></pre>
WARNING: only 6 items found on the stack that can be cleared<br />
<ol>Current tag should be 'ol': <ol></ol></ol>
<ol>WRAP2.MD -- Current wrap stack level is: 3</ol>
<ol>-----------</ol>
<pre>WRAP2.MD -- Current wrap stack level is: 9</pre>
<pre>Current tag should be 'pre': <pre></pre></pre>
<ol>Current tag should be 'ol': <ol></ol></ol>
<ol>WRAP2.MD -- Current wrap stack level is: 3</ol>
<ol>-----------</ol>
<pre>WRAP2.MD -- Current wrap stack level is: 9</pre>
<pre>Current tag should be 'pre': <pre></pre></pre>
<tr>Intentionally leave extra items on to make sure they are cleared before returning to wrap1.md</tr>
<tr>Current tag should be 'tr': <tr></tr></tr>
<tr>WRAP2.MD -- Current wrap stack level is: 7</tr>
<span class="debug green"><strong>Method(toggle): stdinput is now enabled</strong><br /></span>
<span class="debug">            stdinput: Resetting wsp to 3<br /><br />
</span>
<span class="debug">            stdinput: Current length of wsp stack is 7<br /><br />
</span>
<span class="debug">            stdinput: Length of wrapper stack is now: 3<br /><br />
</span>
<span class="debug green"><em>Method(toggle): stdinput is now disabled</em><br /></span>
<ol>Returned from wrap2 ...</ol>
<ol>Current tag should be 'ol': <ol></ol></ol>
<ol>WRAP1.MD -- Current wrap stack level is: 3</ol>
<link>Current tag after import of wrap1.md should be 'link': <link></link></link>
<link>Current wrap stack level is: 2</link>
<br />
TEST:::
<div class="extras">TEST::: &lt;div class="extras"&gt;&lt;/div&gt;</div>
<div class="extras"><h3>And this is the end of the @wrap test.</h3></div>
<div class="plain"><p class="plainTitle">User manual section for @wrap</p></div>
<div class="toc"><p class="divTitle">Table of Contents - Unittest &#64;wrap</p>
<br />
<span class="indent"><a href="#ug_wrap">@wrap and @parw</a> - <strong>@wrap and @parw and how they are used</strong></span><br />
</div>
<div class="extras"><h3>Review link bookmarks from wrap-inc.md</h3></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: link<br />
----------------------------------------<br />
<strong>ug_wrap=</strong><br />&nbsp;&nbsp;<strong>id=</strong>{{self._}}<br />
&nbsp;&nbsp;<strong>_format=</strong>@@ {{self._inline}}<br />
&nbsp;&nbsp;<strong>_link_o=</strong>&lt;a href="#{{self.id}}"&gt;<br />
&nbsp;&nbsp;<strong>link=</strong>{{self._link_o}}{{self.text}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>text=</strong>@wrap and @parw<br />
&nbsp;&nbsp;<strong>_inline=</strong>&lt;a id="{{self.id}}"&gt;&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_qlink=</strong>{{self._link_o}}{{self._qtext}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_qtext=</strong>SETMETOLINKTEXT<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
<br />
</code>
</div>
<a id="ug_wrap"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>@wrap and @parw</h2></div>
<div class="extras"><p>[docthis.open(h="Add this to wrap-doc.md")]</p></div>
<div class="extras"><p>Discuss <strong>&lsqb;code.wrap_stack&lpar;w=""&rpar;&rsqb;</strong> tag.&lt; and tag.&gt;</p></div>
<div class="extras"><p>[docthis.close]</p></div>
<div class="extras"><p>By default, <strong>smd</strong> does not place any type of wrapper around emitted contE. This is a good default, however, many times adding wrappers can greatly assist your formatting efforts. This is where @wrap comes in handy...</p></div>
<div class="extras"><p>First, let's review the complete syntax for both <strong>&#64;wrap</strong> and <strong>&#64;parw</strong></p></div>
<div class="syntax"><p class="divTitle">@wrap and @parw command syntax</p>
<p><br /></p>
<p><span class="indent"><strong>&#64;wrap</strong> <strong>&lt;html.tag &lsqb;, html.tag &lsqb;, ...]] | &lsqb;nop | null]&gt;</strong><br /><br /></span></p>
<p><span class="indent"><strong>&#64;parw</strong> <strong>&lsqb;&ast; | all | &num; &rsqb;</strong></span></p>
<p><br /><br /></p>
<p><span class="indent"><span class="indent"><em>NOTE: tag variables passed to <strong>&#64;wrap</strong> <strong>must</strong> be in the <strong>@html</strong> namespace.</span></span></em></p>
</div>
<div class="extras"><p>The concept for <strong>&#64;wrap</strong> is straightforward: whenever anything is written to the output stream, it will be wrapped with the specified variable from the @html namespace. Let's look at an example, <strong>smd</strong> session:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@wrap demonstration</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
Begin by showing that input is not wrapped by default
Begin by showing that input is not wrapped by default
&#64;wrap p
This line will be wrapped with HTML p tags
&lt;p&gt;This line will be wrapped with HTML p tags&lt;/p&gt;
This line also...
&lt;p&gt;This line also...&lt;/p&gt;
&#64;parw
But not this line
But not this line
</pre></div>
<div class="extras"><p>See how that works? When we issue the <strong>@wrap p</strong> command, subsequent output is wrapped with &lt;p&gt;&lt;/p&gt; tags. It remains in effect until it is cleared with the <strong>@parw</strong> command, or if inside an <strong>@import</strong>'ed file, when EOF is reached.</p></div>
<div class="extras"><p>It's important to note that any <strong>@wrap</strong> tags that are in effect during the processing of an imported file will be cleared when EOF is reached on that imported file, so that when you return to the parent file, the <strong>@wrap</strong> tag stack for it will be restored to what it was before any file is <strong>@import</strong>'ed.</p></div>
<div class="extras"><p><strong>&#64;wrap</strong> tags can be nested as well. Consider the following example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@wrap tag nesting</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
&#64;wrap div
This line will be wrapped with HTML div tags
&lt;div&gt;This line will be wrapped with HTML div tags&lt;/div&gt;
&#64;wrap p
This line, however, will be wrapped in HTML p tags
&lt;p&gt;This line, however, will be wrapped in HTML p tags&lt;/p&gt;
&#64;parw
And now we are back to being wrapped in HTML div tags again
&lt;div&gt;And now we are back to being wrapped in HTML div tags again&lt;/div&gt;
</pre></div>
<div class="extras"><p>You can nest as deeply as you wish.</p></div>
<div class="extras"><p>In addition, you are not limited to a single HTML tag when wrapping. Take a look at this example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@wrap tag multiples</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
&#64;wrap div, p
This line will be wrapped with HTML both a div and a p tag
&lt;div&gt;&lt;p&gt;This line will be wrapped with HTML both a div and a p tag&lt;/p&gt;&lt;/div&gt;
</pre></div>
<div class="extras"><p>It is important to distinguish that if multiple tags are listed on a single <strong>@wrap</strong> tag, the parser considers this a single wrap tag with multiple elements. That is, when you use <strong>@parw</strong>, it will clear a single item from the stack, and in the case of a multiple <strong>@wrap</strong> tag, it clears all of the tags associated with that tag. Let's demonstrate it just to be sure:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Clearing @wrap tag multiples</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
Begin by showing that input is not wrapped by default
Begin by showing that input is not wrapped by default
&#64;wrap div, p
This line will be wrapped with HTML both a div and a p tag
&lt;div&gt;&lt;p&gt;This line will be wrapped with HTML both a div and a p tag&lt;/p&gt;&lt;/div&gt;
&#64;parw
And now this line has no tags
And now this line has no tags
</pre></div>
<div class="extras"><p>If you issue <strong>&#64;parw</strong> when the wrap stack is empty, the parser issues a warning:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@parw with empty wrap stack</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
&#64;parw
WARNING: wrapper stack is empty&lt;br /&gt;
</pre></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Additional options</h3></div>
<div class="extras"><p>The <strong>&#64;wrap</strong> has two specialized parameters <strong>nop</strong> and <strong>null</strong> which do the same thing: they temporarily suspend wrapping of content with the previously specified <strong>&#64;wrap</strong> tag. Here's an example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Temporarily suspend wrapping of content</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
&#64;wrap div, p
This line will be wrapped with HTML both a div and a p tag
&lt;div&gt;&lt;p&gt;This line will be wrapped with HTML both a div and a p tag&lt;/p&gt;&lt;/div&gt;
&#64;wrap null
And now this line has no tags
And now this line has no tags
&#64;parw
And now this line will have the previously specified wrap tags of div, p
&lt;div&gt;&lt;p&gt;And now this line will have the previously specified wrap tags of div, p&lt;/p&gt;&lt;/div&gt;
</pre></div>
<div class="extras"><p>The <strong>&#64;parw</strong> also accepts parameters: (<strong>&ast; | all</strong>) or alternatively a <strong>&num;</strong> specified how many tags to clear from the stack. By default, <strong>&#64;parw</strong> will clear a single item from the wrap stack. If you pass an integer <em>n</em>, then it will attempt to clear <em>n</em> items from the wrap stack. If you pass either <strong>&ast;</strong> or <strong>all</strong>, then it will clear all items from the wrap stack, but only those that were added within the current scope. The current scope just means the current <strong>@import</strong> file, and it goes back to the note we made up front about remove items from the wrap stack. Here are a couple of examples of the parameters to <strong>&#64;parw</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Clearing the wrap stack</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
&#64;wrap div, p
This line will be wrapped with HTML both a div and a p tag
&lt;div&gt;&lt;p&gt;This line will be wrapped with HTML both a div and a p tag&lt;/p&gt;&lt;/div&gt;
&#64;wrap li
And now this line a list item tag
&lt;li&gt;And now this line a list item tag&lt;/li&gt;
&#64;parw &#42;
And now this line has no tags
And now this line has no tags
&nbsp;
&#64;wrap div
This line will be wrapped with HTML div tags
&lt;div&gt;This line will be wrapped with HTML div tags&lt;/div&gt;
&#64;wrap p
This line, however, will be wrapped in HTML p tags
&lt;p&gt;This line, however, will be wrapped in HTML p tags&lt;/p&gt;
&#64;parw 25
WARNING: only 2 items found on the stack that can be cleared&lt;br /&gt;
</pre></div>
<div class="extras"><p>The final thing we'll cover is a specialized @code macro called <strong>wrap_stack</strong>. This macro gives you some additional options to use with @wrap tags for a few specialized cases. Here are the details on this macro.</p></div>
<div class="extras"><p>The first thing is the macro itself, here's the syntax for it:</p></div>
<div class="syntax"><p class="divTitle">Syntax: &lsqb;code.wrap_stack(w="&lt; | &gt; | &num;")&rsqb;</p></div>
<div class="extras"><p>If you invoke it with no parameters <em>&lsqb;code.wrap_stack&rsqb;</em>, it will return the complete starting and ending tags for the current wrap tag.</p></div>
<div class="extras"><p>If you pass <em>&lt;</em>, it returns the opening tag(s) sequence, and conversely, <em>&gt;</em> returns the closing tag(s).</p></div>
<div class="extras"><p>Finally, if you pass <em>&num;</em>, it returns the current stack size, which is really only useful for debugging purposes. Here's a some examples:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Viewing the wrap stack</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
&#64;wrap div, p
&lsqb;code.wrap_stack&rsqb;
&lt;div&gt;&lt;p&gt;&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;&lt;/p&gt;&lt;/div&gt;
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack&rsqb;
&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack(w="&lt;")]
&lt;div&gt;&lt;p&gt;
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack(w="&gt;")]
&lt;/p&gt;&lt;/div&gt;
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack(w="&num;")]
1
&nbsp;
</pre></div>
<div class="extras"><p>At first glance, the initial call to <strong>&lsqb;code.wrap_stack&rsqb;</strong> might look like a bug, because the tag appears twice. However, this is behaving properly, since tecnically, a wrap tag of <strong>div,p</strong> is currently in effect, and thus the output from the call to <strong>code.wrap_stack</strong> is being wrapped in the tags! On the subsequent calls, you'll notice we prefix each line with <em><strong>&commat;&commat;</strong></em>, something we haven't discussed yet. This is the <strong>raw</strong> prefix, and when used at the start of any line, any wrap tags in effect are ignored.</p></div>
<div class="extras"><p>This concludes the chapter on <strong>&#64;wrap</strong> and <strong>&#64;parw</strong>.</p></div>
Going to get one more warning about the wrapper stack being empty, cause I flushed it at the end of the @wrap unittests above...<br />
WARNING: wrapper stack is empty<br />
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: var<br />
----------------------------------------<br />
<strong>wt1=</strong><br />&nbsp;&nbsp;<strong>works=</strong>html.wt2<br />
&nbsp;&nbsp;<strong>alsoworks=</strong>html.wt3<br />
&nbsp;&nbsp;<strong>_format=</strong>html.wt1<br />
<br />
<strong>wt2=</strong><br />&nbsp;&nbsp;<strong>fails=</strong>&lt;span class="myclass2" style="color:blue;font-size:1.3em"&gt;&lt;/span&gt;<br />
&nbsp;&nbsp;<strong>alsofails=</strong>{{html.wt3}}<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;span class="myclass1" style="color:red;font-size:1.3em"&gt;&lt;/span&gt;<br />
<br />
----------------------------------------<br />
NAMESPACE: html<br />
----------------------------------------<br />
<strong>wt1=</strong><br />&nbsp;&nbsp;<strong>_tag=</strong>span<br />
&nbsp;&nbsp;<strong>class=</strong>myclass1<br />
&nbsp;&nbsp;<strong>style=</strong>color:red;font-size:1.3em<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
<br />
<strong>wt2=</strong><br />&nbsp;&nbsp;<strong>_tag=</strong>span<br />
&nbsp;&nbsp;<strong>class=</strong>myclass2<br />
&nbsp;&nbsp;<strong>style=</strong>color:blue;{{var.fs_attr}}<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
<br />
<strong>wt3=</strong><br />&nbsp;&nbsp;<strong>_tag=</strong>span<br />
&nbsp;&nbsp;<strong>class=</strong>myclass3<br />
&nbsp;&nbsp;<strong>style=</strong>color:green;font-size:1.3em<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
<br />
</code>
</div>
</div>
</body>
</html>
