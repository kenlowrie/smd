<!DOCTYPE html>
<html lang="en">
<head>
<title>default page title</title>
<meta charset="UTF-8">
<link rel='stylesheet' href='smd.css' />
</head>
<body>
<div class="wrapper">
<h2 style="border-top: 3px solid black;border-bottom: 2px dashed black">Script: image.md</h2>
<h3 style="font-size:1.3em;border-bottom: 3px solid black">Purpose: Testing @image namespace</h3>
<div class="extras"><p>We are not testing the <em><strong>@code</strong></em> namespace</p></div>
<div class="plain"><p class="plainTitle">Generic Namespace testing for <em><strong>@image</strong></em> namespace</p></div>
<div class="extras"><p>&lsqb;&lsqb;ns&rsqb;.a1&rsqb; --> a1_rval</p></div>
<div class="extras"><p>&lsqb;&lcub;&lcub;ns&rcub;&rcub;.a2&rsqb; --> <img/></p></div>
<div class="extras"><p>&lsqb;&lcub;&lcub;ns&rcub;&rcub;.a3] --> <img/></p></div>
<div class="extras"><p>&lsqb;image.a4&rsqb; --> a4_rval</p></div>
<div class="extras"><p><h3>------------------------------------------</h3></p></div>
<div class="extras"><p><h3>Old school way of encoding SMD</h3></p></div>
<div class="extras"><p>&lsqb;&lsqb;ns].a1] --> a1_rval</p></div>
<div class="extras"><p>&lsqb;image.a2] --> <img/></p></div>
<div class="extras"><p><h3>And now just trying all the combinations...</h3></p></div>
<div class="extras"><p>&lcub;&lcub;&lsqb;ns&rsqb;.a1&rcub;&rcub; --> {{image.a1}}  -- Delayed expansion <em><strong>{{}}</strong></em> does not work inline</p></div>
<div class="extras"><p>&lsqb;&lsqb;ns&rsqb;.a1&rsqb; --> a1_rval</p></div>
<div class="extras"><p>&lsqb;&lcub;&lcub;ns&rcub;&rcub;.a1&rsqb; --> [{{ns}}.a1] -- Delayed expansion <em><strong>{{}}</strong></em> does not work inline</p></div>
<div class="extras"><p><h3>------------------------------------------</h3></p></div>
<div class="extras"><p>Setting default rvalue for a2 and a3</p></div>
<div class="extras"><p>[&lsqb;ns].a2] --> a2_rval</p></div>
<div class="extras"><p>[&lsqb;ns].a3] --> a3_rval</p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>a1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>a1_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>a2=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>a2_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>a3=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>a3_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>a4=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>a4_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
WARNING: Use of reserved attribute name <em>_private_attrs_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_public_attrs_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_private_attrs_esc_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_public_attrs_esc_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_public_keys_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_private_keys_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_all_attrs_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_all_attrs_esc_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_null_</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
WARNING: Use of reserved attribute name <em>_rval</em> is ambiguous within a variable declaration and will likely lead to unexpected results.<br />
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>invalid-attribute=</strong><br />&nbsp;&nbsp;<strong>_private_attrs_=</strong>no<br />
&nbsp;&nbsp;<strong>_public_attrs_=</strong>no<br />
&nbsp;&nbsp;<strong>_private_attrs_esc_=</strong>no<br />
&nbsp;&nbsp;<strong>_public_attrs_esc_=</strong>no<br />
&nbsp;&nbsp;<strong>_public_keys_=</strong>no<br />
&nbsp;&nbsp;<strong>_private_keys_=</strong>no<br />
&nbsp;&nbsp;<strong>_all_attrs_=</strong>no<br />
&nbsp;&nbsp;<strong>_all_attrs_esc_=</strong>no<br />
&nbsp;&nbsp;<strong>_null_=</strong>no<br />
&nbsp;&nbsp;<strong>_rval=</strong>no<br />
&nbsp;&nbsp;<strong>_code=</strong>used by code ns<br />
&nbsp;&nbsp;<strong>_params_=</strong>used by code ns<br />
&nbsp;&nbsp;<strong>_last=</strong>used by code ns<br />
&nbsp;&nbsp;<strong>run=</strong>code.var.run<br />
&nbsp;&nbsp;<strong>public=</strong>yes<br />
&nbsp;&nbsp;<strong>not_private=</strong>yes<br />
&nbsp;&nbsp;<strong>src=</strong>print('required for code')<br />
&nbsp;&nbsp;<strong>type=</strong>eval<br />
&nbsp;&nbsp;<strong>_help=</strong>&lt;em&gt;{{self._}}this is line 1 help text&lt;/em&gt;&lt;br /&gt;&lt;strong&gt;line2&lt;/strong&gt; help text.<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><p><em><strong>public</strong></em> =  run="code.var.run" public="yes" not_private="yes" src="print('required for code')" type="eval"</p></div>
<div class="extras"><p><em><strong>public_esc</strong></em> =  run=\"code.var.run\" public=\"yes\" not_private=\"yes\" src=\"print('required for code')\" type=\"eval\"</p></div>
<div class="extras"><p><em><strong>private</strong></em> =  _private_attrs_="no" _public_attrs_="no" _private_attrs_esc_="no" _public_attrs_esc_="no" _public_keys_="no" _private_keys_="no" _all_attrs_="no" _all_attrs_esc_="no" _null_="no" _rval="no" _code="used by code ns" _params_="used by code ns" _last="used by code ns" _help="<em>invalid-attributethis is line 1 help text</em><br /><strong>line2</strong> help text." _format="<img run="code.var.run" public="yes" not_private="yes" src="print('required for code')" type="eval"/>" _tag="img"</p></div>
<div class="extras"><p><em><strong>private_esc</strong></em> =  _private_attrs_=\"no\" _public_attrs_=\"no\" _private_attrs_esc_=\"no\" _public_attrs_esc_=\"no\" _public_keys_=\"no\" _private_keys_=\"no\" _all_attrs_=\"no\" _all_attrs_esc_=\"no\" _null_=\"no\" _rval=\"no\" _code=\"used by code ns\" _params_=\"used by code ns\" _last=\"used by code ns\" _help=\"<em>invalid-attributethis is line 1 help text</em><br /><strong>line2</strong> help text.\" _format=\"<img run="code.var.run" public="yes" not_private="yes" src="print('required for code')" type="eval"/>\" _tag=\"img\"</p></div>
<div class="extras"><p><em><strong>all_attrs</strong></em> =  _private_attrs_="no" _public_attrs_="no" _private_attrs_esc_="no" _public_attrs_esc_="no" _public_keys_="no" _private_keys_="no" _all_attrs_="no" _all_attrs_esc_="no" _null_="no" _rval="no" _code="used by code ns" _params_="used by code ns" _last="used by code ns" run="code.var.run" public="yes" not_private="yes" src="print('required for code')" type="eval" _help="<em>invalid-attributethis is line 1 help text</em><br /><strong>line2</strong> help text." _format="<img run="code.var.run" public="yes" not_private="yes" src="print('required for code')" type="eval"/>" _tag="img"</p></div>
<div class="extras"><p><em><strong>all_attrs_esc</strong></em> =  _private_attrs_=\"no\" _public_attrs_=\"no\" _private_attrs_esc_=\"no\" _public_attrs_esc_=\"no\" _public_keys_=\"no\" _private_keys_=\"no\" _all_attrs_=\"no\" _all_attrs_esc_=\"no\" _null_=\"no\" _rval=\"no\" _code=\"used by code ns\" _params_=\"used by code ns\" _last=\"used by code ns\" run=\"code.var.run\" public=\"yes\" not_private=\"yes\" src=\"print('required for code')\" type=\"eval\" _help=\"<em>invalid-attributethis is line 1 help text</em><br /><strong>line2</strong> help text.\" _format=\"<img run="code.var.run" public="yes" not_private="yes" src="print('required for code')" type="eval"/>\" _tag=\"img\"</p></div>
<div class="extras"><p><em><strong>public_keys</strong></em> = run, public, not_private, src, type,</p></div>
<div class="extras"><p><em><strong>private_keys</strong></em> = _private_attrs_, _public_attrs_, _private_attrs_esc_, _public_attrs_esc_, _public_keys_, _private_keys_, _all_attrs_, _all_attrs_esc_, _null_, _rval, _code, _params_, _last, _help, _format, _tag,</p></div>
<div class="extras"><p><em><strong>null</strong></em> =</p></div>
<div class="extras"><p><em><strong>rvalue</strong></em> = no</p></div>
<div class="extras"><p><em><strong>run</strong></em> = code.var.run</p></div>
<div class="extras"><p><em><strong>_code</strong></em> = used by code ns</p></div>
<div class="extras"><p><em><strong>_params_</strong></em> = used by code ns</p></div>
<div class="extras"><p><em><strong>_last</strong></em> = used by code ns</p></div>
<div class="extras"><p><em><strong>_help</strong></em> = <em>invalid-attributethis is line 1 help text</em><br /><strong>line2</strong> help text.</p></div>
<div class="extras"><p><em><strong>?</strong></em> = <em>invalid-attributethis is line 1 help text</em><br /><strong>line2</strong> help text.</p></div>
<div class="extras"><p><em><strong>??</strong></em> = invalid-attributethis is line 1 help text
line2 help text.</p></div>
<div class="extras"><p><em><strong>_last</strong></em> = used by code ns</p></div>
<div class="extras"><p><em><strong>_rval</strong></em> on legitimate variable = [a4._rval]</p></div>
<div class="extras"><p><em><strong>No help available</strong></em> on legitimate variable = <em>No help available</em></p></div>
<div class="extras"><p><em><strong>[a4._help]</strong></em> on legitimate variable = [a4._help]</p></div>
<div class="extras"><p>invalid-attribute.not_private = YES</p></div>
<div class="extras"><h3>------------------------------------------</h3></div>
<div class="extras"><span class="blue"><h4>Testing creating names with invalid characters</h4></span></div>
<div class="extras"><p>Test @image with no parameters</p></div>
ERROR: addVariable called with empty dictionary.<br />
ERROR: addVariable called with empty dictionary.<br />
<div class="extras"><p>These first ones will fail in AdvancedNamespace().addVariable() because the dictionary will be empty</p></div>
ERROR: addVariable called with empty dictionary.<br />
ERROR: addVariable called with empty dictionary.<br />
ERROR: addVariable called with empty dictionary.<br />
ERROR: addVariable called with empty dictionary.<br />
ERROR: addVariable called with empty dictionary.<br />
<div class="extras"><p>These next ones will have the namespace parser  catch the errors and fail the variable creation.</p></div>
ADD: Invalid character used in variable name "1". Must conform to regular expression "^[a-zA-Z_][-\w]*$"<br />
ADD: Invalid character used in variable name "@". Must conform to regular expression "^[a-zA-Z_][-\w]*$"<br />
ADD: Invalid character used in variable name "a b". Must conform to regular expression "^[a-zA-Z_][-\w]*$"<br />
<strong>expr=</strong><br />&nbsp;&nbsp;<strong>line=</strong>@image _="b1" _format="mix of attrs" 123attr="nope"<br />
&nbsp;&nbsp;<strong>code=</strong>{{self.line}} src="print()" type="eval"<br />
&nbsp;&nbsp;<strong>_format=</strong>usage: var.testline(line="line to evaluate")<br />
<br />
<div class="extras"><p>--> @image _="b1" _format="mix of attrs" 123attr="nope"</p></div>
<div class="extras"><p>--> {{self.line}} src="print()" type="eval"</p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>b1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>mix of attrs<br />
&nbsp;&nbsp;<strong>123attr=</strong>nope<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><h3>------------------------------------------</h3></div>
<div class="extras"><span class="blue"><h4>Testing creating variables with delayed expansion of other variables</h4></span></div>
<div class="extras"><p>These next 3 illustrate the issue described above. There is no way to get c0.a to evaluate when the test is run,</p></div>
<div class="extras"><p>because when <br /><br />.code=<em>@image _="b1" _format="mix of attrs" 123attr="nope" src="print()" type="eval"</em> or <br />.image=<em>@image _="b1" _format="mix of attrs" 123attr="nope"</em><br /><br />are evaluated, they are expanded at the time, and that changes behavior</p></div>
<div class="extras"><p><div class="extras"><p></p></div>
<strong>c0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>constants<br />
&nbsp;&nbsp;<strong>a=</strong>1<br />
&nbsp;&nbsp;<strong>b=</strong>2<br />
&nbsp;&nbsp;<strong>c=</strong>3<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c2=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<div class="extras"><p></p></div></p></div>
<div class="extras"><p>[&lsqb;ns].c1] =</p></div>
<div class="extras"><p>1</p></div>
<div class="extras"><p>[&lsqb;ns].c2] =</p></div>
<div class="extras"><p>1</p></div>
<div class="extras"><p>[&lsqb;ns].c1] = 1 or 1</p></div>
<div class="extras"><p>[&lsqb;ns].c2] = 1 or 1</p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>c0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>constants<br />
&nbsp;&nbsp;<strong>a=</strong>1<br />
&nbsp;&nbsp;<strong>b=</strong>2<br />
&nbsp;&nbsp;<strong>c=</strong>3<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c2=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>c0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>constants<br />
&nbsp;&nbsp;<strong>a=</strong>9<br />
&nbsp;&nbsp;<strong>b=</strong>2<br />
&nbsp;&nbsp;<strong>c=</strong>3<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c2=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><p>&lsqb;c1] = 1</p></div>
<div class="extras"><p>&lsqb;c2] = 1</p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>c0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>Constants<br />
&nbsp;&nbsp;<strong>a=</strong>8<br />
&nbsp;&nbsp;<strong>b=</strong>2<br />
&nbsp;&nbsp;<strong>c=</strong>3<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c2=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><h3>------------------------------------------</h3></div>
<div class="extras"><span class="blue"><h4>Testing creating variables with references to instance variables</h4></span></div>
<div class="extras"><p>&lsqb;c2.attr1] = <em>attribute 1</em></p></div>
<div class="extras"><p>&lsqb;c2.attr2] = <strong>attribute 2</strong></p></div>
<div class="extras"><p>&lsqb;c2.attr3] = <em>attribute 1</em>--<strong>attribute 2</strong></p></div>
<div class="extras"><p>&lsqb;c2.attr4] = <strong>attribute 2</strong>--<em>attribute 1</em></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>c0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>Constants<br />
&nbsp;&nbsp;<strong>a=</strong>8<br />
&nbsp;&nbsp;<strong>b=</strong>2<br />
&nbsp;&nbsp;<strong>c=</strong>3<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c2=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>attr1=</strong>&lt;em&gt;attribute 1&lt;/em&gt;<br />
&nbsp;&nbsp;<strong>attr2=</strong>&lt;strong&gt;attribute 2&lt;/strong&gt;<br />
&nbsp;&nbsp;<strong>attr3=</strong>{{self.attr1}}--{{self.attr2}}<br />
&nbsp;&nbsp;<strong>attr4=</strong>[self.attr2]--[self.attr1]<br />
<br />
</code>
</div>
<div class="extras"><h2>------------------------------------------</h2></div>
<div class="extras"><p>This will test changing a variable's attributes using @set</p></div>
<div class="extras"><p>Current value for &lsqb;ENC&rsqb;=<em>&nbsp;[smd_markdown_here]</em></p></div>
<div class="extras"><p><h3>Create new variable using @set</h3></p></div>
<div class="extras"><p>Make sure variable d0 doesn't exist...</p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
</code>
</div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: var<br />
----------------------------------------<br />
<strong>ENC=</strong><br />&nbsp;&nbsp;<strong>c=</strong>[smd_markdown_here]<br />
&nbsp;&nbsp;<strong>_format=</strong>{{code.encode_smd(t="&amp;nbsp;{{self.c}}")}}<br />
<br />
</code>
</div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: var<br />
----------------------------------------<br />
<strong>code_helper=</strong><br />&nbsp;&nbsp;<strong>attrs_code=</strong>src="print(12345)" type="eval"<br />
&nbsp;&nbsp;<strong>attrs_other=</strong><br />
&nbsp;&nbsp;<strong>_format=</strong><br />
<br />
</code>
</div>
<div class="extras"><p><strong>Now create the variable using @set _ns="image" _="d0" _format="d0_rval" </strong></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>d0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>d0_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: var<br />
----------------------------------------<br />
<strong>ENC=</strong><br />&nbsp;&nbsp;<strong>c=</strong>@set _ns="image" _="d0" _format="d0_rval"<br />
&nbsp;&nbsp;<strong>_format=</strong>{{self.c}} {{var.code_helper}}<br />
<br />
</code>
</div>
<div class="extras"><p>New value for &lsqb;ENC&rsqb;=<em>@set _ns="image" _="d0" _format="d0_rval" </em></p></div>
<div class="extras"><p><strong>And change its default value</strong></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>d0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>d0_rval+<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><p><strong>Now update d0 by adding the attribute newattr to @image d0</strong></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>d0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>d0_rval+<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>newattr=</strong>newly added attribute<br />
<br />
</code>
</div>
<div class="extras"><p><strong>Now add the attribute extraattr to @image d0, and change newattr = fubar</strong></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>d0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>d0_rval+<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>newattr=</strong>fubar<br />
&nbsp;&nbsp;<strong>extraattr=</strong>{{self.newattr}}<br />
<br />
</code>
</div>
<div class="extras"><p>d0.extraattr = <strong>fubar</strong></p></div>
<div class="extras"><p>Changing d0.newattr="newval"</p></div>
<div class="extras"><p>Which now causes d0.extraattr to have a new value = <strong>newval</strong></p></div>
<div class="extras"><p>can we remove an attribute?</p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>id1=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>New Value<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><p>ATTR1 should be "New Value":</p></div>
<div class="extras"><p><img attr1="New Value"/></p></div>
<div class="extras"><h3>------------------------------------------</h3></div>
<div class="extras"><p><strong>Added foo attribute to id1. Now id1 has values</strong></p></div>
<div class="extras"><p><img attr1="New Value" foo="bar"/></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>id1=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>New Value<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>foo=</strong>bar<br />
<br />
</code>
</div>
<div class="extras"><p><strong>Added bar attribute to id1. Now id1 is</strong></p></div>
<div class="extras"><p><img attr1="New Value" foo="nubar" bar="oldfu"/></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>id1=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>New Value<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>foo=</strong>nubar<br />
&nbsp;&nbsp;<strong>bar=</strong>oldfu<br />
<br />
</code>
</div>
<div class="extras"><p><strong>Created id2 with same attributes as id1 except ATTR1. <em>id2</em> =</strong></p></div>
<div class="extras"><p><img foo="nubar" bar="oldfu"/></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>id2=</strong><br />&nbsp;&nbsp;<strong>foo=</strong>nubar<br />
&nbsp;&nbsp;<strong>bar=</strong>oldfu<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><p><strong>Added 25 new attributes to id2. It now equals</strong></p></div>
<div class="extras"><p><img 01="1" 02="2" 03="3" 04="4" 05="5" 06="6" 07="7" 08="8" 09="9" 10="10" 11="11" 12="12" 13="13" 14="14" 15="15" 16="16" 17="17" 18="18" 19="19" 20="20" 21="21" 22="22" 23="23" 24="24" 25="25"/></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>id2=</strong><br />&nbsp;&nbsp;<strong>01=</strong>1<br />
&nbsp;&nbsp;<strong>02=</strong>2<br />
&nbsp;&nbsp;<strong>03=</strong>3<br />
&nbsp;&nbsp;<strong>04=</strong>4<br />
&nbsp;&nbsp;<strong>05=</strong>5<br />
&nbsp;&nbsp;<strong>06=</strong>6<br />
&nbsp;&nbsp;<strong>07=</strong>7<br />
&nbsp;&nbsp;<strong>08=</strong>8<br />
&nbsp;&nbsp;<strong>09=</strong>9<br />
&nbsp;&nbsp;<strong>10=</strong>10<br />
&nbsp;&nbsp;<strong>11=</strong>11<br />
&nbsp;&nbsp;<strong>12=</strong>12<br />
&nbsp;&nbsp;<strong>13=</strong>13<br />
&nbsp;&nbsp;<strong>14=</strong>14<br />
&nbsp;&nbsp;<strong>15=</strong>15<br />
&nbsp;&nbsp;<strong>16=</strong>16<br />
&nbsp;&nbsp;<strong>17=</strong>17<br />
&nbsp;&nbsp;<strong>18=</strong>18<br />
&nbsp;&nbsp;<strong>19=</strong>19<br />
&nbsp;&nbsp;<strong>20=</strong>20<br />
&nbsp;&nbsp;<strong>21=</strong>21<br />
&nbsp;&nbsp;<strong>22=</strong>22<br />
&nbsp;&nbsp;<strong>23=</strong>23<br />
&nbsp;&nbsp;<strong>24=</strong>24<br />
&nbsp;&nbsp;<strong>25=</strong>25<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><p><strong>Changed some of the new attributes so their value has an <em>x</em> in front. It now equals</strong></p></div>
<div class="extras"><p><img 01="x1" 02="x2" 03="x3" 04="x4" 05="x5" 06="x6" 07="x7" 08="x8" 09="x9" 10="x10" 11="x11" 12="x12" 13="x13" 14="x14" 15="x15" 16="x16" 17="x17" 18="x18" 19="x19" 20="x20" 21="21" 22="22" 23="23" 24="24" 25="25"/></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>id2=</strong><br />&nbsp;&nbsp;<strong>01=</strong>x1<br />
&nbsp;&nbsp;<strong>02=</strong>x2<br />
&nbsp;&nbsp;<strong>03=</strong>x3<br />
&nbsp;&nbsp;<strong>04=</strong>x4<br />
&nbsp;&nbsp;<strong>05=</strong>x5<br />
&nbsp;&nbsp;<strong>06=</strong>x6<br />
&nbsp;&nbsp;<strong>07=</strong>x7<br />
&nbsp;&nbsp;<strong>08=</strong>x8<br />
&nbsp;&nbsp;<strong>09=</strong>x9<br />
&nbsp;&nbsp;<strong>10=</strong>x10<br />
&nbsp;&nbsp;<strong>11=</strong>x11<br />
&nbsp;&nbsp;<strong>12=</strong>x12<br />
&nbsp;&nbsp;<strong>13=</strong>x13<br />
&nbsp;&nbsp;<strong>14=</strong>x14<br />
&nbsp;&nbsp;<strong>15=</strong>x15<br />
&nbsp;&nbsp;<strong>16=</strong>x16<br />
&nbsp;&nbsp;<strong>17=</strong>x17<br />
&nbsp;&nbsp;<strong>18=</strong>x18<br />
&nbsp;&nbsp;<strong>19=</strong>x19<br />
&nbsp;&nbsp;<strong>20=</strong>x20<br />
&nbsp;&nbsp;<strong>21=</strong>21<br />
&nbsp;&nbsp;<strong>22=</strong>22<br />
&nbsp;&nbsp;<strong>23=</strong>23<br />
&nbsp;&nbsp;<strong>24=</strong>24<br />
&nbsp;&nbsp;<strong>25=</strong>25<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="plain"><p class="plainTitle">Testing @image builtin functions</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" style="margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;"/></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>shot1=</strong><br />&nbsp;&nbsp;<strong>src=</strong>/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg<br />
&nbsp;&nbsp;<strong>style=</strong>margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" style="margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;"/></p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>shot1=</strong><br />&nbsp;&nbsp;<strong>src=</strong>/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg<br />
&nbsp;&nbsp;<strong>style=</strong>{{var.IMG_STYLE.inline_border}}<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
<div class="plain"><p class="plainTitle">Testing adding new @image builtins</p></div>
<div class="plain"><p class="plainTitle">User manual sections for nsimage-doc.md</p></div>
<div class="toc"><p class="divTitle">Table of Contents - Unittest nsimage-doc.md</p>
<br />
<span class="indent"><a href="#ug_ns_image">&#64;image Namespace</a> - <strong>@image Namespace</strong></span><br />
<span class="indent"><span class="indent"><a href="#ug_image_builtins">&#64;image Builtins</a> - <strong>@image Namespace</strong></span></span><br />
</div>
<div class="extras"><h3>Review link bookmarks from nsimage-inc.md</h3></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: link<br />
----------------------------------------<br />
<strong>ug_image_builtins=</strong><br />&nbsp;&nbsp;<strong>id=</strong>{{self._}}<br />
&nbsp;&nbsp;<strong>_format=</strong>@@ {{self._inline}}<br />
&nbsp;&nbsp;<strong>_link_o=</strong>&lt;a href="#{{self.id}}"&gt;<br />
&nbsp;&nbsp;<strong>link=</strong>{{self._link_o}}{{self.text}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>text=</strong>&amp;#64;image Builtins<br />
&nbsp;&nbsp;<strong>_inline=</strong>&lt;a id="{{self.id}}"&gt;&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_qlink=</strong>{{self._link_o}}{{self._qtext}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_qtext=</strong>SETMETOLINKTEXT<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
<br />
<strong>ug_ns_image=</strong><br />&nbsp;&nbsp;<strong>id=</strong>{{self._}}<br />
&nbsp;&nbsp;<strong>_format=</strong>@@ {{self._inline}}<br />
&nbsp;&nbsp;<strong>_link_o=</strong>&lt;a href="#{{self.id}}"&gt;<br />
&nbsp;&nbsp;<strong>link=</strong>{{self._link_o}}{{self.text}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>text=</strong>&amp;#64;image Namespace<br />
&nbsp;&nbsp;<strong>_inline=</strong>&lt;a id="{{self.id}}"&gt;&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_qlink=</strong>{{self._link_o}}{{self._qtext}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_qtext=</strong>SETMETOLINKTEXT<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
<br />
</code>
</div>
<a id="ug_ns_image"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>The @image Namespace</h2></div>
<div class="extras"><p>The <strong>&#64;image</strong> keyword is used to declare variables that are used to include images in your document. Basically, <strong>&#64;image</strong> is a convenient way to abstract the <strong>&lt;img&gt;</strong> HTML tag.</p></div>
<div class="extras"><p>Despite being an abstraction of the HTML element <strong>img</strong>, <strong>&#64;image</strong> is not based on the <strong>&#64;html</strong> namespace. Given that, the underlying semantics do not support the <strong>&#64;html</strong> built-in attributes such as <span class="red bold"><span style="font-size:150%">.&lt;</span></span>, <span class="red bold"><span style="font-size:150%">.&gt;</span></span> and <span class="red bold"><span style="font-size:150%">.&lt;+</span></span>. The full syntax is:</p></div>
<div class="syntax"><p class="divTitle">&#64;image Syntax</p>
<p><div class="extras"><p class="generic"></p>
<p>@image _id="imagename" src="pathtoimage" alt="" _private="val"</p>
<p></p></div></p>
</div>
<div class="extras"><p>Here's how it works. Like all namespaces, <em>_id="imagename"</em> is what names the variable in the <strong>&#64;image</strong> namespace. You will use that name to cause the <strong>&lt;img&gt;</strong> tag to be emitted in your document. Also recall that attributes that start with an underscore <span class="red bold"><span style="font-size:150%">_</span></span> are considered private, and are not included in the generated <strong>&#64;image</strong> HTML code. So, if you were to write:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Creating variables in &#64;image namespace</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&commat;image _id="img1" src="path/foo.jpg" alt="my text for alt" class="myclass" _private="My private note"
</pre></div>
<div class="extras"><p>and then write:</p></div>
<div class="extras"><p><span class="indent"><span style="font-size:120%">&lsqb;img1&rsqb;</span></span></p></div>
<div class="extras"><p>The code that would be inserted would be:</p></div>
<div class="extras"><p><span class="indent"><strong>&lt;img src="path/foo.jpg" alt="my text for alt" class="myclass"/&gt;</strong></span></p></div>
<div class="extras"><p>Note that _id wasn't included, nor was _private. However, I can reference them both using the syntax:</p></div>
<div class="extras"><p><span class="indent"><strong>&lsqb;img1._id&rsqb;</strong> which emits <em>img1</em> and <strong>&lsqb;img1._private&rsqb;</strong> which emits <span style="font-size:120%">My private note</span></span></p></div>
<div class="extras"><p>This also works to reference the normal attributes. e.g. <strong>&lsqb;img1.class&rsqb;</strong> which emits <span style="font-size:120%">myclass</span>.</p></div>
<div class="extras"><p>And as is the case for all namespaces, if there's ambiguity in the names used in different namespaces, you can add the namespace prefix to clarify. For example, <em><strong>image.</strong></em> in front of the name to force the correct namespace to resolve. For example, if I write the following two lines in my document:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&#64;var</strong> img1="my variable img1 in &#64;var namespace"
<strong>&#64;image</strong> _id="img1" src="foo.png"
</pre></div>
<div class="extras"><p>Then, when I write <strong>&lsqb;var.img1&rsqb;</strong> the parser will emit <em>my variable img1 in &#64;var namespace</em> and when I write <strong>&lsqb;image.img1&rsqb;</strong> the parser emits <em>&lt;img src="foo.png"/&gt;</em>.</p></div>
<div class="extras"><p>Let's go ahead and include an inline image to see <strong>&#64;image</strong> in action. I will write:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&#64;image</strong> _="shot1" src="&lsqb;sys.root&rsqb;/docs/import/shot1.jpg" alt="shot 1" style="width:30%"
</pre></div>
<div class="extras"><p>When I write <strong>&lsqb;shot1&rsqb;</strong>, the parser emits <em>&lt;img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" alt="shot 1" style="width:30%"/&gt;</em> and the browser renders:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" alt="shot 1" style="width:30%"/></p></div>
<div class="extras"><p>Pretty straightforward, don't you think? Okay, now it's time to take a look at the system provided builtins for <strong>&#64;image</strong>, so we can tap into some additional flexibility when rendering images with <strong>smd</strong>.</p></div>
<a id="ug_image_builtins"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;image builtins</h3></div>
<div class="extras"><p>The <strong>&#64;image</strong> namespace provides a limited set of builtins to get you started with using images in your markdown. These builtins are a good starting point for your own image styling, so let's begin with a quick overview of the builtins in <strong>sys.imports/image.md</strong>.</p></div>
<div class="extras"><p><strong>IMG_DEF</strong> contains four different default styles, each of which can be selected using the <strong>IMG_STYLE</strong> attribute shortcuts:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><strong>&lsqb;IMG_STYLE.inline&rsqb;</strong></li>
<li><strong>&lsqb;IMG_STYLE.inline_border&rsqb;</strong></li>
<li><strong>&lsqb;IMG_STYLE.block&rsqb;</strong></li>
<li><strong>&lsqb;IMG_STYLE.block_border&rsqb;</strong></li>
</ul></div>
<div class="extras"><p>In addition, four fixed size attributes and one custom size attribute is provided via the <strong>IMG_SIZE</strong> declaration:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><strong>&lsqb;IMG_SIZE.thumb&rsqb;</strong></li>
<li><strong>&lsqb;IMG_SIZE.small&rsqb;</strong></li>
<li><strong>&lsqb;IMG_SIZE.medium&rsqb;</strong></li>
<li><strong>&lsqb;IMG_SIZE.large&rsqb;</strong></li>
<li><strong>&lsqb;IMG_SIZE.custom&lpar;w="##%"&rpar;)&rsqb;</strong></li>
</ul></div>
<div class="extras"><p>For a quick example of the size and styling shortcuts, let's write the following markdown in this document and see what we get:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lsqb;IMG_SIZE.thumb&rsqb;
&#64;image _="shot1" src="&lsqb;sys.root&rsqb;/docs/import/shot1.jpg" style="&lcub;&lcub;IMG_STYLE.inline_border&rcub;&rcub;"
&lsqb;shot1&rsqb;
</pre></div>
<div class="extras"><p>And here is what the browser renders:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" style="margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>Let's take a closer look at the builtins declared in <strong>image.md</strong> to assist with using images in your documents. We will start by looking at the built-in help for each builtin, and then we'll move on to using them in our document.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>IMG_DEF</strong> Help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>IMG_DEF</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Defines common image styling options.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Not normally accessed directly. Used by <strong>IMG_SIZE</strong> and <strong>IMG_STYLE</strong> as helpers.<br /><br />&nbsp;&nbsp;<strong>Common Attribute Values</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_i_width</strong> - width: CSS value<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_b_size</strong> - border: CSS size value<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_b_type</strong> - border: CSS type value<br /><br />&nbsp;&nbsp;<strong>Common Styling Defaults</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_border_style</strong> - CSS styling for bordered image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_inline_style</strong> - CSS styling for borderless image<br /><br />&nbsp;&nbsp;<strong>Common Image Style Options</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_st_inline</strong> - CSS styling for inline image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_st_inline_border</strong> - CSS styling for inline bordered image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_st_block</strong> - CSS styling for block image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_st_block_border</strong> - CSS styling for block bordered image.</pre>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>IMG_SIZE</strong> Help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>IMG_SIZE</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Provides methods for common image sizes.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Use them when you want to change the default image size used in the <strong>IMG_STYLE</strong> attributes.<br /><br />&nbsp;&nbsp;<strong>Common Methods</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>thumb</strong> - Sets <strong>IMG_DEF._i_width</strong> to 20%<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>small</strong> - Sets <strong>IMG_DEF._i_width</strong> to 40%<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>medium</strong> - Sets <strong>IMG_DEF._i_width</strong> to 70%<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>large</strong> - Sets <strong>IMG_DEF._i_width</strong> to 90%<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>custom(w)</strong> - Sets <strong>IMG_DEF._i_width</strong> to <strong>w</strong><br /><br />&nbsp;&nbsp;<strong>Examples</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;IMG_SIZE.small&rsqb;</strong> - Sets <strong>IMG_DEF._i_width</strong> to <strong>20%</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;IMG_SIZE.custom&lpar;w="50%"&rpar;&rsqb;</strong> - Sets <strong>IMG_DEF._i_width</strong> to <strong>50%</strong>.</pre>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>IMG_STYLE</strong> Help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>IMG_STYLE</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Several styling attributes for common image styles.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;These attributes are used to obtain various CSS styles for an @image variable.<br /><br />&nbsp;&nbsp;<strong>Common Attributes</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>inline</strong> - Returns <strong>IMG_DEF.img_st_inline</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>inline_border</strong> - Returns <strong>IMG_DEF.img_st_inline_border</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>block</strong> - Returns <strong>IMG_DEF.img_st_block</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>block_border</strong> - Returns <strong>IMG_DEF.img_st_block_border</strong><br />&nbsp;&nbsp;<strong>Examples</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;IMG_STYLE.inline&rsqb;</strong> - Returns the CSS to style an inline image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;IMG_STYLE.block_border&rsqb;</strong> - Returns the CSS to style a block image with a border.</pre>
</div>
<div class="extras"><p>The builtins you normally use in your documents are <strong>IMG_SIZE</strong> and <strong>IMG_STYLE</strong>. <strong>IMG_SIZE</strong> is used to set the size of the image that will be displayed in the document. Before we get too far, though, we need to actually declare an <strong>@image</strong> variable that we can experiment with. Let's begin with the following declaration:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declare an image variable</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Set image size to large, declare myshot var and render</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.large&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;image _id="myshot" src="&lsqb;sys.imports&rsqb;/avs/needshot.png" style="&lsqb;IMG_STYLE.inline_border&rsqb;"</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
</div>
<div class="extras"><p>And when we do that, here's what we get:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>Okay, not too complicated thus far. The first thing to note is that the image size takes up almost the entire document window. This is because the width is currently set to <strong>90%</strong>. So let's go ahead and set the size to <strong>&lsqb;IMG_SIZE.small&rsqb;</strong>, and then render the image again:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Change image size to small and render again</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Set image size to small again and just render</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.small&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
</div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>Wait, this looks the same! What's going on? Let's begin by taking a look at the declaration for <strong>myshot</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declaration of image.myshot</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
myshot=
  src=/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png
  style=margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;
  _format=&lt;{{self._tag}}{{self._public_attrs_}}/&gt;
  _tag=img

</pre></div>
<div class="extras"><p>Okay, looks like the issue is that <strong>style</strong> is hard-coded to the <strong>inline_border</strong> style. So, if we redeclare our @image variable, but this time use either "<strong>[!IMG_STYLE.inline_border!]</strong>" or "<strong>{{IMG_STYLE.inline_border}}</strong>", either of which will cause the parser to not evaluate the variable until it is used, that should allow us to override it. So basically, here's the markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declare an image variable</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare myshot, set image size to small, render</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;image _id="myshot" src="&lsqb;image_path&rsqb;/needshot.png" style="&lsqb;!IMG_STYLE.inline_border!&rsqb;"</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.small&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
</div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/needshot.png" style="margin-left:auto;margin-right:auto;width:40%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>And now if I write <strong>&lsqb;IMG_SIZE.thumb&rsqb;</strong> followed by <strong>&lsqb;myshot&rsqb;</strong> I will get:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Change image size to thumb and render again</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Set image size to thumb and just render</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.thumb&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
</div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/needshot.png" style="margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>Let's review the new definition of <strong>myshot</strong> to see how this change affected the variable definition:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declaration of image.myshot</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
myshot=
  src=/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/needshot.png
  style=[IMG_STYLE.inline_border]
  _format=&lt;{{self._tag}}{{self._public_attrs_}}/&gt;
  _tag=img

</pre></div>
<div class="extras"><p>You can see that <strong>style=</strong> is now set to <strong>&lsqb;IMG_STYLE.inline_border&rsqb;</strong> instead of being hardcoded. Using the <span class="red"><span style="font-size:150%">&lsqb;!&nbsp;!&rsqb;</span></span> around a variable name in an attribute declaration causes the parser to delay evaluation of the variable until it is actually used. Note that you would get the same effect by surrounding the variable/attribute name with curly braces, i.e. <span class="red"><span style="font-size:150%">&lcub;&lcub;&nbsp;&rcub;&rcub;</span></span>.</p></div>
<div class="extras"><p>You can see more of these builtins and the <strong>&#64;image</strong> support in action by reviewing the [link.examples._qlink(_qtext="samples")] that are included in the user guide.</p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: image<br />
----------------------------------------<br />
<strong>_img_template_=</strong><br />&nbsp;&nbsp;<strong>_set_style=</strong>{{code.attr_replace_value(attr="self.style" value="{{self._st}}")}}<br />
&nbsp;&nbsp;<strong>_set_style_as_var=</strong>{{code.attr_replace_value(attr="self.style" value="\x5b{{self._st}}\x5d")}}<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>_needshot_=</strong><br />&nbsp;&nbsp;<strong>_set_style=</strong>{{code.attr_replace_value(attr="self.style" value="{{self._st}}")}}<br />
&nbsp;&nbsp;<strong>_set_style_as_var=</strong>{{code.attr_replace_value(attr="self.style" value="\x5b{{self._st}}\x5d")}}<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>src=</strong>/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png<br />
&nbsp;&nbsp;<strong>style=</strong>[IMG_STYLE.inline_border]<br />
<br />
<strong>a1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>a1_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>a2=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>a2_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>a3=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>a3_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>a4=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>a4_rval<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>b1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>mix of attrs<br />
&nbsp;&nbsp;<strong>123attr=</strong>nope<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>Constants<br />
&nbsp;&nbsp;<strong>a=</strong>8<br />
&nbsp;&nbsp;<strong>b=</strong>2<br />
&nbsp;&nbsp;<strong>c=</strong>3<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>c2=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>1<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>attr1=</strong>&lt;em&gt;attribute 1&lt;/em&gt;<br />
&nbsp;&nbsp;<strong>attr2=</strong>&lt;strong&gt;attribute 2&lt;/strong&gt;<br />
&nbsp;&nbsp;<strong>attr3=</strong>{{self.attr1}}--{{self.attr2}}<br />
&nbsp;&nbsp;<strong>attr4=</strong>[self.attr2]--[self.attr1]<br />
<br />
<strong>d0=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>d0_rval+<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>newattr=</strong>newval<br />
&nbsp;&nbsp;<strong>extraattr=</strong>{{self.newattr}}<br />
<br />
<strong>id1=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>New Value<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
&nbsp;&nbsp;<strong>foo=</strong>nubar<br />
&nbsp;&nbsp;<strong>bar=</strong>oldfu<br />
<br />
<strong>id2=</strong><br />&nbsp;&nbsp;<strong>01=</strong>x1<br />
&nbsp;&nbsp;<strong>02=</strong>x2<br />
&nbsp;&nbsp;<strong>03=</strong>x3<br />
&nbsp;&nbsp;<strong>04=</strong>x4<br />
&nbsp;&nbsp;<strong>05=</strong>x5<br />
&nbsp;&nbsp;<strong>06=</strong>x6<br />
&nbsp;&nbsp;<strong>07=</strong>x7<br />
&nbsp;&nbsp;<strong>08=</strong>x8<br />
&nbsp;&nbsp;<strong>09=</strong>x9<br />
&nbsp;&nbsp;<strong>10=</strong>x10<br />
&nbsp;&nbsp;<strong>11=</strong>x11<br />
&nbsp;&nbsp;<strong>12=</strong>x12<br />
&nbsp;&nbsp;<strong>13=</strong>x13<br />
&nbsp;&nbsp;<strong>14=</strong>x14<br />
&nbsp;&nbsp;<strong>15=</strong>x15<br />
&nbsp;&nbsp;<strong>16=</strong>x16<br />
&nbsp;&nbsp;<strong>17=</strong>x17<br />
&nbsp;&nbsp;<strong>18=</strong>x18<br />
&nbsp;&nbsp;<strong>19=</strong>x19<br />
&nbsp;&nbsp;<strong>20=</strong>x20<br />
&nbsp;&nbsp;<strong>21=</strong>21<br />
&nbsp;&nbsp;<strong>22=</strong>22<br />
&nbsp;&nbsp;<strong>23=</strong>23<br />
&nbsp;&nbsp;<strong>24=</strong>24<br />
&nbsp;&nbsp;<strong>25=</strong>25<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>img1=</strong><br />&nbsp;&nbsp;<strong>src=</strong>foo.png<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>invalid-attribute=</strong><br />&nbsp;&nbsp;<strong>_private_attrs_=</strong>no<br />
&nbsp;&nbsp;<strong>_public_attrs_=</strong>no<br />
&nbsp;&nbsp;<strong>_private_attrs_esc_=</strong>no<br />
&nbsp;&nbsp;<strong>_public_attrs_esc_=</strong>no<br />
&nbsp;&nbsp;<strong>_public_keys_=</strong>no<br />
&nbsp;&nbsp;<strong>_private_keys_=</strong>no<br />
&nbsp;&nbsp;<strong>_all_attrs_=</strong>no<br />
&nbsp;&nbsp;<strong>_all_attrs_esc_=</strong>no<br />
&nbsp;&nbsp;<strong>_null_=</strong>no<br />
&nbsp;&nbsp;<strong>_rval=</strong>no<br />
&nbsp;&nbsp;<strong>_code=</strong>used by code ns<br />
&nbsp;&nbsp;<strong>_params_=</strong>used by code ns<br />
&nbsp;&nbsp;<strong>_last=</strong>used by code ns<br />
&nbsp;&nbsp;<strong>run=</strong>code.var.run<br />
&nbsp;&nbsp;<strong>public=</strong>yes<br />
&nbsp;&nbsp;<strong>not_private=</strong>YES<br />
&nbsp;&nbsp;<strong>src=</strong>print('required for code')<br />
&nbsp;&nbsp;<strong>type=</strong>eval<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>myshot=</strong><br />&nbsp;&nbsp;<strong>src=</strong>/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/needshot.png<br />
&nbsp;&nbsp;<strong>style=</strong>[IMG_STYLE.inline_border]<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
<strong>shot1=</strong><br />&nbsp;&nbsp;<strong>src=</strong>/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg<br />
&nbsp;&nbsp;<strong>style=</strong>{{var.IMG_STYLE.inline_border}}<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}/&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>img<br />
<br />
</code>
</div>
</div>
</body>
</html>
