<!DOCTYPE html>
<html lang="en">
<head>
<!-- Generated by /Users/ken/Dropbox/shared/src/script/smd/smd/smdparse.py -->
<title>userdocs.md</title>
<meta charset="UTF-8">
<link rel="stylesheet" href="smd.css" />
</head>
<body class="myclass">
<div class="wrapper">
<h1 class="blue center">Script Markdown User Manual</h1>
<div class="cover"><h3>Script Markdown Utility</h3><p><strong>This guide is NOT Confidential</strong></p><p class="coverSummary">This manual describes the <em>Script Markdown Utility</em>, its features, purpose and more. I've packed it with examples too, so hopefully after you read it, you'll know all you need to know about how to use it to create script markdown documents quickly, easily and most important, efficiently. <strong>Enjoy!</strong><br /><br /><em><strong>NOTE:</strong></em> Additional samples that might be worth reviewing are those in the unit test code located here: <em><strong>(../tests/in/&ast;.md)</strong></em>. Keep in mind that the unit test code is meant to stress test the parser as well as the limits and edges of the syntax of smd, so in some cases it might be confusing or even contradictory to what the user guide covers!</p></div>
<div class="revision"><p class="revTitle">Revision: <em><strong>0.4.2</strong></em> (20200819 @ 12:13:28) </p></div>
<div class="contact"><table style="border:none"><tr style="border:none"><td class="left nowrap" style="border:none">Copyright (c) 2018-2020 by <a href="https://cloudylogic.com">Cloudy Logic Studios</a>, LLC.<br />All Rights Reserved.<br />www.cloudylogic.com<br /></td><td class="right nowrap" style="border:none">Ken Lowrie<br /><em>512-867-5309</em><br /><a href="&#x6d;&#x61;&#x69;&#x6c;&#116;&#111;&#58;&#121;ou&#64;&#x79;&#x6f;&#x75;&#x72;&#100;&#111;&#109;&#97;in&#46;&#x63;&#x6f;&#x6d;">me@mydomain.com</a><br /></td></tr></table></div>
<div class="review"><p class="divTitle">Notes to Reviewer</p><p>    Please send <a href="&#109;&#x61;&#105;&#x6c;t&#111;&#58;&#109;&#x65;&#64;&#x6d;y&#x64;o&#109;&#x61;&#105;&#x6e;&#46;&#x63;o&#109;&#x3f;&#115;&#x75;b&#x6a;e&#99;&#x74;&#61;&#x53;c&#x72;i&#112;&#x74;&#37;&#x32;0&#x4d;a&#114;&#x6b;&#100;&#x6f;w&#x6e;%&#50;&#x30;&#85;&#x74;i&#x6c;i&#116;&#x79;&#37;&#x32;0&#x46;e&#101;&#x64;&#98;&#x61;c&#x6b;">Ken Lowrie</a> any and all feedback, preferably by marking up the PDF using embedded comments. If you edit the PDF text, do so inline using comment boxes, or if you edit the text directly, change the color and/or font size so I can easily find it. Within different versions of this proposal, <ins>additions are marked like this</ins> and <del>deletions are marked like this</del></p></div>
<a id="toc"></a>
<div class="toc"><p class="divTitle">Table of Contents - SMD User Guide<br /><br /></p>
<p><a href="#ug_setup">Setup SMD</a> - <strong>How to setup SMD in your environment</strong><br /></p>
<p><span class="indent"><a href="#ug_setup_pip">Install with pip</a> - <strong>Using <em>pip</em> to install smd</strong></span><br /></p>
<p><span class="indent"><a href="#ug_setup_pipenv">Install with pipenv</a> - <strong>Using <em>pipenv</em> to install smd</strong></span><br /></p>
<p><span class="indent"><a href="#ug_setup_webdriver">Install webdriver</a> - <strong>Installing a webdriver for <em>selenium</strong></em></span><br /></p>
<p><span class="indent"><a href="#ug_setup_use_obs">Using smd with OBS</a> - <strong>Using smd with OBS</strong></span><br /></p>
<p><span class="indent"><a href="#ug_smd_vs_markdown">smd vs markdown</a> - <strong>A simple comparison</strong></span><br /></p>
<p><a href="#ug_cmdline">Command Line</a> - <strong>The SMD Command Line Parameters</strong></span><br /></p>
<p><span class="indent"><a href="#ug_cl_repo_layout">Repository Layout</a> - <strong>Directory structure of smd repository</strong></span><br /></p>
<p><span class="indent"><a href="#ug_cl_components">Major Components</a> - <strong>The major components</strong></span><br /></p>
<p><span class="indent"><a href="#ug_cl_startup">Startup & Shutdown</a> - <strong>Detailed startup and shutdown process</strong></span><br /></p>
<p><span class="indent"><a href="#ug_cl_smd">smd CL</a> - <strong>Command Line Parameters</strong></span><br /></p>
<p><span class="indent"><a href="#ug_cl_smdparse">smdparse CL</a> - <strong>Command Line Parameters</strong></span><br /></p>
<p><span class="indent"><a href="#ug_cl_ismd">ismd CL</a> - <strong>Command Line Parameters</strong></span><br /></p>
<p><a href="#intro">Getting Started</a> - <strong>Getting Started with SMD</strong><br /></p>
<p><span class="indent"><a href="#inlinemd">Inline Markdown</a> - <strong>Formatting content inline</strong></span><br /></p>
<p><span class="indent"><a href="#headings">Headings</a> - <strong>Adding Headings</strong></span><br /></p>
<p><span class="indent"><a href="#ug_builtins">Builtin identifiers</a> - <strong>The predefined built-ins of [smb]</strong></span><br /></p>
<p><span class="indent"><a href="#ug_helpers">Helper built-ins</a> - <strong>Helper built-ins. Why do I care?</strong></span><br /></p>
<p><a href="#ug_namespaces">Namespaces</a> - <strong>Namespaces</strong><br /></p>
<p><span class="indent"><a href="#ug_ns_builtin_help">Built-in Help System</a> - <strong>All namespaces</strong></span><br /></p>
<p><span class="indent"><a href="#ug_ns_var">@var Namespace</a> - <strong>@var Namespace</strong></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_var_syntax">Syntax</a> - <strong>Syntax for @var Variables</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_var_names">Names</a> - <strong>Variable Names</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_var_attrs">Attributes</a> - <strong>Built-in Attributes</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_var_misc">Miscellaneous</a> - <strong>More examples using @var</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_attr_exp">Attribute Expansion</a> - <strong>How attribute values are marked down</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_set_keyword">@set Keyword</a> - <strong>Using @set to update attributes</strong></span></span><br /></p>
<p><span class="indent"><a href="#ug_ns_html">@html Namespace</a> - <strong>@html Namespace</strong></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_html_syntax">Syntax</a> - <strong>Syntax for &#64;html Variables</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_html_names">Names</a> - <strong>Variable Names</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_html_attrs">Attributes</a> - <strong>Built-in Attributes</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_html_misc">Miscellaneous</a> - <strong>More examples using &#64;html</strong></span></span><br /></p>
<p><span class="indent"><a href="#ug_ns_link">@link Namespace</a> - <strong>@link Namespace</strong>"</span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_links">Links</a> - <strong>Link Styles</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_hyperlinks">Hyper Links</a> - <strong>Creating hyperlinks</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_bookmarks">Bookmark Links</a> - <strong>Creating bookmarks</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_mailto_links">mailto Links</a> - <strong>Specialized link href prefix - mailto:</strong></span></span><br /></p>
<p><span class="indent"><a href="#ug_ns_image">&#64;image Namespace</a> - <strong>@image Namespace</strong></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_image_builtins">&#64;image Builtins</a> - <strong>@image Namespace</strong></span></span><br /></p>
<p><span class="indent"><a href="#ug_ns_code">@code Namespace</a> - <strong>&#64;code Namespace</strong></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_code_syntax">Syntax</a> - <strong>Syntax for &#64;code Variables</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_code_names">Names</a> - <strong>Variable Names</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_code_attrs">Attributes</a> - <strong>Built-in Attributes</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_code_builtins">Builtins</a> - <strong>Built-in Macros</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_code_misc">Miscellaneous</a> - <strong>More examples using &#64;code</strong></span></span><br /></p>
<p><a href="#building">Building Documents</a> - <strong>Creating sophisticated layouts</strong><br /></p>
<p><span class="indent"><a href="#imports">Importing files</a> - <strong>Importing, Embedding and Watching files</strong></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#embed">Embedding files</a> - <strong>Embedding files inline</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#watch">Watching files</a> - <strong>Adding files to the Watch list</strong></span></span><br /></p>
<p><span class="indent"><a href="#ug_wrap">@wrap and @parw</a> - <strong>@wrap and @parw and how they are used</strong></span><br /></p>
<p><span class="indent"><a href="#div">DIV</a> - <strong>Creating new DIV sections</strong></span><br /></p>
<p><span class="indent"><a href="#ug_title_pages">Title Pages</a> - <strong>Creating Title Pages</strong></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_tp_cover">Cover Section</a> - <strong>Creating a Cover Section</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_tp_revision">Revision Section</a> - <strong>Creating a Revision Section</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_tp_contact">Contact Section</a> - <strong>Creating a Contact Section</strong></span></span><br /></p>
<p><span class="indent"><a href="#advanced">Advanced Topics</a> - <strong>&#64;raw and other homeless stuff</strong></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_predefined_classes">Predefined Classes</a> - <strong>Using predefined CSS classes</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#avs">Audio/Visual &lpar;AV&rpar; Scripts</a> - <strong>Creating Audio/Visual Scripts</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><a href="#ug_debug">Debugging</a> - <strong>How to debug your markdown</strong></span></span><br /></p>
<p><span class="indent"><span class="indent"><span class="indent"><a href="#ug_debug_cmd">&#64;debug syntax</a> - <strong>Debug command syntax</strong></span></span></span><br /></p>
<p><span class="indent"><span class="indent"><span class="indent"><a href="#ug_debug_parms">&#64;debug parameters</a> - <strong>Debug command parameters</strong></span></span></span><br /></p>
<p><span class="indent"><span class="indent"><span class="indent"><a href="#ug_dump_cmd">&#64;dump syntax</a> - <strong>Dump command syntax</strong></span></span></span><br /></p>
<p><span class="indent"><span class="indent"><span class="indent"><a href="#ug_dump_parms">&#64;dump parameters</a> - <strong>Dump command parameters</strong></span></span></span><br /></p>
<p><span class="indent"><span class="indent"><span class="indent"><a href="#ug_common_issues">Common troubleshooting issues</a> - <strong>How to debug your markdown</strong></span></span></span><br /></p>
<p><a href="#examples">Sample Documents</a> - <strong>Specialized examples built with smd</strong><br /></p>
<p><span class="indent"><a href="#ug_samp_proposal">Sample Proposal</a> - <strong>Sample Proposal Document</strong></span><br /></p>
<p><span class="indent"><a href="#ug_samp_avscript">Using <em>avshot</em></a> - <strong>Creating Audio/Visual (AV) Scripts using <em>avshot</strong></em></span><br /></p>
<p><span class="indent"><a href="#ug_samp_shots">Sample A/V Script</a> - <strong>Sample project that uses <em>avshot</em> to format a script</strong></span><br /></p>
<p><span class="indent"><a href="#ug_samp_film">Sample Treatment</a> - <strong>Sample project for a Film/Video Treatment</strong></span><br /></p>
<p><span class="indent"><a href="#ug_samp_images">Embedding Images</a> - <strong>Sample using <em>avs</em> builtins to document shots in any script</strong></span><br /></p>
<p><a href="#summary">Summary</a> - <strong>So long, and thanks for all the fish</strong><br /></p>
</div>
<div class="extras" style="border-bottom:5px solid green;color:green"><h1>smd - The Script Markdown Processor</h1></div>
<div class="extras"><p>Welcome to the user manual for <strong>smd</strong>, the <strong>Script Markdown</strong> Processor that can take plain text files written in a specialized markdown syntax and turn them into rich HTML documents. This guide will take you through installation and setup of <strong>smd</strong>, and then show you how you can use it to create all sorts of interesting and cool HTML projects. So let's get going!</p></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> The release process should smdparse -f userdocs.md -c -d export so the rendered version of the documentation is part of the repository. This is required because the instructions in the README.md say "open this file with your browser" to read the docs current with the release you are looking at...</p></div>
<a id="ug_setup"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Setting up smd</h2></div>
<div class="extras"><p>There are two approaches to installing <strong>SMD</strong> on your system; either using <strong>pip</strong> or <strong>pipenv</strong>. This chapter will cover both methods, and you can choose which is better for you.</p></div>
<div class="extras"><p><em>Please take note of the following caveats before continuing with the setup process.</em></p></div>
<div class="extras"><p><h5>Minimum Required Python Version</h5></p></div>
<div class="extras"><p class="box">
<strong>smd</strong> requires Python 3.7.3 or later! If you are running an older version, you either have to upgrade or install a virtual environment with something newer in order to run <strong>smd</strong>.
</p></div>
<div class="extras"><p><h5>Tk (tkinter) requirement for ismd</h5></p></div>
<div class="extras"><p class="box">If you will be using <strong>ismd</strong> &lpar;<strong>Interactive Script Markdown</strong>&rpar;, the version of Python you will be using must have been built with <strong><a href="https://tkdocs.com/tutorial/install.html" target="_blank">tkinter</a></strong> &lpar;<strong><a href="https://tkdocs.com/tutorial/install.html" target="_blank">Tk</a></strong>&rpar;. Versions from <a href="https://www.activestate.com/products/python/" target="_blank">ActiveState</a> will have this, but if you use some other version, for example, if you use <strong><a href="https://github.com/pyenv/pyenv#installation" target="_blank">pyenv</a></strong> to manage the version of Python on your system, you must set the compiler flags <em>prior</em> to doing the <a href="https://github.com/pyenv/pyenv#installation" target="_blank">pyenv</a> install.</p></div>
<div class="extras"><p>If you did not have these flags set when you installed Python using <strong><a href="https://github.com/pyenv/pyenv#installation" target="_blank">pyenv</a></strong>, and you want to use <strong>ismd</strong>, you will have to <em>uninstall</em> the current version, and reinstall it (with the environment variables set). Here is a link <a href="https://tkdocs.com/tutorial/install.html" target="_blank">https://tkdocs.com/tutorial/install.html</a> that will provide the information you need to get this done, although take a look at this <a href="https://stackoverflow.com/questions/60469202/unable-to-install-tkinter-with-pyenv-pythons-on-macos" target="_blank">Stackoverflow Question and Answer</a> for the steps needed to solve this issue.</p></div>
<div class="extras"><p>Okay, let's get started.</p></div>
<a id="ug_setup_pip"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Installing with pip</h3></div>
<div class="extras"><p>The easiest way to install <strong>smd</strong> on your system is to use the default package installer for Python or <strong>pip</strong>. From a terminal window on your machine, change to the root directory of your cloned repository and type:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ pip install .</pre></div>
<div class="extras"><p class="note">You can also install <strong>smd</strong> in <em>edit</em> mode (<strong>pip install -e .</strong>). This will point the installation of the <strong>smd</strong> package to the current cloned repository directory instead of copying it to your site-packages installation directory; useful if you plan on making changes and don't want to reinstall each time you make a change.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">To install in edit mode with pip</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
$ pip install -e .
</pre></div>
<div class="extras"><p class="note blue">
HINT: If you change your mind about how <strong>smd</strong> is installed, simply run <span class="bold black italic"><span style="font-size:120%">pip install .</span></span>  or <span class="bold black italic"><span style="font-size:120%">pip install -e .</span></span> to change it. When pip detects that <strong>smd</strong> is already installed on your system, it will uninstall it first, and then install it in whatever mode you specify.
</p></div>
<div class="extras"><p>One drawback to installing <strong>smd</strong> using the <strong>pip install</strong> method is that the package and its dependencies will be installed globally, which could interfere with other packages installed on your system. Also, in order to minimize the number of dependencies that are installed using <strong>pip</strong>, three other packages that are needed by <strong>ismd</strong>, namely <strong>watchdog</strong>, <strong>selenium</strong> and <strong>bottle</strong>, are not automatically installed.</p></div>
<div class="extras"><p>If you will not be using <strong>ismd</strong>, then there is nothing extra required. <strong>smd</strong> and <strong>smdparse</strong> both run without these additional packages. Go ahead and skip down to the <a href="#ug_smd_vs_markdown">smd vs markdown</a> section to continue.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h4>Additional pip install steps if using ismd</h4></div>
<div class="extras"><p>If you will be using <strong>ismd</strong>, then you must either install these packages manually, or alternatively, you can use the <strong>pipenv</strong> method described in the <a href="#ug_setup_pipenv">next section</a>, which <em>will</em> install the extra packages automatically. To install them manually using <strong>pip</strong>, use these commands in your terminal window:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Install additional package dependencies using pip</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
$ pip install selenium
$ pip install bottle
$ pip install watchdog
</pre></div>
<div class="extras"><p>After completing the pip installs for <strong>selenium</strong>, <strong>bottle</strong> and <strong>watchdog</strong>, the last thing you need to configure is a web driver for <strong>selenium</strong> for the browser you will be using. Skip down to <a href="#ug_setup_webdriver">Installing a webdriver for selenium</a> for the details.</p></div>
<a id="ug_setup_pipenv"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Installing with pipenv</h3></div>
<div class="extras"><p><strong><a href="https://docs.python-guide.org/dev/virtualenvs/" target="_blank">pipenv</a></strong> is a much better way to install <strong>smd</strong>. It will create a virtual environment for running <strong>smd</strong> on your machine, preventing installation of the various site-packages in a global manner, the way <strong>pip</strong> does. This, in turn, isolates <strong>smd</strong> to a private environment for use, testing and/or evaluation.</p></div>
<div class="extras"><p class="note">NOTE: If you do not have <a href="https://docs.python-guide.org/dev/virtualenvs/" target="_blank">pipenv</a> installed, navigate to <a href="https://docs.python-guide.org/dev/virtualenvs/" target="_blank">https://docs.python-guide.org/dev/virtualenvs/</a> for information on how to do that.</p></div>
<div class="extras"><p>The <strong>Pipfile</strong> and <strong>Pipfile.lock</strong> files are provided in the root directory of your cloned repository. Simply navigate to that directory on your local machine and type:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ pipenv install</pre></div>
<div class="extras"><p>to create the runtime environment for launching smd on your machine. Once it finishes, type:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Starting ismd after pipenv install</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
$ pipenv shell
&nbsp;
<em># To Launch <strong>ismd</strong> and display help</em>
$ smd -h
&nbsp;
<em># or Launch <strong>smdparse</strong> and display help</em>
$ smdparse - h
&nbsp;
<em># or Launch <strong>ismd</strong> and display help</em>
$ ismd - h
</pre></div>
<div class="extras"><p>This will launch <strong>smd</strong>, <strong>smdparse</strong> and/or <strong>ismd</strong> within the virtual environment that was created. Alternatively, you can use <strong>pipenv run ...</strong> to execute the code inside the virtual environment without starting the <strong>pipenv shell</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Using <em>pipenv run</em> to execute Python code in virtual environment</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em># Launch <strong>ismd</strong></em>
$ pipenv run smd -h
&nbsp;
<em># or Launch <strong>smdparse</strong></em>
$ pipenv run smdparse - h
&nbsp;
<em># or Launch <strong>ismd</strong></em>
$ pipenv run ismd - h
</pre></div>
<div class="extras"><p>By default, <strong>smd</strong> is installed <em>edit</em> mode (<strong>pipenv install -e .</strong>). This points the installation of the <strong>smd</strong> package to the current cloned repository directory instead of copying it to your site-packages installation directory; useful if you plan on making changes and don't want to reinstall each time you make a change.</p></div>
<div class="extras"><p>If you don't want <strong>smd</strong> installed in <em>edit</em> mode, you can ...</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ pipenv uninstall smd</pre></div>
<div class="extras"><p>... followed by ...</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ pipenv install .</pre></div>
<div class="extras"><p>... from the <span style="text-decoration:underline"><strong>root directory of your cloned repository</strong></span> to change how it is installed.</p></div>
<a id="ug_setup_webdriver"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Installing a webdriver for <em>selenium</em></h3></div>
<div class="extras"><p>In order for <strong>selenium</strong> to be able to control your browser, it requires a special driver called a <strong>webdriver</strong>. You can read more about <a href="https://selenium-python.readthedocs.io/" target="_blank">Selenium with Python</a> here, and specifically about <a href="https://selenium-python.readthedocs.io/installation.html#drivers" target="_blank">Selenium drivers</a> here.</p></div>
<div class="extras"><p>Each browser driver should provide any required setup steps on their site. For the most part, however, it's just a matter of copying the driver into the PATH, so that <strong>selenium</strong> can find it. So, navigate to one of the following links and get the driver for your browser.</p></div>
<div class="extras"><p>If you are using Google Chrome, you will need to get the <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank">Chrome Webdriver</a> version.</p></div>
<div class="extras"><p>If you are using Mozilla Firefox, you need to get the <a href="https://github.com/mozilla/geckodriver/releases" target="_blank">Firefox Webdriver</a> version.</p></div>
<div class="extras"><p>If you are using Apple Safari, the driver ships with <strong>macOS</strong>. Navigate to <a href="https://developer.apple.com/documentation/webkit/testing_with_webdriver_in_safari" target="_blank">enabling the Safari Webdriver</a> where you can read about setting up and configuring the Safari driver.</p></div>
<div class="extras"><p class="note">At the time of writing this documentation, the <strong>Safari</strong> webdriver has a feature called the <strong>glass pane</strong> which makes it not very useful for being an <strong>ismd</strong> monitor. I've been unable to figure out a way to disable the glass pane without stopping the automation, which prevents you from interacting with the browser window to do simple things such as scrolling down... DOH! Gee, thanks Apple. Good news though, both Chrome and Firefox work GREAT! So you might want to use one of them instead, at least when using the monitor feature of <strong>ismd</strong>. If and when I find a solution, I will fix the code and update the documentation.</p></div>
<div class="extras"><p>Here are a few notes that might help you get things working if you have never used <strong>selenium</strong> before.</p></div>
<div class="extras"><p>First, on newer versions of <strong>macOS</strong>, the driver may require that you grant it the appropriate rights to run the driver on the platform, depending on whether or not the driver has been notarized. Usually, this can be accomplished by simply running the driver once. For both the <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank">Chrome Webdriver</a> and the <a href="https://github.com/mozilla/geckodriver/releases" target="_blank">Firefox Webdriver</a> versions, I simply ran the executable in a terminal window, and when I got the prompt from <strong>macOS</strong>, I allowed it to run. Fortunately, this is only required one time.</p></div>
<div class="extras"><p>On Safari, you need to:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ safaridriver --enable</pre></div>
<div class="extras"><p>You may also need to <strong>Show Develop Menu</strong>:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/ss_safari_show_develop.png" style="margin-left:auto;margin-right:auto;width:70%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>As well as <strong>Develop | Allow Remote Automation</strong>:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/ss_safari_allow_remote_automation.png" style="margin-left:auto;margin-right:auto;width:70%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>In order to get the <a href="https://developer.apple.com/documentation/webkit/testing_with_webdriver_in_safari" target="_blank">Safari Webdriver</a> to work. And by "<em>to work</em>", I mean "<em>show the first part of your markdown document only</em>". <span style="font-size:2em">&#x1F61C;</span>.</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Using smd with OBS Studio</h3></div>
<div class="extras"><p><strong>smd</strong> can be used to create content (both static and dynamic) for use in <strong>OBS Studio</strong>. You will likely use either <strong>smdparse</strong> to generate a static file, or <strong>ismd</strong> to create an endpoint on the <strong>localhost</strong> that you can use with <strong>OBS Studio</strong>. Let's see how this can be done.</p></div>
<div class="extras"><p class="box"><strong>NOTE:</strong> This section is jumping ahead just a bit, so if it seems confusing, don't worry. It does assume you are familiar with <strong>OBS</strong>, so if that isn't the case, then you may want to skip it for now.<br /><br />In addition, it assumes you have successfully installed and configured <strong>smd</strong> with either <strong>pip</strong> or <strong>pipenv</strong>, as described in the previous sections.</p></div>
<div class="extras"><p>Here is how you can create a dynamic clock overlay for OBS Studio:</p></div>
<a id="ug_setup_use_obs"></a>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Creating content for OBS Studio</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em># If you installed <strong>smd</strong> with <strong>pipenv</strong>, start with:</em>
$ cd &lt;root_of_your_smd_repo&gt;
$ pipenv shell
&nbsp;
<em># Now move to the samples/obs/clock directory</em>
(smd) $ cd samples/obs/clock
&nbsp;
<em># this next command will create the virtual env and run ismd</em>
(smd) $ ismd -nd -f clock.md -m endpoint hostgui
&nbsp;
<em># <strong>ismd</strong> will parse clock.md, create an endpoint, and keep it live until you press <strong>CTRL-C (&#8963;C)</strong></em>
</pre></div>
<div class="extras"><p>Alternatively, if the code is not changing (i.e. you've completed development/debugging), you can simply generate a static local file using <strong>smdparse</strong> and load that inside OBS. Assuming you are in the <strong>samples/obs/clock</strong> directory <strong>AND</strong> you are in a <strong>pipenv</strong> shell if you installed with <strong>pipenv</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lpar;smd&rpar; $ smdparse -nd -f clock.md</pre></div>
<div class="extras" style="border-bottom:2px solid black"><h4>Loading the <em>clock</em> HTML inside OBS</h4></div>
<div class="extras"><p>To access the <strong>clock</strong> sample inside OBS, add a <strong>browser</strong> to a <strong>scene</strong>, and use one of the following URLs (depending on whether you used <strong>ismd</strong> or <strong>smdparse</strong> to create the content):</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">URL syntax for accessing the clock sample</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>If you are running using the <strong>ismd</strong> endpoint then use:</em>
localhost:8080/smd/clock/html/clock.html
&nbsp;
<em>If you used <strong>smdparse</strong> to generate the raw HTML then use:</em>
file://<path_to_your_cloned_smd_repo>/samples/obs/clock/html/clock.html
</pre></div>
<div class="extras"><p>Once again, I realize we jumped ahead a bit with this sample on using <strong>ismd</strong> and <strong>smdparse</strong> since we have yet to cover them, but I figured showing a somewhat more real-world example would help illustrate the kind of things you can do with <strong>smd</strong>! One last thing to cover before we move on is how you can customize the <strong><a href="https://docs.python-guide.org/dev/virtualenvs/" target="_blank">pipenv</a></strong> <strong>Pipfile</strong> to add additional packages you want to use inside your <strong>smd</strong> virtual environment.</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Creating the Pipenv/Pipenv.lock files the first time</h3></div>
<div class="extras"><p>If you want to create your own custom configuration for <strong>pipenv</strong>, you can do that with the following commands:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Creating the Pipfile and Pipfile.lock</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
$ pipenv install selenium
$ pipenv install watchdog
$ pipenv install bottle
$ cd &lt;root_of_smd_cloned_repo&gt;
$ pipenv install -e .
&nbsp;
<em># Now add more <strong>pipenv install</strong> commands for your other packages</em>
</pre></div>
<div class="extras"><p>Technically, you don't need the first four steps above, since the <strong>Pipenv</strong> file already has everything you need for <strong>smd</strong>. You could just <strong>pipenv install</strong> your own packages while sitting in the root directory of your cloned repository, and they will be added to the existing configuration file. Subsequently, whenever you create a new virtual environment using <strong>pipenv install</strong> or <strong>pipenv run</strong>, it will add any additional packages automatically.</p></div>
<a id="ug_smd_vs_markdown"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>smd vs markdown - Repository README.md</h3></div>
<div class="extras"><p>Just below, I will import the README.md from the root directory of this repository. That file uses a more standard markdown syntax, and if you review the rendered output, you will see where certain things do not expand as the syntax is not supported by <strong>smd</strong>. The most obvious are the inline and reference links, although this is a rather simple example, not intended to show all differences between <strong>markdown</strong> and <strong>smd</strong>.</p></div>
<div class="extras" style="margin-left:7em;margin-right:7em;background-color:lightgray;padding:0 1em .5em;font-size:1.3em">
<div class="extras"><h1>smd</h1></div>
<div class="extras"><h3>Script Markdown Processor</h3></div>
<div class="extras">Welcome to the Script Markdown Processor. This document should help you get the project up and running. If you have questions, or would like to provide feedback and/or to report a bug, feel free to contact the author, Ken Lowrie, at [www.kenlowrie.com](http://www.kenlowrie.com/).</div>
<div class="extras"><h4>Attributions</h4></div>
<div class="extras">This project was originally inspired by John Gruber's [Markdown](https://daringfireball.net/projects/markdown/), the [Python Markdown](https://github.com/Python-Markdown/markdown) Project, and Mark Boszko's [AVScriptFormat](https://github.com/bobtiki/AVScriptFormat) BBEdit plug-in. That resulted in [avscript](https://github.com/kenlowrie/avscript), the predecessor to <strong>smd</strong>.</div>
<div class="extras"><h3>Installing this app on your system</h3></div>
<div class="extras">For instructions on how to install this package on your system, refer to the user guide located in the <strong>docs/export</strong> folder of the repository. Open the file <strong>userguide.html</strong> in your browser.</div>
<div class="extras"><h4>Python Version</h4></div>
<div class="extras">SMD requires Python 3.7.3 or later, so if you are running anything older than that, you will either have to upgrade or install a virtual environment with something newer in order to use this package.</div>
<div class="extras"><h3>Why Script Markdown Processor?</h3></div>
<div class="extras">I wanted a way to dynamically create browser content for use in OBS Studio, and this seemed like a good starting point to leverage other code I had. It grew from there...</div>
<div class="extras"><h3>Getting Started with the App</h3></div>
<div class="extras">User documentation is available via the "docs/userdocs.md" file, which can be rendered on the fly using smd, smdparse or ismd. A static version has been exported into the <strong>docs/export</strong> folder for convenience.</div>
<div class="extras"><h3>Summary</h3></div>
<div class="extras">This concludes the <em>README.md</em> for the Script Markdown (smd) Processor Python Package.</div>
</div>
<div class="extras"><p>As you can see, the simple markdown including headings e.g. <strong>&num;</strong>, bold face <strong>&lt;strong&gt;</strong> and italics <strong>&lt;em&gt;</strong> are parsed and render the same with <strong>smd</strong> as they do with standard <strong>markdown</strong>. As you will soon see, however, <strong>smd</strong> will do much, much more.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_cmdline"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>smd command line parameters</h2></div>
<div class="extras"><p>Before diving into the command line parameters of <strong>smd</strong>, <strong>smdparse</strong> and <strong>ismd</strong>, let's establish some context first.</p></div>
<div class="extras"><p class="box">This chapter assumes you have successfully installed <strong>smd</strong> using one of the methods documented in the previous chapter.</p></div>
<div class="extras"><p>We will start by providing an overview of the repository layout, followed by a discussion of the major components, and finally the startup & shutdown processes of the primary command line interfaces. This will establish enough background information about <strong>smd</strong> that the discussion on the command line parameters will make more sense.</p></div>
<a id="ug_cl_repo_layout"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Repository Layout</h3></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">smd repository structure</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
<span style="text-decoration:underline">root</span>
&nbsp;&nbsp;&boxvr;&boxh;&rtrif;&nbsp;debug - Python scripts used for debugging <strong>smd</strong>, <strong>smdparse</strong> and <strong>ismd</strong>
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;debug.py - Python script used for debugging <strong>smd</strong>
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;debug-1.py - Python script used for debugging <strong>smdparse</strong>
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;debug-2.py - Python script used for debugging <strong>ismd</strong><br />&nbsp;&nbsp;&boxv;
&nbsp;&nbsp;&boxvr;&boxh;&rtrif;&nbsp;<span style="text-decoration:underline">docs</span> - user guide, etc.
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;export - a rendered version of the user documentation in HTML format
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;import - imports used by the documentation
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;section - chapters that make up the user documentation
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;userdocs.md - the top level user documentation file
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;<strong>Parsed using <em>smdparse -f userdocs.md -c -d export</em> to create <em>docs/export/userdocs.html</strong></em> <br />&nbsp;&nbsp;&boxv;
&nbsp;&nbsp;&boxvr;&boxh;&rtrif;&nbsp;<span style="text-decoration:underline">samples</span> - example <strong>smd</strong> files
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;<span style="text-decoration:underline">obs</span> - sample OBS Studio files
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;clock - displays an updating digital clock via an OBS Browser link
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;border - displays an opaque border via an OBS Browser link<br />&nbsp;&nbsp;&boxv;
&nbsp;&nbsp;&boxvr;&boxh;&rtrif;&nbsp;<span style="text-decoration:underline">smd</span> - Python [smb.b] package root
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;smd.py - <strong>Script Markdown</strong> command line interface
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;smdparse.py - <strong>Script Markdown Parser</strong> command line interface
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;ismd.py - <strong>Interactive Script Markdown</strong> command line interface
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;core - [smb.b] classes
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;css - default CSS files
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;<span style="text-decoration:underline">import</span> - <strong>smd</strong> built-ins
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;avs - <strong>smd</strong> AV script built-ins
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;def_html.md - default HTML open tags
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;def_head.md - default HEAD open tags
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;def_body.md - default BODY open tags
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;def_bodyclose.md - default BODY closing tags
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;def_close.md - default HTML closing tags
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;<span style="text-decoration:underline">builtins.md</span> - main system builtins file
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;common.md - generic builtins
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;defaults.md - default values used in def_&ast;.md files
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;code.md - @code namespace builtins
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;html.md - @html namespace builtins
&nbsp;&nbsp;&boxv;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;link.md - @link namespace builtins<br />&nbsp;&nbsp;&boxv;
&nbsp;&nbsp;&boxvr;&boxh;&rtrif;&nbsp;src - Miscellaneous Python Source files<br />&nbsp;&nbsp;&boxv;
&nbsp;&nbsp;&boxur;&boxh;&rtrif;&nbsp;<span style="text-decoration:underline">tests</span> - Unit tests for <strong>smd</strong>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;cmdline - Command Line Parameter unit tests
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;in - individual unit test input files
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;out - individual unit test master files (expected output)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;test.py - <strong>smd</strong> unittest command line interface (i.e. unit test runner)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxvr;&rtrif;&nbsp;testdbg.sh - bash script that starts an interactive <strong>smd</strong> session on a unit test
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&boxur;&rtrif;&nbsp;test2dbg.sh - starts an interactive <strong>smd</strong> session with both chrome and hostgui windows
&nbsp;
</pre></div>
<a id="ug_cl_components"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Major components of smd</h3></div>
<div class="extras"><p>The major components of <strong>smd</strong> consist of three (3) command line interfaces.</p></div>
<div class="extras"><ol class="olist">
<li><strong>smd</strong> - The Script Markdown command line interface</li>
<li><strong>smdparse</strong> - The Script Markdown Parser command line interface</li>
<li><strong>ismd</strong> - The Interactive Script Markdown command line interface</ol></li>
</ol></div>
<div class="extras"><p class="box">NOTE: If you used <a href="https://docs.python-guide.org/dev/virtualenvs/" target="_blank">pipenv</a> to install <strong>smd</strong>, be sure to either activate the virtual environment by typing <strong>pipenv shell</strong> or alternatively, type <strong>pipenv run</strong> in front of each <strong>smd</strong> command in the following examples.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h4>smd command line interface</h4></div>
<div class="extras"><p><strong>smd</strong> is the main command line interface, and the one that you can use to experiment with this language. Since you have successfully installed smd, go ahead and try it by entering the following command in a terminal window:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ smd -nd</pre></div>
<div class="extras"><p>At this point, your terminal window is waiting for input. Type <strong>Hello, world</strong> and press the <strong>Return &crarr;</strong> key on your keyboard.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ smd -nd<br />Hello, world&crarr;<br />Hello, world<br />&#8963;D</pre></div>
<div class="extras"><p>When you typed <strong>Hello, world</strong>, the parser simply echoed that input back to you. Congratulations, you have just created your first <strong>smd</strong> document!</p></div>
<div class="extras"><p>To close <strong>smd</strong>, type <strong>CTRL-D (&#8963;D)</strong> (yes, macOS users, that's <strong>CTRL-D</strong> and not <strong>CMD-D (&#8984;D)</strong>). <strong>CTRL-D</strong> will send an EOF signal on the stdin input stream, which will cause <strong>smd</strong> to perform an orderly shutdown.</p></div>
<div class="extras"><p>You can also terminate <strong>smd</strong> by pressing <strong>CTRL-C (&#8963;C)</strong>, however that results in the <strong>SIG-INT</strong> signal being sent, which will cause an unorderly shutdown (i.e. none of the closing tags will be written, etc.)</p></div>
<div class="extras" style="border-bottom:2px solid black"><h4>smdparse command line interface</h4></div>
<div class="extras"><p><strong>smdparse</strong> is a higher level command line interface that sits atop <strong>smd</strong>. It imports the direct smd entry point, so it's using the exact same underlying code to parse your documents, however, it adds several useful options for automation. It also provides the foundation for the final major component, <strong>ismd</strong>.</p></div>
<div class="extras"><p>Let's parse the <strong>samples/hello/hello.md</strong> sample file next using <strong>smdparse</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ cd samples/hello<br />$ smdparse -f hello.md -c<br />$ open html/hello.html</pre></div>
<div class="extras"><p>The <strong>open html/hello.html</strong> command opened the generated <strong>hello.html</strong> file in your default browser so you can review it. Close the browser window when you are done.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h4>ismd command line interface</h4></div>
<div class="extras"><p><strong>ismd</strong> is an <strong>interactive</strong> version of <strong>smd</strong> that provides several different methods for viewing the output from <strong>smd</strong>. What's unique about it is that it monitors <strong>all</strong> of the underlying files that are processed by <strong>smd</strong> for changes, and when it detects a change, it automatically parses the document again, and updates the output monitors.</p></div>
<div class="extras"><p>There are several different monitors currently supported by <strong>ismd</strong>: <strong>chrome</strong> (the default), which displays the output in a Chrome browser window; <strong>firefox</strong> and <strong>safari</strong>, which display the output in Firefox and Safari, respectively; <strong>hostgui</strong>, which displays the raw HTML output in a host window and finally <strong>endpoint</strong>, which creates an HTTP endpoint on the localhost that can be opened by any web browser.</p></div>
<div class="extras"><p class="note">NOTE: The <strong>hostgui</strong> monitor requires that your version of Python was compiled with the <strong>Tk &lpar;tkinter&rpar;</strong> support, and the browser monitors all require an additional webdriver before they will work. Be sure to review the <a href="#ug_setup">Setup Chapter</a> for the required information for using any of the <strong>ismd</strong> monitors.</p></div>
<div class="extras"><p>Let's go ahead and parse the <strong>samples/hello/hello.md</strong> sample file next using <strong>ismd</strong> with the <strong>hostgui</strong> monitor:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">$ cd samples/hello<br />$ ismd -f hello.md -c -m hostgui</pre></div>
<div class="extras"><p>When you execute the <strong>ismd</strong> command, it will parse <strong>hello.md</strong>, then create a <strong>Tk</strong> window where it will display the contents of the parsed file. It will continue to monitor all files that are parsed to generate <strong>hello.md</strong>, and if any of them change, it will parse again and update the <strong>hostgui</strong> window. Experiment with that now, by changing the contents of <strong>hello.md</strong>, and saving it. You should see the window update with the new content each time you make a change and save the document. Here is what it looks like when you first run it:</p></div>
<div class="extras"><p>The terminal window:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/ss_ismd_terminal.png" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>The <strong>hostgui</strong> window:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/ss_ismd_hostgui.png" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>When you are done, be sure to type <strong>CTRL-C</strong> in the terminal window to terminate <strong>ismd</strong>.</p></div>
<div class="extras"><p>Both <strong>smdparse</strong> and <strong>ismd</strong> and their command line options will be covered in more detail later in this chapter.</p></div>
<a id="ug_cl_startup"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>smd startup & shutdown overview</h3></div>
<div class="extras"><p>The following provides a high-level overview of the startup of <strong>smd</strong>. This is the basic flow when no command line parameters are passed to <strong>smd</strong>.</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="source"><code style="font-size:1.4em;font-weight:bold">High level overview of startup</code>
<div class="extras"><ol class="olist">
<li>import builtins.md - which imports several other modules</li>
<ol class="olist-Alpha">
<li>import defaults.md</li>
<li>import common.md</li>
<li>import code.md</li>
<li>import link.md</li>
<li>import html.md</li>
</ol>
<li>import opening body markup</li>
<ol class="olist-Alpha">
<li>import def_html.md</li>
<li>import def_head.md</li>
<li>import def_body.md</li>
</ol>
<div class="extras">
<p style="font-size: .8em;margin:-1.5em;padding:2em;"><em>// command prompt for interactive input unless -f filename or &lt; filename (redirection from shell)</em><br /><em>// &lt;CTRL-D&gt; ends the input <strong>(or EOF if -f filename or &lt; filename (redirection from shell))</strong></em></p>
</div>
<li>import closing body markup</li>
<ol class="olist-Alpha">
<li>import def_bodyclose.md</li>
<li>import def_close.md</li>
</ol>
</ol></div>
</div>
</div>
<div class="extras"><p>By reviewing the startup process, you can see that a number of the built in markdown files are preloaded when <strong>smd</strong> is started (assuming you did not pass any command line switches preventing that behavior). In addition, the default HTML markup files are loaded and dumped to the output stream, before it begins processing your input (either from the keyboard i.e. <strong>stdin</strong>, or from a file if <strong>-f</strong> or shell redirection is used). Once EOF is reached on the input stream, the remaining HTML markup files are read and dumped to the output stream, before it cleans up and performs an orderly shutdown.</p></div>
<div class="extras"><p>Okay, now that we've provided enough context, let's take a look at the command line parameters for each of the major <strong>smd</strong> components.</p></div>
<a id="ug_cl_smd"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>smd command line parameters</h3></div>
<div class="extras"><p>The command line parameters for <strong>smd</strong> are:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">smd command line parameters</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
usage: smd [-h] [-f FILENAME] [-ldb | -ndb] [-lub | -nub] [-nd] [-nohtml] [-nohead] [-nobody]
[-html HTML_NAME] [-head HEAD_NAME] [-body BODY_NAME] [-bodyclose BODYCLOSE_NAME]
[-close CLOSE_NAME] [-nu] [-o [RAW_OUTPUT_FILE]]
&nbsp;
Parse Script Markdown text files into HTML format.
&nbsp;
optional arguments:
-h, --help            show this help message and exit
-f FILENAME, --filename FILENAME - the file that you want to parse. Default is stdin if not specified
-ldb, --load-default-builtins - load default builtins during startup. Default is: True
-ndb, --no-default-builtins - do not load default builtins during startup. Default is: False
-lub, --load-user-builtins - load user builtins during startup. Default is: True
-nub, --no-user-builtins - do not load user builtins during startup. Default is: False
-nd, --no-document-defaults - do not load any document defaults during startup. Default is: False
-nohtml, --no-default-html - do not load default html during startup. Default is: False
-nohead, --no-default-head - do not load default head during startup. Default is: False
-nobody, --no-default-body - do not load default body during startup. Default is: False
-html HTML_NAME, --set-html-name HTML_NAME - set filename of document html markdown. Default is: None
-head HEAD_NAME, --set-head-name HEAD_NAME - set filename of document head markdown. Default is: None
-body BODY_NAME, --set-body-name BODY_NAME - set filename of document body markdown. Default is: None
-bodyclose BODYCLOSE_NAME, --set-bodyclose-name BODYCLOSE_NAME - set filename of document body close markdown. Default is: None
-close CLOSE_NAME, --set-close-name CLOSE_NAME - set filename of document close markdown. Default is: None
-nu, --no-user-files  do not load any files from ~/.smd. Default is: False
-o [RAW_OUTPUT_FILE], --output-raw-data [RAW_OUTPUT_FILE] - write the raw data to output file. Default is: None
&nbsp;
</pre></div>
<a id="ug_cl_smdparse"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>smdparse command line parameters</h3></div>
<div class="extras"><p>The command line parameters for <strong>smdparse</strong> are:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">smdparse command line parameters</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
<strong>smdparse</strong> accepts the same parameters as <strong>smd</strong>, plus these additional parameters:
&nbsp;
usage: smdparse [-h] -f FILENAME [-c [CSSFILELIST [CSSFILELIST ...]]] [-sph HEAD_FILE_NAME] [-i [IMPORTFILELIST [IMPORTFILELIST ...]]] [-d [PATH]] [-dbg]
[-notid] [-ldb | -ndb] [-lub | -nub] [-nd] [-nohtml] [-nohead] [-nobody] [-html HTML_NAME] [-head HEAD_NAME] [-body BODY_NAME]
[-bodyclose BODYCLOSE_NAME] [-close CLOSE_NAME] [-nu] [-o [RAW_OUTPUT_FILE]]
&nbsp;
Generate HTML file from a text file in Script Markdown format.
&nbsp;
optional arguments:
-h, --help show this help message and exit
-f FILENAME, --filename FILENAME the file that you want to parse
-c [CSSFILELIST [CSSFILELIST ...]], --cssfile [CSSFILELIST [CSSFILELIST ...]] the CSS file you want used for the styling. Default is smd.css
-sph HEAD_FILE_NAME, --smdparse-head-name HEAD_FILE_NAME the filename to use for the head HTML markdown. Default is smdparse_head.md
-i [IMPORTFILELIST [IMPORTFILELIST ...]], --import [IMPORTFILELIST [IMPORTFILELIST ...]] list of file(s) to import after builtins.md loaded. Default is None
-d [PATH], --path [PATH] the directory that you want the HTML file written to. Default is ./html
-dbg, --debug display additional debug information. Default is: False
-notid, --no-tid-in-output do not display the thread id in the output messages. Default is: False
&nbsp;
<em>command line options for <strong>smd</strong> ...</em>
&nbsp;
This utility exits after parsing the input file.
&nbsp;
</pre></div>
<a id="ug_cl_ismd"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>ismd command line parameters</h3></div>
<div class="extras"><p><strong>ismd</strong> accepts the same parameters as <strong>smd</strong>, plus these additional parameters:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">ismd command line parameters</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
usage: ismd [-h] -f FILENAME [-c [CSSFILELIST [CSSFILELIST ...]]] [-sph HEAD_FILE_NAME] [-d [PATH]] [-i [IMPORTFILELIST [IMPORTFILELIST ...]]]
[-m MONITOR [MONITOR ...]] [-ldb | -ndb] [-lub | -nub] [-nd] [-nohtml] [-nohead] [-nobody] [-html HTML_NAME] [-head HEAD_NAME] [-body BODY_NAME]
[-bodyclose BODYCLOSE_NAME] [-close CLOSE_NAME] [-nu] [-o [RAW_OUTPUT_FILE]]
&nbsp;
Generate HTML file from a text file in Script Markdown format.
&nbsp;
optional arguments:
-h, --help show this help message and exit
-f FILENAME, --filename FILENAME the file that you want to parse
-c [CSSFILELIST [CSSFILELIST ...]], --cssfile [CSSFILELIST [CSSFILELIST ...]] the CSS file you want used for the styling. Default is smd.css
-sph HEAD_FILE_NAME, --smdparse-head-name HEAD_FILE_NAME the filename to use for the head HTML markdown. Default is smdparse_head.md
-d [PATH], --path [PATH] the directory that you want the HTML file written to. Default is ./html
-i [IMPORTFILELIST [IMPORTFILELIST ...]], --import [IMPORTFILELIST [IMPORTFILELIST ...]] list of file(s) to import after builtins.md loaded. Default is None
-m MONITOR [MONITOR ...], --monitor MONITOR [MONITOR ...] the monitor [browser, hostgui, endpoint] you want used to display changes. Default is browser
&nbsp;
<em>command line options for <strong>smd</strong> ...</em>
&nbsp;
The program monitors changes and keeps window updated until CTRL-C is pressed.
&nbsp;
</pre></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to cmdline-doc.md</h2></div>
<div class="extras">41. Document all the new command line switches (smd, smdparse, ismd and smdlive)</div>
</code>
</pre>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="intro"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Getting Started</h2></div>
<div class="extras"><p>In this chapter, we will discuss the basics of SMD: what it is, and some of the things you can do with it. It's a versatile script parser, that you can use to easily create HTML documents on the fly, and turn them into a static page, or serve them via an endpoint. Let's dive right in.</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h2>What is SMD?</h2></div>
<div class="extras"><p>SMD is a Python command line utility that takes plain text files loosely, <em>oh, so loosely</em>, based on Markdown as input, and generates an HTML document. A CSS file can be used to style the output, making it super easy to customize the final render to your liking.</p></div>
<div class="extras"><p>In the beginning, it started as a utility for generating AV (Audio/Video) style scripts for filmmakers. Essentially:</p></div>
<div class="extras"><p class="note"><strong>Markdown</strong> list item tags <em><strong>&lpar;&ast;, -, +&rpar;</strong></em> were used to identify <em><strong>visuals</strong></em> &lpar;shots&rpar;, and regular paragraphs were the <em><strong>audio/narration</strong></em> that go along with the visuals.</p></div>
<div class="extras"><p>At least that's how it started out. In order to use it effectively, however, you needed to be using BBEDIT, which has built-in support for previewing markdown files, or really anything that uses Python to generate the <strong>&lt;body&gt;</strong> contents of an HTML document. It was also difficult to use because BBEDIT would only refresh the preview window when the primary document was updated, and as the scripts became more complex and modular, making a change in an imported script meant you had to change the primary document in order to see the changes.</p></div>
<div class="extras"><p>It's grown quite a bit since those early days, and while some markdown span elements are still supported, generating AV Scripts is now done using specialized <em><strong>macros</strong></em> that are provided as part of the built-ins that come with SMD. The remainder of this document will provide an in-depth overview of the capabilities of SMD, but you are also encouraged to look thru all of the samples provided to get a better idea of what it can do. This manual, for example, is written using <strong>smd</strong>.</p></div>
<a id="inlinemd"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h2>Inline Markdown</h2></div>
<div class="extras"><p>A few of the standard markdown span elements are supported, as are a couple of specialized span elements. These include (in order of precedence, i.e. the order they are parsed when scanning input lines):</p></div>
<ol>
<li style="font-size:1.3em;margin-left:2em">Variables - These are smd namespace variables accessed with this type of markdown: <strong>&lsqb;variable&rsqb;</strong></li>
<li style="font-size:1.3em;margin-left:2em">Strong - Double &ast;&ast; placed around content will apply the <strong>&lt;strong&gt;</strong> tag: <strong>&ast;&ast;wrap text in double asterisk for bold&ast;&ast;</strong></li>
<li style="font-size:1.3em;margin-left:2em">Emphasis - Single &ast; placed around content will apply the <strong>&lt;em&gt;</strong> tag: <em>&ast;wrap text in single asterisk for emphasis&ast;</em></li>
<li style="font-size:1.3em;margin-left:2em">Insertion - Double &plus; placed around content will apply the <strong>&lt;ins&gt;</strong> tag: <ins>&plus;&plus;wrap text in double plus signs for &lt;ins&gt; tag&plus;&plus;</ins></li>
<li style="font-size:1.3em;margin-left:2em">Deletion - Double &sim; placed around content will apply the <strong>&lt;del&gt;</strong> tag: <del>&sim;&sim;wrap text in double tilde for &lt;del&gt; tag&sim;&sim;</del></li>
</ol>
<div class="extras"><h3>Here are a few examples:</h3></div>
<div class="extras"><p>When I write &ast;text&ast;, it becomes <em>text</em>, and when I write &ast;&ast;text&ast;&ast;, it becomes <strong>text</strong>.</p></div>
<div class="extras"><p>You can stack them too, so that &ast;&ast;&ast;text&ast;&ast;&ast; becomes <em><strong>text</strong></em>.</p></div>
<div class="extras"><p>When you want to wrap text with &lt;ins&gt;, use the double plus (&plus;&plus;), and it will render like this: <ins>Stuff that's been added</ins>.</p></div>
<div class="extras"><p>Similarly, when you want to wrap text with &lt;del&gt;, use the double tilde (&sim;&sim;), and it will render like this: <del>Stuff that's been removed</del>.</p></div>
<div class="extras"><p>So far, this is similar to using regular markdown, so that part, at least, probably isn't new or exciting. When we start mixing in variables, however, things will get much more interesting. We will see that in the chapters that cover the namespaces: <strong>var</strong>, <strong>html</strong>, <strong>link</strong>, <strong>image</strong>, and <strong>code</strong>.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="headings"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Headings</h2></div>
<div class="extras"><p>Just like in standard Markdown, you can use the # symbol at the beginning of a line to designate an HTML <strong>&lt;h1&gt;</strong> element. ## symbols designate an <strong>&lt;h2&gt;</strong> element, and so on, up to ###### for <strong>&lt;h6&gt;</strong>. Here are examples of each.</p></div>
<div class="extras"><h3 class="indent"># Heading h1</h3></div>
<div class="extras"><h3 class="indent">## Heading h2</h3></div>
<div class="extras"><h3 class="indent">### Heading h3</h3></div>
<div class="extras"><h3 class="indent">#### Heading h4</h3></div>
<div class="extras"><h3 class="indent">##### Heading h5</h3></div>
<div class="extras"><h3 class="indent">###### Heading h6</h3></div>
<div class="extras"><p>And this is how they will look in the document when it's formatted:</p></div>
<div class="extras"><h1>Heading h1</h1></div>
<div class="extras"><h2>Heading h2</h2></div>
<div class="extras"><h3>Heading h3</h3></div>
<div class="extras"><h4>Heading h4</h4></div>
<div class="extras"><h5>Heading h5</h5></div>
<div class="extras"><h6>Heading h6</h6></div>
<div class="extras"><p>You may want to style the headers to your liking in the smd.css file.</p></div>
<div class="extras"><p class="note blue">
<span class="important">IMPORTANT! Using the # to create headings <em><strong>requires</strong></em> that the hashtag start in column 1 of the line. If you start it anywhere else, it will be interepreted simply as an inline hashtag.</span>
</p></div>
<div class="extras"><p>For example:</p></div>
<div class="extras"><h1>this works</h1></div>
<div class="extras"><p>But <strong>#this works</strong>, clearly does not work.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_builtins"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>The builtins</h2></div>
<div class="extras"><p>This chapter will cover the builtins that are automatically loaded by <strong>smd</strong> (unless the <em>-ndb</em> and <em>-nub</em> command line switches are specified).</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>File &lsqb;sys.imports/builtins.md&rsqb;</h3></div>
<div class="extras"><p>All of the system provided builtins are located <strong>&lsqb;sys.imports&rsqb;</strong> directory. When <strong>smd</strong> is initializing, just before it loads the default document sections, it will <strong>@import</strong> the file <strong>builtins.md</strong>. If you examine this file, you will see it just imports several other files:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;<strong>sys.imports/builtins.md</strong>&rsqb;</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
@import "[sys.imports]/defaults.md"
@import "[sys.imports]/common.md"
@import "[sys.imports]/code.md"
@import "[sys.imports]/link.md"
@import "[sys.imports]/html.md"

</pre></div>
<div class="extras"><p>Each of these imports, in turn, defines things specific to the namespace they represent. Although they are technically variables, it might be easier to think of them as macros, because when they are encountered while parsing, they expand to something else. In some cases, it's just a direct text replacement, e.g. <strong>&lsqb;E.ast&rsqb;</strong> expands to <strong>&amp;ast;</strong>, but in other cases, they might push several lines of other content, including <strong>smd</strong> commands onto the input stream!</p></div>
<div class="extras"><p>If you directly examine the contents of these files, you will see the things that they define for you to use in your own markdown files. If you examine the contents of the user documentation, you will see how they are used to generate and format HTML content.</p></div>
<div class="extras"><p class="note blue">
Some of the content in these files will look rather foreign at first glance, especially those in <strong>code.md</strong>. However, once you understand the syntax for each of the namespaces, it will become much easier to decipher these system provided builtins.
</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>System vs. User builtins</h3></div>
<div class="extras"><p><strong>smd</strong> supports the concept of both system and user defined builtins. The system builtins are located in the <strong>&lsqb;sys.basepath&rsqb;</strong><strong>/import</strong> directory. User builtins, on the other hand, are located in the <strong>~/.smd/import</strong> directory. On Linux based operating systems (of which macOS is a derivative), the tilde &sim; character refers to the base of the currently logged in user directory: <strong>/Users/&lt;username&gt;</strong>.</p></div>
<div class="extras"><p>Whenever the system is ready to load the builtins, it will look in both places for a file named <strong>builtins.md</strong>. It looks in the system directory first, and once finished processing those, it then looks in the user directory (if it exists). This allows you to <strong>override</strong> the system defaults with your own declarations.</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>The <em>sys</em> builtin</h3></div>
<div class="extras"><p>There is a special built-in in the @var namespace named <em>sys</em> that contains several attributes that are useful in your markdown files.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@var sys default attributes</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>basepath=</em>The location of the <strong>smd</strong> package. This directory is where <strong>smd</strong>, <strong>smdparse</strong> & <strong>ismd</strong> are stored.
<em>imports=</em>The location of the import directory. This directory is located here: <strong>&lsqb;sys.basepath&rsqb;</strong><strong>/import</strong>
<em>root=</em>The root of the <strong>smd</strong> installation. This directory is located here: <strong>&lsqb;sys.basepath&rsqb;</strong><strong>/..</strong>
<em>user_basepath=</em>The location of the user smd directory for the currently logged in user.
<em>user_imports=</em>The location of the user smd import directory for the currently logged in user.
<em>user_root=</em>The home directory for the currently logged in user.
</pre></div>
<div class="extras"><p>The most commonly used of the sys attributes is <em>imports</em>. Every time you want to load one of the system defined import files you will reference it. For example, <strong>@import "&lsqb;sys.imports&rsqb;/divs.md"</strong> would import the <em>divs.md</em> markdown script.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_helpers"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2><strong>helpers.md</strong> built-ins</h2></div>
<div class="extras"><p><strong>helpers.md</strong> contains a set of built-ins that declare a set of commonly used tags, constants and other useful things to help with creating content.</p></div>
<div class="extras"><p class="note red">This chapter might get into some information that seems a bit complex because we haven't discussed the namespaces yet. You can either skip ahead and read up on namespaces first, then come back, or just follow along as best you can, and when you get to namespaces, it will probabnly seem like old hat by then.</p></div>
<div class="extras"><p>Let's start by taking a look at what's contained in <strong>helpers.md</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Contents of helpers.md builtins</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
@import "$/html.md"
@import "$/code.md"
@import "$/divs.md"
@html _="tab" _inherit="span" class="indent"
@var _="tab2" o="[tab.&lt;][tab.&lt;]" c="[tab.&gt;][tab.&gt;]" o3="[tab.&lt;][tab.&lt;][tab.&lt;]"  c3="[tab.&gt;][tab.&gt;][tab.&gt;]"
@html _="us" _inherit="span" style="text-decoration:underline"
@html _="spanwc" _inherit="span" class="blue"
@html _="divx" _inherit="_div_extras_"
@html _="divx1" _inherit="divx" style="border-bottom:5px solid green;color:green"
@html _="divx2" _inherit="divx" style="border-bottom:3px solid black;color:green"
@html _="divx3" _inherit="divx" style="border-bottom:2px solid black"
@html _="li2" _tag="li" _inherit="li" style="font-size:1.3em;margin-left:2em"

@var e_us="{{html.us.&lt;}}{{self.t}}{{html.us.&gt;}}" t="{{self._help}}" _help="*{{self._}}(t=\"text_to_underscore\")*"
@var hash1="# [code.repeat.run(t=\"-\", c=\"42\")]"
@var hash2="## [code.repeat.run(t=\"-\", c=\"42\")]"
@var hash3="### [code.repeat.run(t=\"-\", c=\"42\")]"
@var wrap_h="{{code.pushlines(t=\"@wrap html.divx\n{{self.t}}\n@parw 1\")}}"\
    hash1="{{code.pushlines(t=\"@wrap html.divx\n{{var.hash1}}\n@parw 1\")}}"\
    hash2="{{code.pushlines(t=\"@wrap html.divx\n{{var.hash2}}\n@parw 1\")}}"\
    hash3="{{code.pushlines(t=\"@wrap html.divx\n{{var.hash3}}\n@parw 1\")}}"\
    chapter="{{code.pushlines(t=\"@wrap html.divx1\n{{self.t}}\n@parw 1\")}}"\
    section="{{code.pushlines(t=\"@wrap html.divx2\n{{self.t}}\n@parw 1\")}}"\
    subsect="{{code.pushlines(t=\"@wrap html.divx3\n{{self.t}}\n@parw 1\")}}"

// Make a couple of specialized Simple DIV **note** types where the font color is blue or red
@html _="_bluenote_p_" _inherit="_note_p_" class="[html._note_p_.class] blue"
@html _="_rednote_p_" _inherit="_note_p_" class="[html._note_p_.class] red"
// create var.bluenote, inherit note attributes, and then just change the p class in the _inline attrs
@var _="bluenote" _inherit="note"
[code.attr_replace_str(s_str="_note_p_" r_str="_bluenote_p_" attr="var.bluenote.inline_nd")]
[code.attr_replace_str(s_str="_note_p_" r_str="_bluenote_p_" attr="var.bluenote.wc_open_inline_nd")]
@var _="rednote" _inherit="note"
[code.attr_replace_str(s_str="_note_p_" r_str="_rednote_p_" attr="var.rednote.inline_nd")]
[code.attr_replace_str(s_str="_note_p_" r_str="_rednote_p_" attr="var.rednote.wc_open_inline_nd")]

@html _="bigmargin" _tag="div" style="margin-left:3.3em;margin-right:3.3em" _open="@@{{self.&lt;}}" _close="@@{{self.&gt;}}"

@html _="bmgreybg" _inherit="bigmargin" style="[html.bigmargin.style];border:2px solid black;background:lightgray"


</pre></div>
<div class="extras"><p>It starts by importing the files that contain things that are being extended or are used to create the macros it is declaring. In most cases, these would already be imported, so they are ignored, but in the rare case where they haven't been, it will prevent a bunch of errors when it tries to parse the contents of this file.</p></div>
<div class="extras"><p>A few useful <strong>&#64;html</strong> variables are created, including <strong>tab</strong> and <strong>us</strong>. <strong>tab</strong> just indents content by wrapping it with a <strong>&lt;span&gt;</strong> tag, and <strong>us</strong> can be used to <span style="text-decoration:underline">underline</span> content inline. It would be a little clumbsy to write <strong>&lsqb;html.us.<&rsqb;</strong><span style="text-decoration:underline">underline</span><strong>&lsqb;html.us.>&rsqb;</strong>, so a little later on the variable <strong>e_us</strong> is created, that makes it easier.</p></div>
<div class="extras"><p>The <strong>wrap_h</strong> variable contains several useful attributes to simply creating headings. They are:</p></div>
<div class="extras"><ul class="ulist-plain">
<li>hash1 - create &lt;h1&gt; header of dashes</li>
<li>hash2 - create &lt;h2&gt; header of dashes</li>
<li>hash3 - create &lt;h3&gt; header of dashes</li>
<li>chapter - create a chapter heading with a thick green bottom border</li>
<li>section - create a section heading with a smaller green bottom border</li>
<li>subsect - create a sub-section heading with a thin black bottom border</li>
</ul></div>
<div class="extras"><p>These are used throughout the user manual to create the headings you see in the documentation. For example, if I write <strong>&lsqb;wrap_h.hash3&rsqb;</strong>, the parser will emit (and your browser will render):</p></div>
<div class="extras"><h3>------------------------------------------</h3></div>
<div class="extras"><p>If instead I write <strong>&lsqb;wrap_h.subsect&lpar;t="###E and EMOJI"&rpar;&rsqb;</strong>, this is what I get:</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>E and EMOJI</h3></div>
<div class="extras"><p><strong>E</strong> and <strong>EMOJI</strong> create namespace wrappers for commonly used HTML Entities and Emojis. Another helper builtin, <strong>e_moji</strong>, makes it easy to create two different sizes of emojis. For example, <strong>&lsqb;e_moji&lpar;e="mask"&rpar;&rsqb;</strong> emits <span style="font-size:1em">&#x1F637;</span>, and <strong>&lsqb;e_moji.big&lpar;e="mask"&rpar;&rsqb;</strong> emits <span style="font-size:2em">&#x1F637;</span>.</p></div>
<div class="extras"><p>The variables <strong>e_tag</strong> and <strong>e_var</strong> are used quite a bit in the documentation to encode the entities and markdown so that it can be shown inline instead of having either the parser or the browser process it.</p></div>
<div class="extras"><p>Finally, a commonly used trick of extending an underlying macro is used to create two custom versions of the <strong>note</strong> <strong>&lt;div&gt;</strong>, <strong>bluenote</strong> and <strong>rednote</strong>. This is done by creating a new variable using the <em>color</em>note name, inheriting from the underlying <strong>note</strong> variable, and then one of the attributes within that variable is modified to use the newly created color class in the <strong>&#64;html</strong> namespace. Let's use all three of them (note, bluenote and rednote) to see how they render:</p></div>
<div class="extras"><p class="note">This is my inline note using the default <strong>note</strong> builtin.</p></div>
<div class="extras"><p class="note blue">This is my inline note using the <strong>bluenote</strong> builtin created in helpers.md.</p></div>
<div class="extras"><p class="note red">This is my inline note using the <strong>rednote</strong> builtin created in helpers.md.</p></div>
<div class="extras"><p>Taking an underlying builtin and just <strong>tweaking</strong> it makes it easy to extend the builtins, without having to spend a lot of time recreating the wheel so to speak... <span style="font-size:2em">&#x1F61C;</span></p></div>
<div class="extras"><p>The last things (at the time of writing this chapter) are the <strong>bigmargin</strong> and <strong>bmgreybg</strong> <strong>&#64;html</strong> variables that are also used in the documentation to render content with bigger than the default margins. They can both be nested, which makes it easy to do things like this:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p><em>Here is some content with 3.3em right and left margins. See how it's been indented on the left?</em></p></div>
</div>
<div class="extras"><p>Now let's nest them:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p><em>Here is some content with 3.3em right and left margins. Now it's got double margins or 6.6em.</em></p></div>
</div>
</div>
<div class="extras"><p>Let's try the <strong>bmgreybg</strong> with the same thing:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><em>Here is some content with 3.3em right and left margins. See how it's been indented on the left?</em></p></div>
</div>
<div class="extras"><p>Now let's nest them:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p>&nbsp;</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><em>Here is some content with 3.3em right and left margins. Now it's got double margins or 6.6em.</em></p></div>
</div>
<div class="extras"><p>&nbsp;</p></div>
</div>
<div class="extras"><p>That's kind of interesting with the double boxes. Let's use the <strong>bigmargin</strong> first, then the <strong>bmgreybg</strong> inside:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p>&nbsp;</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><em>Here is some content with 3.3em right and left margins. Now it's got double margins or 6.6em.</em></p></div>
</div>
<div class="extras"><p>&nbsp;</p></div>
</div>
<div class="extras"><p>Now let's use the <strong>bluenote</strong> to render the middle text and <strong>bigmargin</strong> for the two nests:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p class="note blue">Here is some <strong>blue</strong> content with 3.3em right and left margins. Now it's got double margins or 6.6em.</p></div>
</div>
</div>
<div class="extras"><p>Anyway, I think you get the point. There's a lot you can do with the markdown and building custom variables or macros or whatever you want to call them. Let's move on.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_namespaces"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Namespaces</h2></div>
<div class="extras"><p>In <strong>smd</strong>, one of the primary types of markdown (specially formatted text) that you can use is the <strong>variable</strong>. There are several types of variables that are supported, and they are referred to as namespaces within <strong>smd</strong>. They are:</p></div>
<div class="extras"><ul class="ulist">
<li><strong>&#64;var</strong> - The primary namespace for creating variables</li>
<li><strong>&#64;html</strong> - A namespace for creating HTML tags</li>
<li><strong>&#64;link</strong> - A namespace built on @html, used for creating hyperlinks and anchors (bookmarks)</li>
<li><strong>&#64;image</strong> - A specialized namespace specifically for creating HTML Image <strong>&lt;img&gt;</strong> elements</li>
<li><strong>&#64;code</strong> - A specialized namespace for creating complex macros (written in Python)</li>
</ul></div>
<a id="ug_ns_builtin_help"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Built in Help</h3></div>
<div class="extras"><p>There are a few things we need to cover which apply to all namespaces, and in most cases, the chapters are organized so that if you maintain the order, the concepts will be introduced as you go. However, all namespaces support the concept of built-in help, which is an optional attribute named <strong>_help</strong> that can be added to any variable (either at declaration time or later on via <strong>&#64;set</strong>). I want to cover this topic first, since accessing the builtin help, especially for some of the more advanced builtins, will likely be crucial to you learning how to effectively use <strong>smd</strong>. Let's see how it works.</p></div>
<div class="extras"><p class="note">Because we haven't yet discussed any of the namespaces, this might seem a little out of place, so feel free to jump ahead to the <strong>&#64;var</strong> namespace chapter, and then return here afterwards. Otherwise, stick with us, it's short, and should assist with understanding of how things work in any of the namespaces.</p></div>
<div class="extras"><p>Take the following markdown which declares a variable <strong>var1</strong>, which takes a parameter <strong>p</strong> and wraps it with <strong>&lt;em&gt;</strong> and <strong>&lt;strong&gt;</strong> tags. It looks like this:</p></div>
<div class="extras"><p><span class="indent">&#64;var var1="&ast;&ast;&ast;{{self.p}}&ast;&ast;&ast;" p="sample text"</span></p></div>
<div class="extras"><p>Once declared, we can write markdown as follows to place the <em>em</em> and <strong>strong</strong> tags around text: <strong>&lsqb;var1(p="my important text")&rsqb;</strong>. And it would render like this:</p></div>
<div class="extras"><p><span class="indent"><em><strong>my important text</strong></em></span></p></div>
<div class="extras"><p>Now that's all good (and rather simple), but down the road, when I'm trying to remember how to use it, I don't want to have to track down the file where it is declared to examine it, or even dump the variable definition to decode it's usage. Enter the <strong>_help</strong> attribute. If we add _help to our previous declaration like so:</p></div>
<div class="extras"><p><span class="indent">&#64;var var1="&ast;&ast;&ast;{{self.p}}&ast;&ast;&ast;" p="sample text" _help="Usage: {{self._}}(p=\"text to wrap with &ast;&ast;&ast;\")"</span></p></div>
<div class="extras"><p>Then, when I want to use it, I can type <strong>&lsqb;var1.?&rsqb;</strong>, and it will generate this:</p></div>
<div class="extras"><p><span class="indent">Usage: var1(p="text to wrap with &ast;&ast;&ast;")</span></p></div>
<div class="extras"><p>You can also use the <strong>_help</strong> attribute directly and achieve the same result, but the <strong>?</strong> is shorter and easier to type! So what about the <strong>??</strong> variant? How does that fit in?</p></div>
<div class="extras"><p><em><strong>??</strong></em> is a specialized version of the retrieve help attribute that strips most of the HTML markup that is embedded in the help string, making it easy to read when you are running <strong>smd</strong> interactively i.e. <em>smd -nd</em>. If I use it in a document that is used to generate HTML, it won't look that good. For example, if I type <strong>&lsqb;var1.??&rsqb;</strong>, it will generate this:</p></div>
<div class="extras"><p><span class="indent">Usage: var1(p="text to wrap with <em>*</em>")</span></p></div>
<div class="extras"><p>In this case, it doesn't look too bad, only causing the three inline astericks &ast;&ast;&ast; to render as one red and one black, but let's see how dumping the help string for something more complex looks, and it'll be more obvious. Take the built-in macro <strong>code.get_value</strong>. If I type <strong>&lsqb;code.get_value.?&rsqb;</strong>, it will display this:</p></div>
<div class="section"><p class="divTitle">Results of code.get_value.?</p>
<p>&nbsp;&nbsp;<em>get_value(v="variable_name" ret_type="0|1|2|3|9" escape="True|False" esc_smd="True|False")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>v</strong> - variable / attribute name to get<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>ret_type</strong> - how to emit the value (0, 1, 2, 3 or 9)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>0</strong> - will return the value raw i.e. not marked down<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>1</strong> - will return the value with the initial markdown pass, but without handling delayed expansion<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>2</strong> - will return the after replacing [ with [ and ] with ]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>3</strong> - will return the after replacing <strong>code.get_value.</strong> with <strong>ns.varname.</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>9</strong> - will return the marked down value (default)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>escape</strong> - True to escape the HTML, False otherwise (default)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>esc_smd</strong> - True to escape the SMD, False otherwise (default)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Emits the value of the variable / attribute <strong>v</strong></p>
</div>
<div class="extras"><p>and then if I type <strong>&lsqb;code.get_value.??&rsqb;</strong>, I get this:</p></div>
<div class="section"><p class="divTitle">Results of code.get_value.??</p>
<p>get_value(v="variable_name" ret_type="0|1|2|3|9" escape="True|False" esc_smd="True|False")

    v - variable / attribute name to get

    ret_type - how to emit the value (0, 1, 2, 3 or 9)
      0 - will return the value raw i.e. not marked down
      1 - will return the value with the initial markdown pass, but without handling delayed expansion
      2 - will return the after replacing [ with [ and ] with ]
      3 - will return the after replacing code.get_value. with ns.varname.
      9 - will return the marked down value (default)

    escape - True to escape the HTML, False otherwise (default)

    esc_smd - True to escape the SMD, False otherwise (default)

    Emits the value of the variable / attribute v</p>
</div>
<div class="extras"><p>So obviously, if you are expecting the content to be readable inside an HTML document, you want the first option. However, if you start <strong>smd</strong> interactively, and type the same two things, you will see the the <strong>.?</strong> version has all sorts of HTML tags embedded making it hard to read in the text console, but <strong>.??</strong> is nice and simple and easy to read. Here's a screen shot to prove it:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/ss_builtin_help.png" style="[IMG_STYLE.inline_border}]"/></p></div>
<div class="extras"><p>That should give you enough to use the built-in help system while you are learning <strong>smd</strong>. In the chapters that follow, we will take an indepth look at each namespace to learn it's specific syntax and semantics. With that, let's move right into the chapter on the <strong>&#64;var</strong> namespace.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_ns_var"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>The &#64;var Namespace</h2></div>
<div class="extras"><p>The &#64;var keyword is used to construct a more flexible type of variable for your documents. These variables are stored in the <strong>&#64;var</strong> namespace, and can have names that are identical to variables in other namespaces, although it is normally recommended that you avoid doing that.</p></div>
<div class="extras"><p>We will discuss this namespace first, because it is the basis for all namespaces, and most of the features, syntax and semantics apply to the others. Given that, it is a great starting point for our discussion on creating variables for use in <strong>smd</strong> documents.</p></div>
<a id="ug_var_syntax"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;var Syntax</h3></div>
<div class="syntax"><p class="divTitle">&#64;var command syntax</p>
<p><br /></p>
<p><span class="indent"><strong>&#64;var</strong> <strong>name="value" &lsqb; attr="value" &lsqb;...]&nbsp;]</strong><br /><br /></span></p>
<p><span class="indent"><strong>&#64;var</strong> <strong>_id="name" &lsqb;_format="value" &lsqb;...&rsqb;&nbsp;]</strong><br /><br /></span></p>
<p><span class="red"><span class="indent"><span class="indent">NOTE: either underscore &apos;<strong>_</strong>&apos; or &apos;<strong>_id</strong>&apos; can be used to name the variable.</span></span></span></p>
</div>
<div class="extras"><p><strong>&#64;var</strong> variables are the only ones that can use the shorthand <strong>name="value"</strong> notation when defining a variable. All the other namespaces require that the <strong>&lsqb;<em>_</em> or <em>_id</em>&rsqb;</strong> special attribute name be used to specify the variable name.  Note that when the shorthand notation is used, it is the first <strong>name="value"</strong> pair that will be used to name the variable. Each of the following examples does exactly the same thing:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declaring a variable</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;var fu="bar"
&#64;var _="fu" _format="bar"
&#64;var _id="fu" _format="bar"
</pre></div>
<div class="extras"><p>Essentially, declaring a variable in <em>any</em> of the namespaces is done in exactly this fashion. <em><strong>@ns</strong></em> followed by a series of attribute="value" pairs. Remember, only <strong>&#64;var</strong> allows the shorthand <strong>fu="bar"</strong> format for naming the variable and setting the <strong>_format</strong> attribute value. All other namespaces require the alternate format. In addition, namespaces based on <strong>&#64;html</strong> and <strong>&#64;code</strong> normally do not specify <strong>_format</strong>, since that attribute is constructed on the fly during the declaration (<strong>&#64;html</strong>) or is not used (<strong>&#64;code</strong>). More on that later.</p></div>
<div class="extras"><p class="note">
NOTE: If you redeclare a variable, it will be overwritten with the new declaration. If you want to add attributes to an existing variable, use <strong>&#64;set</strong>
</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declaring variables in other namespaces</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;var _id="fu" _format="bar"
&#64;html _id="fu"
&#64;link _id="fu"
</pre></div>
<div class="extras"><p>Notice that in the <strong>&#64;html</strong> and <strong>&#64;link</strong> declarations we didn't specify the _format attribute. You'll see why when we get to the chapters on those namespaces, but for now, just realize that if you did specify the _format="bar" on those, then they would result in the exact same behavior as the &#64;var variable. That is, when you write <strong>&lsqb;var.fu&rsqb;</strong>, <strong>&lsqb;html.fu&rsqb;</strong>, <strong>&lsqb;link.fu&rsqb;</strong> in your markdown document, each would simply emit <strong>bar</strong>. Let's try that now.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Using _format on &#64;html and &#64;link</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// declare &apos;fu&apos; in &#64;var, &#64;html & &#64;link</em>
&#64;var _id="fu" _format="bar"
&#64;html _id="fu" _format="bar"
&#64;link _id="fu" _format="bar"
&nbsp;
<em>// now print each one</em>
&lsqb;var.fu&rsqb; emits <em>bar</em>
&lsqb;html.fu&rsqb; emits <em>bar</em>
&lsqb;link.fu&rsqb; emits <em>bar</em>
&nbsp;
<em>// Redefine html.fu and link.fu</em>
&#64;html _id="fu"
&#64;link _id="fu"
&nbsp;
<em>// now print each one</em>
&lsqb;var.fu&rsqb; emits <em>bar</em>
&lsqb;html.fu&rsqb; emits <em>&lt;fu&gt;&lt;/fu&gt;</em>
&lsqb;link.fu&rsqb; emits <em>&lt;a&gt;&lt;/a&gt;</em>
</pre></div>
<div class="extras"><p>The reason that <strong>&lsqb;html.fu&rsqb;</strong> emits <em>&lt;fu&gt;&lt;/fu&gt;</em> will be explained in the <strong>&#64;html</strong> chapter on variable declarations. For now, just go with it. <span style="font-size:2em">&#x1F61C;</span></p></div>
<div class="extras"><p>One other caveat to the shorthand notation: if you specify also specify the <strong>_format= attribute</strong>, whatever you attempt to assign as part of the declaration will be ignored, and the value specified with _format will win. For example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Using shorthand notation and specifiying _format</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;var fu="bar" _format="123"
&nbsp;
Then &lsqb;fu&rsqb; will emit <strong>123</strong> instead of <em>bar</em>
</pre></div>
<div class="extras"><p>If you fail to specify the <strong>_format</strong> attribute when you declare an <strong>&#64;var</strong> variable, and you do not use the short-hand notation to create it, then referencing the variable will result in all attributes being dumped. Let's see how that works. Take the following markdown:</p></div>
<div class="extras"><p><span class="indent">&#64;var _="myvar" attr1="value1" attr2="value2"</span></p></div>
<div class="extras"><p>Then, if we write <strong>&lsqb;myvar&rsqb;</strong> the parser will emit:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p>attr1="value1"<br />
 attr2="value2"<br /></p></div>
</div>
<div class="extras"><p>There isn't much usefulness in this side affect since there is no way to control the formatting, however, you may find it handy as a way of checking the current definition of a variable without having to dump it. i.e. <strong>&lsqb;myvar&rsqb;</strong> is shorter than <strong>&lsqb;code.dump(ns="var" name="myvar")&rsqb;</strong> or even <strong>&#64;dump var="^myvar$"</strong>.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Inheriting attributes</h3></div>
<div class="extras"><p>One last concept to discuss about declaring variables is the attribute <strong>_inherit</strong>. This attribute can be used at declaration time only, and it's purpose is to avoid having to redefine common attributes. This is used throughout the builtin files that come with <strong>smd</strong>, so you'll see it used quite often. Let's look at an example of how it is used.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Using _inherit to streamline declarations</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// declare &apos;smdtag&apos; variable</em>
<strong>&#64;var</strong> smdtag="@@&lcub;&lcub;&#x73;elf.il&rcub;&rcub;" il="&lcub;&lcub;encode_smd&lpar;t=\"&lcub;&lcub;&#x73;elf.il&rcub;&rcub;\"&rpar;&rcub;&rcub;" b="&ast;&ast;&lcub;&lcub;&#x73;elf.il&rcub;&rcub;&ast;&ast;" em="&ast;&lcub;&lcub;&#x73;elf.il&rcub;&rcub;&ast;" emb="&ast;&ast;&ast;&lcub;&lcub;&#x73;elf.il&rcub;&rcub;&ast;&ast;&ast;"
&nbsp;
<em>// now declare several variables based on <strong>smdtag</strong></em>
&#64;var _id="smdvar" _inherit="smdtag" p="&#64;var"
&#64;var _id="smdhtml" _inherit="smdtag" p="&#64;html"
&#64;var _id="smdlink" _inherit="smdtag" p="&#64;link"
&nbsp;
<em>// now we have three new variables that all contain similar attributes</em>
&lsqb;smdvar&rsqb; = &#64;var, &lsqb;smdvar.b&rsqb; = <strong>&#64;var</strong>, &lsqb;smdvar.em&rsqb; = <em>&#64;var</em>, &lsqb;smdvar.emb&rsqb; = <em><strong>&#64;var</strong></em>
&lsqb;smdhtml&rsqb; = &#64;html, &lsqb;smdhtml.b&rsqb; = <strong>&#64;html</strong>, &lsqb;smdhtml.em&rsqb; = <em>&#64;html</em>, &lsqb;smdhtml.emb&rsqb; = <em><strong>&#64;html</strong></em>
&lsqb;smdlink&rsqb; = &#64;link, &lsqb;smdlink.b&rsqb; = <strong>&#64;link</strong>, &lsqb;smdlink.em&rsqb; = <em>&#64;link</em>, &lsqb;smdlink.emb&rsqb; = <em><strong>&#64;link</strong></em>
</pre></div>
<div class="extras"><p>If you specify an attribute that is defined in the underlying inherited variable, it will override the underlying value. Otherwise, the new variable will contain all of the same attributes, plus any new ones added at the time of declaration (or later using <strong>&#64;set</strong>).</p></div>
<a id="ug_var_names"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;var Variable names</h3></div>
<div class="extras"><p>Variable names in the <strong>&#64;var</strong> namespace, well actually, in <strong>any</strong> namespace are restricted to these requirements:</p></div>
<div class="extras"><ul class="ulist">
<li>Must begin with a letter or the underscore character</li>
<li>Must contain only letters, numbers or underscores</li>
<li>Are case sensitive. That is, abc and ABC are different variable names</li>
</ul></div>
<div class="extras"><p>Here are some examples of variable names:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><table style="margin-left:auto;margin-right:auto">
<tr><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Variable Name</td><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Valid / Invalid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">a</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">a1</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">a_1</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">_a1</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">A</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">1a</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><span class="red">invalid</span></td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">a-b</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><span class="red">invalid</span></td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">1+</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><span class="red">invalid</span></td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">%a</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><span class="red">invalid</span></td></tr>
</table></div>
</div>
<div class="extras"><p>Attribute names, on the other hand, are restricted to these requirements:</p></div>
<div class="extras"><ul class="ulist">
<li>Must contain only letters, numbers, underscores or dashes</li>
<li>Are case sensitive. That is, abc and ABC are different variable names</li>
</ul></div>
<div class="extras"><p>Here are some examples of attribute names:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><table style="margin-left:auto;margin-right:auto">
<tr><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Attribute Name</td><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Valid / Invalid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">a</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">a1</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">a_1</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">_a1</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">A</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">1a</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">a-b</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">valid</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">1+</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><span class="red">invalid</span></td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">%a</td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><span class="red">invalid</span></td></tr>
</table></div>
</div>
<div class="extras"><p>As you can see, attribute names are not quite as restrictive in their naming as variable names, allowing dashes to be used, and also allowing names to begin with numbers.</p></div>
<a id="ug_var_attrs"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;var Built-in Attributes</h3></div>
<div class="extras"><p><strong>&#64;var</strong> variables have a number of built-in attributes to extract common components. In fact, all namespaces share these built-in attributes, and in the case of variables based on the <strong>&#64;html</strong> namespace, they are relied on much more, but nonetheless, they can be useful in any of the namespaces, if for no other reason to assist in debugging complex declarations.</p></div>
<div class="extras"><p>Here is the full list of built-in attributes supported across all namespaces:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><table style="margin-left:auto;margin-right:auto">
<tr><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Attribute Name</td><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Description</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The name of the variable</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_id</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The name of the variable</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>?</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Returns <strong>_help</strong> if present otherwise <strong>No help available</strong></td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>??</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Same as <em>?</em>, but strips most HTML tags. Useful when running <strong>smd</strong> interactively.</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_private_attrs_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">All of the private attributes &lpar;those that begin with underscore &apos;_&apos;&rpar;</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_public_attrs_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">All of the public attributes &lpar;those that do not begin with underscore&rpar;</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_private_attrs_esc_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Same as private attributes, but quotes are escaped.</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_public_attrs_esc_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Same as public attributes, but quotes are escaped.</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_public_keys_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The public attribute names</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_private_keys_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The private attribute names</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_all_attrs_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">All attributes</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_all_attrs_esc_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Same as all attributes, but quotes are escaped.</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_null_</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">A null attribute - emits nothing, used to set default values of any public/private attribute</td></tr>
</table></div>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Examples</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&lsqb;var.fu._&rsqb;</strong> <em>=</em> fu
<strong>&lsqb;var.fu._id&rsqb;</strong> <em>=</em> fu
<strong>&lsqb;var.fu._all_attrs_&rsqb;</strong> <em>=</em> _format="123"
<strong>&lsqb;var.fu._private_keys_&rsqb;</strong> <em>=</em>_format,
<strong>&lsqb;var.fu.?&rsqb;</strong> <em>=</em><em>No help available</em>
&nbsp;
<strong>&lsqb;html.divx._all_attrs_&rsqb;</strong> <em>=</em> _format="&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;" _tag="div" class="extras"
<strong>&lsqb;html.divx._private_attrs_&rsqb;</strong> <em>=</em> _format="&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;" _tag="div"
<strong>&lsqb;html.divx._public_attrs_&rsqb;</strong> <em>=</em> class="extras"
</pre></div>
<a id="ug_var_misc"></a>
<div class="extras" style="border-bottom:2px solid black"><h4>&#64;var Miscellaneous Examples</h4></div>
<div class="extras"><p>Here are just a few more examples to help drive home your understanding of the declaration and usage of variables in the <strong>&#64;var</strong> namespace.</p></div>
<div class="extras"><p>Consider the following markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;var _id="varname" attr1="value1" _format="format string"</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&lsqb;varname.attr1&rsqb;</strong> will emit <em><strong>value1</strong></em>.
<strong>&lsqb;varname._id&rsqb;</strong> will emit <em><strong>varname</strong></em>.
<strong>&lsqb;varname._format&rsqb;</strong> will emit <em><strong>format string</strong></em>.
</pre></div>
<div class="extras"><p>So that's pretty cool, but there's a bit more to the _format attribute. You can reference the attributes contained within the variable by using <strong>{{self}}.attrname</strong>. Given that, if we write the following:</p></div>
<div class="extras"><p><span class="indent"><strong>&#64;var _id="fullname" first="ken" last="lowrie" _format="&lcub;&lcub;&#x73;elf.first&rcub;&rcub; &lcub;&lcub;&#x73;elf.last&rcub;&rcub;"</strong></span></p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;var _id="fullname" first="ken" last="lowrie" _format="&lcub;&lcub;&#x73;elf.first&rcub;&rcub; &lcub;&lcub;&#x73;elf.last&rcub;&rcub;"</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&lsqb;fullname&rsqb;</strong> would emit <em><strong>ken lowrie</strong></em>.
</pre></div>
<div class="extras"><p>Using that, you can build some pretty powerful tools for automating frequently used tasks in your documents. Take a look at the <strong>film.md</strong>, <strong>image.md</strong> and <strong>avs.md</strong> tests to get an idea of what you can do.</p></div>
<div class="extras"><p>Before we leave this, take note of the difference between {{first}} and {{self.first}}. Both syntaxes are valid, but the first one references the normal variable first, while the second one (self.first) references the attribute named <em>first</em> defined within the <em>varname</em> variable. Also take note that you can reference the attributes of other <strong>&#64;var</strong> variables as long as you qualify them. Let me show you a quick example of that. Take this:</p></div>
<div class="extras"><p><span class="indent"><strong>&#64;var _id="var1" first="ken" last="lowrie"</strong></span></p></div>
<div class="extras"><p><span class="indent"><strong>&#64;var _id="var2" prefix="mr." _format="[&#x73;elf.prefix] [var1.first] [var1.last]"</strong></span></p></div>
<div class="extras"><p>Then, if you write this:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&lsqb;var2&rsqb;</strong> would emit <em><strong>mr. ken lowrie</strong></em>.
</pre></div>
<div class="extras"><p>One last thing, remember how we discussed that sometimes you need a way to resolve ambiguities of variables across the different variable types? <strong>image.</strong> can be used to resolve a variable inside the <strong>&#64;image</strong> namespace, and <strong>var.</strong> can be used to resolve a variable inside the <strong>&#64;var</strong> namespace. Given that:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&lsqb;var2&rsqb;</strong> and <strong>&lsqb;<em>var</em>.var2&rsqb;</strong> resolve to the same thing.
</pre></div>
<div class="extras"><p>Did you notice that in the first example, we used <strong>&lcub;&lcub;</strong> and <strong>&rcub;&rcub;</strong> around the variable/attribute name, and in the second, we used square brackes i.e. <strong>&lsqb;</strong> and <strong>&rsqb;</strong>? What's the difference (if there is one), and why use one over the other? Good question. Now is a good time to talk about the concept of attribute markdown expansion, and how it works.</p></div>
<a id="ug_attr_exp"></a>
<div class="extras" style="border-bottom:2px solid black"><h4>Attribute Expansion</h4></div>
<div class="extras"><p>Next up is a topic you are going to see over and over in the coming chapters, and even more once you start examining the built-ins and this user guide. What I'm talking about is the concept of attribute expansion, in the context of <strong>smd</strong>'s markdown variables and attributes.</p></div>
<div class="extras"><p>As you have seen, variables can have one or more attributes, and those attributes can be anything from plain text, to specialized markdown such as <em><strong>&ast;</strong></em>, <em><strong>&ast;&ast;</strong></em>, <em><strong>&plus;&plus;</strong></em> and <em><strong>&sim;&sim;</strong></em>, to the referencing of other attributes, both within the same definition, as well as in entirely other variables and yes, even other namespaces! Let's review a few examples to get started.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Attribute expansion - simple and inline markdown</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;var var1="" attr1="plain text" <br /><strong>&lsqb;var1.attr1&rsqb;=</strong>plain text
&nbsp;
&#64;var var1="" attr1="&ast;text with markdown&ast;" <br /><strong>&lsqb;var1.attr1&rsqb;=</strong><em>text with markdown</em>
&nbsp;
&#64;var var1="" attr1="&lt;strong&gt;text with html markup&lt;/strong&gt;" <br /><strong>&lsqb;var1.attr1&rsqb;=</strong><strong>text with html markup</strong>
</pre></div>
<div class="extras"><p>With simple markdown, you are providing the values directly, and possibly adding the inline markdown elements to it for decoration.</p></div>
<div class="extras"><p>Attributes can also reference values stored in other attributes within the same variable. This can be done using either square brackets <strong>&lsqb;&nbsp;&rsqb;</strong> or curly brackets <strong>&lcub;&lcub;&nbsp;&rcub;&rcub;</strong>. Before looking at the examples, though, let's get acquainted with the semantic differences between the two variations.</p></div>
<div class="extras"><p>Anytime you use square brackets during the declaration of new variables and/or attributes, they will be evaluated at the time the variable declaration is parsed. Curly braces, on the on the other hand, are not evaluated until the attribute value is referenced later in the document. This is a very important distinction, because sometimes, you want some parts of your declaration to evaluate during the parsing stage, and other times, you need them to evaluate later, when a given attribute is actually being referenced.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Attribute expansion - referencing attributes within the same variable</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;var var1="" attr1="&lsqb;self.attr1&rsqb;" attr2="&ast;from var1.attr2&ast;" <br /><strong>&lsqb;var1.attr1&rsqb;=</strong><em>from var1.attr2</em>
&nbsp;
&#64;var var1="" attr1="&lcub;&lcub;self.attr1&rcub;&rcub;" attr2="&ast;from var1.attr2&ast;" <br /><strong>&lsqb;var1.attr1&rsqb;=</strong><em>from var1.attr2</em>
</pre></div>
<div class="extras"><p>Couple of notes on the prior example. First, notice the use of <strong>self.</strong> as a shorthand notation for <strong>var.var1</strong>. This is a frequently used notation, because if you change the variable name, you don't have to change any of the <strong>self.</strong> references. The parser will take care of that for you.</p></div>
<div class="extras"><p>Second, notice that both the square brackets and the curly braces produced the same results. This happens due to a side effect of referencing attributes during the declaration of a new variable. Since at the time of parsing, <strong>var1</strong> does not exist, the lookup for <strong>var1.attr1</strong> fails, and thus the markdown fails to expand. However, later, when we actually access the attribute, it will resolve, and thus both variations work the same way. Keep in mind that relying on this side effect isn't a great idea; it will often lead to pesky bugs in your markdown documents, so it is highly recommended that you use the appropriate syntax when it's called for, and avoid this side effect!</p></div>
<div class="extras"><p>Okay, now let's add a new twist. Having the attributes in one declaration reference the attributes in another declaration. This will demonstrate the issue we were just talking about, that is, the semantic differences between square brackets and curly braces in <strong>smd</strong> markdown.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Attribute expansion - referencing attributes in a different variable</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// Declare a second variable with an attribute we can reference from var1</em>
&#64;var extvar="" attr2="&ast;from extvar.attr2&ast;"
&nbsp;
<em>// Declare var1 and var2 then emit attr1 for each</em>
&#64;var var1="" attr1="&lsqb;extvar.attr2&rsqb;"
&#64;var var2="" attr1="&lcub;&lcub;extvar.attr2&rcub;&rcub;"
<br /><strong>&lsqb;var1.attr1&rsqb;=</strong><em>from extvar.attr2</em>
<strong>&lsqb;var2.attr1&rsqb;=</strong><em>from extvar.attr2</em>
&nbsp;
<em>// Change the value of extvar.attr2 and then reference <strong>attr1</strong> again</em>
&#64;set _="extvar" attr2="&ast;&ast;&ast;A new value!&ast;&ast;&ast;"
&nbsp;
<em>// Review current values of <strong>var1.attr1</strong> and <strong>var2.attr1</strong></em>
<br /><strong>&lsqb;var1.attr1&rsqb;=</strong><em>from extvar.attr2</em><br /><strong>&lsqb;var2.attr1&rsqb;=</strong><em><strong>A new value!</strong></em>
</pre></div>
<div class="extras"><p>See the difference? In <strong>var1.attr1</strong>, it's value was set to <strong>extvar.attr2</strong> when it was defined, but <strong>var2.attr1</strong>, was told to wait to markdown its value until someone asks for it. This is what is normally referred to as <em>deferred expansion</em> in the user manual, and you will see it used all the time throughout the builtins.</p></div>
<div class="extras"><p>Because of the deferred expansion, once we changed the value of <strong>extvar.attr2</strong> to something else, only <strong>var2.attr1</strong> reflected the new value. <strong>var1.attr1</strong> is still the same as what it was when it was declared. Usually, the curly braces are preferred, but there are some cases where using the square brackets are what you need. Before we leave this example, let's dump the current declarations of <strong>var1</strong>, <strong>var2</strong> and <strong>extvar</strong>, so you can see their current state.</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">Current definition of &apos;var1/2&apos; and &apos;extvar&apos; variables</code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>extvar=</strong><br />&nbsp;&nbsp;<strong>attr2=</strong>&lt;em&gt;&lt;strong&gt;A new value!&lt;/strong&gt;&lt;/em&gt;<br />
&nbsp;&nbsp;<strong>_format=</strong><br />
<br />
<strong>var1=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>&lt;em&gt;from extvar.attr2&lt;/em&gt;<br />
&nbsp;&nbsp;<strong>_format=</strong><br />
<br />
<strong>var2=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>{{extvar.attr2}}<br />
&nbsp;&nbsp;<strong>_format=</strong><br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div class="extras"><p>So that leaves us with one more variation of delayed expansion support, the <em><strong>[!!]</strong></em> syntax. Essentially, it's a way to tell the parser's variable declaration API that you want to the variable or attribute to use square brackets, but you don't want to expand it at declaration time. In this case, the <em><strong>[!</strong></em> will be replaced with <em><strong>[</strong></em> and <em><strong>!]</strong></em> will be replaced with <em><strong>]</strong></em>, just before the variable definition is written to memory. This will make more sense with an example. Let's use the exact one we just saw, but changing on the declaration of var1. Take a look:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Attribute expansion - referencing attributes using &lsqb;!!&rsqb; syntax</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// Declare a second variable with an attribute we can reference from var1</em>
&#64;var extvar="" attr2="&ast;from extvar.attr2&ast;"
&nbsp;
<em>// Declare var1 and var2 then emit attr1 on each</em>
&#64;var var1="" attr1="&lsqb;!extvar.attr2!&rsqb;"
&#64;var var2="" attr1="&lcub;&lcub;extvar.attr2&rcub;&rcub;"
<br /><strong>&lsqb;var1.attr1&rsqb;=</strong><em>from extvar.attr2</em>
<strong>&lsqb;var2.attr1&rsqb;=</strong><em>from extvar.attr2</em>
&nbsp;
<em>// Change the value of extvar.attr2 and then reference <strong>attr1</strong> again</em>
&#64;set _="extvar" attr2="&ast;&ast;&ast;A new value!&ast;&ast;&ast;"
&nbsp;
<em>// Review current values of <strong>var1.attr1</strong> and <strong>var2.attr1</strong></em>
<br /><strong>&lsqb;var1.attr1&rsqb;=</strong><em><strong>A new value!</strong></em><br /><strong>&lsqb;var2.attr1&rsqb;=</strong><em><strong>A new value!</strong></em>
</pre></div>
<div class="extras"><p>See how it worked this time? Let's look at the current declarations of the variables again:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">Current definition of &apos;var1/2&apos; and &apos;extvar&apos; variables</code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>extvar=</strong><br />&nbsp;&nbsp;<strong>attr2=</strong>&lt;em&gt;&lt;strong&gt;A new value!&lt;/strong&gt;&lt;/em&gt;<br />
&nbsp;&nbsp;<strong>_format=</strong><br />
<br />
<strong>var1=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>[extvar.attr2]<br />
&nbsp;&nbsp;<strong>_format=</strong><br />
<br />
<strong>var2=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>{{extvar.attr2}}<br />
&nbsp;&nbsp;<strong>_format=</strong><br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div class="extras"><p>Now, in <strong>var1.attr1</strong>, it's value is set to <strong>&lsqb;extvar.attr2&rsqb;</strong>, which makes it behave like <strong>var2.attr1</strong>. In this case, we have applied <em>deferred expansion</em> using <em><strong>[!!]</strong></em> instead of the usual curly brackets <strong>&lcub;&lcub;&nbsp;&rcub;&rcub;</strong>.</p></div>
<div class="extras"><p>This can help you build some really cool automation in your documents. But you need one more thing before you get started. A way to change one or more attributes of an existing variable in any namespace. Enter <strong>&#64;set</strong> and the <strong>_null_</strong> attribute. We've already been using them in our examples, so it may be old hat by now, but let's take a closer look at it just to be thorough.</p></div>
<a id="ug_set_keyword"></a>
<div class="extras" style="border-bottom:2px solid black"><h3>The &#64;set Keyword</h3></div>
<div class="extras"><p>Attributes in any variable in any namespace can be added or updated at any time. There are two (perhaps three depending on semantics) ways this can be done in all namespaces except <strong>&#64;code</strong>. In &#64;code, there is only one way to update an attribute value, and that is with <strong>&#64;set</strong>. Let's see how it's done, regardless of the namespace.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Updating attribute values with &#64;set</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// First, let&apos;s declare a new variable called &apos;fu&apos;</em>
<strong>&#64;var fu="bar" attr1="value1"</strong>
<strong>&lsqb;fu.attr1&rsqb;</strong> emits <strong>value1</strong>
&nbsp;
<em>// using &#64;set, change the value of attr1 to &apos;value2&apos;</em>
<strong>&#64;set _="fu" attr1="value2"</strong>
<strong>&lsqb;fu.attr1&rsqb;</strong> emits <strong>value2</strong>
&nbsp;
<em>// using the _null_ attribute, change the value of attr1 to &apos;value3&apos;</em>
<strong>&lsqb;fu._null_&lpar;attr1="value3"&rpar;&rsqb;</strong>
<strong>&lsqb;fu.attr1&rsqb;</strong> emits <strong>value3</strong>
</pre></div>
<div class="extras"><p class="note">The <strong>_null_</strong> attribute illustrates an important concept with the attributes of variables in <strong>smd</strong>. That is, any time an attribute value is changed by specifying a new value when a method is invoked, that value becomes the new value for that attribute. This is true with all namespaces except <strong>&#64;code</strong>; in the <strong>&#64;code</strong> namespace, attribute values overridden via a method invocation are temporary. Once the method returns, the original attribute values are restored.<br /><br />As previously mentioned, the only way to change the value of a variable in the <strong>&#64;code</strong> namespace is by using <strong>&#64;set</strong>. When this is done, the code behind the variable (Python source code) is recompiled, which updates the default value in the compiled code stored as part of the variable.</p></div>
<div class="extras"><p>You can also add new attributes to an existing variable with <strong>&#64;set</strong>. And, if you <strong>&#64;set</strong> a variable that does not exist, <strong>&#64;set</strong> will create it. Let&apos;s see some examples of adding attributes.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Adding attributes with &#64;set</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// add a new attribute to &apos;fu&apos; using &#64;set</em>
<strong>&#64;set _="fu" attr2="value42"</strong>
<strong>&lsqb;fu.attr2&rsqb;</strong> emits <strong>value42</strong>
&nbsp;
<em>// adding a new attribute doesn&apos;t affect existing attributes in &apos;fu&apos;</em>
<strong>&lsqb;fu.attr1&rsqb;</strong> still emits <strong>value3</strong>
&nbsp;
<em>// using the _null_ attribute, add attr3 to &apos;fu&apos;</em>
<strong>&lsqb;fu._null_&lpar;attr3="many ways to add attributes"&rpar;&rsqb;</strong>
<strong>&lsqb;fu.attr3&rsqb;</strong> emits <strong>many ways to add attributes</strong>
&nbsp;
<em>// We can also add and update variables at the same time</em>
<strong>&lsqb;fu._null_&lpar;attr3="update 3rd attribute" attr4="add 4th attribute"&rpar;&rsqb;</strong>
<strong>&lsqb;fu.attr3&rsqb;</strong> emits <strong>update 3rd attribute</strong> and <strong>&lsqb;fu.attr4&rsqb;</strong> emits <strong>add 4th attribute</strong>
&nbsp;
<em>// We can also add and update variables at the same time using <strong>&#64;set</strong></em>
<strong>&#64;set _="fu" attr2="update attr2" attr6="6th attribute"</strong>
<strong>&lsqb;fu.attr2&rsqb;</strong> emits <strong>update attr2</strong> and <strong>&lsqb;fu.attr6&rsqb;</strong> emits <strong>6th attribute</strong>
</pre>
</div>
<div class="extras"><p>Let's dump the variable 'fu' to see all the attributes and their values. xxx</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">Current definition of &apos;fu&apos; variable</code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>fu=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>value3<br />
&nbsp;&nbsp;<strong>_format=</strong>bar<br />
&nbsp;&nbsp;<strong>attr2=</strong>update attr2<br />
&nbsp;&nbsp;<strong>attr3=</strong>update 3rd attribute<br />
&nbsp;&nbsp;<strong>attr4=</strong>add 4th attribute<br />
&nbsp;&nbsp;<strong>attr6=</strong>6th attribute<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div class="extras"><p>And finally, you can also specify the namespace two different ways with <strong>&#64;set</strong>. Witness:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Specifying the namespace</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// Specify the namespace with &#64;set; don&apos;t leave it to chance!</em>
<strong>&#64;set _ns="var" _="fu" attr6="update attr6"</strong>
<strong>&lsqb;fu.attr6&rsqb;</strong> emits <strong>update attr6</strong>
&nbsp;
<em>// Alternate method to specify namespace</em>
<strong>&#64;set _="var.fu" attr6="update attr6 again!"</strong>
<strong>&lsqb;fu.attr6&rsqb;</strong> emits <strong>update attr6 again!</strong>
</pre></div>
<div class="extras"><p>One last time let's dump the variable 'fu' to see all the attributes and their values.</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">Current definition of &apos;fu&apos; variable</code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>fu=</strong><br />&nbsp;&nbsp;<strong>attr1=</strong>value3<br />
&nbsp;&nbsp;<strong>_format=</strong>bar<br />
&nbsp;&nbsp;<strong>attr2=</strong>update attr2<br />
&nbsp;&nbsp;<strong>attr3=</strong>update 3rd attribute<br />
&nbsp;&nbsp;<strong>attr4=</strong>add 4th attribute<br />
&nbsp;&nbsp;<strong>attr6=</strong>update attr6 again!<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div class="extras"><p>Here are just a few more examples to help drive home your understanding of the declaration and usage of variables in the <strong>&#64;var</strong> namespace.</p></div>
<div class="extras"><p>Given the following markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Create a new smd variable <em>c2</em></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;var ns="var"<br />
&#64;set _ns="&lsqb;ns&rsqb;" _="c2" \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attr1="&ast;value 1&ast;" \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attr2="&ast;&ast;value 2&ast;&ast;" \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attr3="{{self.attr1}}--{{self.attr2}}" \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attr4="&lsqb;self.attr2&rsqb;--&lsqb;self.attr1&rsqb;"
</pre></div>
<div class="extras"><p>Then the following markdown sometime later will produce:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Display the values for each of the attributes in c2</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lsqb;c2.attr1&rsqb; = <em>value 1</em>
&lsqb;c2.attr2&rsqb; = <strong>value 2</strong>
&lsqb;c2.attr3&rsqb; = <em>value 1</em>--<strong>value 2</strong>
&lsqb;c2.attr4&rsqb; = <strong>value 2</strong>--<em>value 1</em>
</pre></div>
<div class="extras"><p>Did you notice that we snuck in a new concept here? Line continuation can be accomplished by ending any line with the backslash <em><strong>\</strong></em> character. When reading input lines, if the parser detects the backslash as the last character on the line, it will read the next line and append it to the current line, and then return the entire thing as though it were one long line. This helps you produce more readable markdown, especially when declaring variables or creating long textual content.</p></div>
<div class="extras"><p>Well that wraps the section on <strong>&#64;var</strong>! Most of the concepts we covered here apply to all namespaces, unless they say otherwise when we cover them. Let's move on to the next namespace, <strong>&#64;html</strong>, arguably the reason we are all here, since HTML is the primary reason that <strong>smd</strong> exists!</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_ns_html"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>&#64;html Namespace</h2></div>
<div class="extras"><p>The <strong>&#64;html</strong> keyword is used to construct variables that represent HTML elements for your documents. These variables are stored in the &#64;html namespace, and can have names that are identical to variables in other namespaces, although it is normally recommended that you avoid doing that.</p></div>
<div class="extras"><p>Most of the features and concepts just discussed for <a href="#ug_ns_var"><strong>&#64;var</strong></a> variables also applies to <strong>&#64;html</strong> variables. If you haven't read that chapter yet, you should, as this one assumes that you have read and understand those concepts, and will build upon them.</p></div>
<a id="ug_html_syntax"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>@html Syntax</h3></div>
<div class="syntax"><p class="divTitle">@html command syntax</p>
<p><br /></p>
<p><span class="indent"><strong>&#64;html</strong> <strong>_id="name" &lsqb;_tag="tagname" &lsqb;...&rsqb;&nbsp;&nbsp;&rsqb;</strong><br /><br /></span></p>
</div>
<div class="extras"><p>All of the built-in attributes previously documented for <strong>&#64;var</strong> are supported for <strong>&#64;html</strong> variables, and a new one <strong>_tag</strong> has been introduced. _tag is used to set the HTML element name for the variable. If _tag is not specified, it will be set to the same value as _id. Let's define a few variables, and then examine them.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Defining an &#64;html variable</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
&#64;html _="blockquote" cite="url-goes-here"
&#64;html _id="bquote" _tag="blockquote"
&#64;html _id="bq" _inherit="blockquote"
</pre></div>
<div class="extras"><p>In the preceding example, we've defined  three <strong>&#64;html</strong> variables: <strong>blockquote</strong>, <strong>bquote</strong> and <strong>bq</strong>. Let's use <strong>&lsqb;code.dump&rsqb;</strong> to take a look at their declarations.</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">Definition of <em>blockquote</em>, <em>bquote</em> & <em>bq</em> variables</code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>blockquote=</strong><br />&nbsp;&nbsp;<strong>cite=</strong>url-goes-here<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>blockquote<br />
<br />
<strong>bq=</strong><br />&nbsp;&nbsp;<strong>cite=</strong>url-goes-here<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>blockquote<br />
<br />
<strong>bquote=</strong><br />&nbsp;&nbsp;<strong>_tag=</strong>blockquote<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div class="extras"><p>First, take a look at <strong>blockquote</strong>. <strong>_tag</strong>, although we didn't specify it, has been set to <strong>blockquote</strong>. In many cases, this is what you want, so not having to specify it is a nice shortcut when declaring variables. Also, notice how <strong>_format</strong> has been set to <em>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;{{self._tag}}&gt;</em>.</p></div>
<div class="extras"><p>Given that, if we write <em>&lsqb;blockquote&rsqb;</em> it will emit <em><strong>&lt;blockquote cite="url-goes-here"&gt;&lt;/blockquote&gt;</strong></em>.</p></div>
<div class="extras"><p>The first thing you'll notice is that there isn't a way to get content between the opening and closing tags, so on the surface, this doesn't look very useful. Enter the special attributes <strong>&lt;</strong> and <strong>&gt;</strong>, supported by all <strong>&#64;html</strong>-based namespaces.</p></div>
<div class="extras"><p>Now, if we write <strong>&lsqb;blockquote<em>.&lt;</em>&rsqb;</strong> it will emit &lt;blockquote cite="url-goes-here"&gt;. Conversely, if we write <strong>&lsqb;blockquote<em>.&gt;</em>&rsqb;</strong>, it will emit &lt;/blockquote&gt;. So now all we need is to specify a value for the <strong>cite</strong> attribute when we declare the open tag, add some content, and specify the closing tag. Let's see how it all comes together.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Adding content to the blockquote HTML variable</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&lsqb;blockquote.&lt;&lpar;cite="https://google.com"&rpar;&rsqb;</strong>
Google has always had the "I'm Feeling Lucky" button just below it's search input box, which can be used to automatically follow the first returned link in your search.
<strong>&lsqb;blockquote.&gt;&rsqb;</strong>
</pre></div>
<div class="extras"><p>This is what will be rendered by the browser:</p></div>
<div class="extras"><p><blockquote cite="https://google.com">Google has always had the "I'm Feeling Lucky" button just below it's search input box, which can be used to automatically follow the first returned link in your search.</blockquote></p></div>
<div class="extras"><p class="note">Keep in mind that the formatting of the <strong>blockquote</strong> tag is defined by your Browser, or the CSS specified for you document.</p></div>
<div class="extras"><p>Let's return to looking at the <strong>bquote</strong> and <strong>bq</strong> variables. With <strong>bquote</strong>, notice it doesn't have the <strong>cite</strong> attribute, because it wasn't specified. Attributes can always be added to an &#64;html variable on the fly, it isn't required that they be added when the variables are defined. And remember, most HTML elements support the global attributes (e.g. class, style, id, etc.), and if any of these are declared as public attributes on an <strong>&#64;html</strong> variable, they will automatically be output whenever the opening tag of an element is emitted by the parser.</p></div>
<div class="extras"><p><strong>bq</strong> is identical to <strong>blockquote</strong>, because the <strong>_inherit</strong> attribute was specified at declaration time. Recall from the <strong>&#64;var</strong> section, <strong>_inherit</strong> is used to add all attributes of the named variable to this new declaration. And, any of the underlying attributes can be overridden in the new declaration by simply specifying them again.  For example, if we wrote:</p></div>
<div class="extras"><p><span class="indent"><strong>&#64;html _id="bq" _inherit="blockquote" cite="different-default-citation"</strong></span></p></div>
<div class="extras"><p>Then this is what the definition of <strong>bq</strong> looks like in memory:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">New definition of <em>bq</em> variable</code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>bq=</strong><br />&nbsp;&nbsp;<strong>cite=</strong>different-default-citation<br />
&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>blockquote<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<a id="ug_html_names"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;html Variable names</h3></div>
<div class="extras"><p>Variable names in the <strong>&#64;html</strong> namespace are restricted to the same requires as the <strong>&#64;var</strong> namespace.</p></div>
<a id="ug_html_attrs"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;html Built-in Attributes</h3></div>
<div class="extras"><p>In addition to all of the built-in attributes supported by <strong>&#64;var</strong>, <strong>&#64;html</strong> variables have several built-ins that are unique to it:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><table style="margin-left:auto;margin-right:auto">
<tr><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Attribute Name</td><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Description</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>_tag</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The HTML element name of the variable</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>&lt;</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The opening tag for this variable</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>&gt;</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The closing tag for this variable</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>&lt;+</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The opening tag with embedded quotes escaped.</td></tr>
</table></div>
</div>
<div class="extras"><p>We've already seen these in action above, so no need to discuss further with the exception of the <strong>&lt;+</strong>, which will output the opening tag with escaped quotes in the public variable definitions.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Examples</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&lsqb;html.blockquote&rsqb;</strong> <em>=</em> &lt;blockquote cite="https://google.com"&gt;&lt;/blockquote&gt;
<strong>&lsqb;html.blockquote.<&rsqb;</strong> <em>=</em> &lt;blockquote cite="https://google.com"&gt;
<strong>&lsqb;html.blockquote.>&rsqb;</strong> <em>=</em> &lt;/blockquote&gt;
<strong>&lsqb;html.blockquote.<+&rsqb;</strong> <em>=</em> &lt;blockquote cite=\"https://google.com\"&gt;
<strong>&lsqb;html.blockquote._id&rsqb;</strong> <em>=</em> blockquote
<strong>&lsqb;html.blockquote._tag&rsqb;</strong> <em>=</em> blockquote
<strong>&lsqb;html.blockquote._public_keys_&rsqb;</strong> <em>=</em> cite,
<strong>&lsqb;html.blockquote._private_keys_&rsqb;</strong> <em>=</em> _format, _tag,
</pre></div>
<a id="ug_html_misc"></a>
<div class="extras" style="border-bottom:2px solid black"><h3>&#64;html Miscellaneous Examples</h3></div>
<div class="extras"><p>Here are just a few more examples to help drive home your understanding of the declaration and usage of variables in the <strong>&#64;html</strong> namespace. Let's start by examining the contents of the <strong>&lsqb;sys.imports&rsqb;/html.md</strong> file:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Contents of html.md builtins</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
@html _id="html" _tag="html"

// &lt;head&gt; related tags
@html _id="head"
@html _="title" _format="{{self.&lt;}}{{self._t}}{{self.&gt;}}" _t="Default Title"
@html _="meta" _format="{{self.&lt;}}"
@html _="meta-charset" _inherit="meta" charset="UTF-8"
@html _="meta-viewport" _inherit="meta" \
        name="viewport"\
        content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"
@html _="link" _format="{{self.&lt;}}"
@html _="script"
@html _="css" _inherit="link" rel="stylesheet" href="your-stylesheet.css"
@html _="js" _inherit="script" src="your-javascript.js"

// &lt;body&gt; related tags
@html _="body"
@html _="code"
@html _="div"
@html _="em"
@html _="h" 1="&lt;h1&gt;{{self.t}}&lt;/h1&gt;"\
            2="&lt;h2&gt;{{self.t}}&lt;/h2&gt;"\
            3="&lt;h3&gt;{{self.t}}&lt;/h3&gt;"\
            4="&lt;h4&gt;{{self.t}}&lt;/h4&gt;"\
            5="&lt;h5&gt;{{self.t}}&lt;/h5&gt;"\
            6="&lt;h6&gt;{{self.t}}&lt;/h6&gt;"\
            _format="{{self._help}}"\
            _help="*{{self._}}.#(t=\"your heading\")*[bb]\
[sp.4]Emit an HTML Heading[bb]\
[sp.2]**Parameters**[b]\
[sp.4]t - text for heading[bb]\
[sp.2]**Methods**[b]\
[sp.4]# - integer between 1 and 6[bb]\
[sp.2]**Examples**[b]\
[sp.4]h.1(t=\"My [E.ast]h1[E.ast] heading\")"

@html _="li"
@html _="ol"
@html _="p"
@html _="pre"
@html _="span"
@html _="strong"
@html _="table"
@html _="td"
@html _="th"
@html _="tr"
@html _="ul"

// useful list styles
@html _="ulist" _inherit="ul" class="ulist"
@html _="ulistplain" _inherit="ul" class="ulist-plain"
@html _="olist" _inherit="ol" class="olist"
@html _="olist_template" _inherit="ol"\
        _format="@@{{self._inline}}"\
        _inline="&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;"
@html _="olistAlpha" _inherit="olist_template" class="olist-Alpha"
@html _="olistalpha" _inherit="olist_template" class="olist-alpha"
@html _="olistRoman" _inherit="olist_template" class="olist-Roman"
@html _="olistroman" _inherit="olist_template" class="olist-roman"
@html _="olistGreek" _inherit="olist_template" class="olist-Greek"
@html _="olistgreek" _inherit="olist_template" class="olist-greek"

</pre></div>
<div class="extras"><p>You can see a combination of syntaxes used in declaring the builtins for <strong>&#64;html</strong>. Most are very simple, just the name and tag (when necessary), others have a few have additional options. If you begin to examine other system builtin files, you will see more complex declarations. Remember <strong>helpers.md</strong> from the earlier chapter <a href="#ug_helpers">Helper built-ins</a>?</p></div>
<div class="extras"><p>Many times, you may find that taking a system provided builtin as a starting point, using <strong>_inherit</strong> to pick up all of its attributes, and then extending it by adding additional attributes or even changing the behavior by modifying an existing attribute is a great way to get exactly what you need. And this brings us to the end of <strong>&#64;html</strong>. From here, spend some time experimenting with this namespace, and maybe try modifying existing or extending something to get a better feel for how they work.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_ns_link"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>@link Namespace</h2></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to ns_code-doc.md</h2></div>
<div class="extras"><span class="bigandbold red">TODO:&nbsp;</span> Public attributes cannot refer to self.< or ns._.< because it will loop forever...</div>
</code>
</pre>
<div class="extras"><p>The <strong>&#64;link</strong> namespace is built atop the <strong>&#64;html</strong> namespace, and as such, it inherits all the same characteristics of things defined in the <strong>&#64;html</strong> namespace. In this chapter, we will take a closer look at the <strong>&#64;link</strong> namespace and what it has to offer.</p></div>
<a id="ug_links"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h2>Link Styles</h2></div>
<div class="extras"><p>There are two different styles of links built-in to <strong>smd</strong> which map to standard HTML links:</p></div>
<div class="extras"><ol class="olist">
<li>Hyperlinks - Links created using the HTML <strong>a</strong> tag with the <strong>href</strong> attribute. e.g. <em>&lt;a href="url"&gt;content&lt;/a&gt;</em></li>
<li>Bookmarks - Links created using the HTML <strong>a</strong> tag with the <strong>id</strong> attribute. <em>&lt;a id="bookmark_name"&gt;&lt;/a&gt;</em></li>
</ol></div>
<div class="extras"><p>As you can see, these links are both based on the HTML <strong>a</strong> attribute, and the distinction lies in how they are rendered within a document. The sections that follow describe how each link type is creating using the built-in factories specified in the <em><strong>sys.imports/link.md</strong></em> file.</p></div>
<a id="ug_hyperlinks"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Creating Hyperlinks</h3></div>
<div class="extras"><p>Hyperlinks are created using the <strong>&#64;link</strong> namespace in <strong>smd</strong>, while specifying the attributes desired to describe the link. The <strong>&#64;link</strong> namespace is a subclass of <strong>&#64;html</strong>, and therefore it shares all the same characteristics, such as the <span class="red"><span style="font-size:150%">&lt;</span></span> attribute to emit the open tag HTML and <span class="red"><span style="font-size:150%">&gt;</span></span> to emit the close tag HTML. For more information on the <strong>&#64;html</strong> namespace, refer to the <a href="#ug_ns_html">&#64;html chapter</a> in the user manual.</p></div>
<div class="extras"><p>You can create a variable in the @link namespace using the following syntax:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Creating variables in &#64;link namespace</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;link _="name" href="http://example.com"
</pre></div>
<div class="extras"><p>If you then write <strong>&lsqb;link.name&rsqb;</strong>, the parser will emit <strong>&lt;a href="http://example.com"&gt;&lt;/a&gt;</strong>. Such a simple example isn't very useful, however, since we need the ability to insert content between the anchor tag. This can be accomplished by using the special attributes <span class="red"><span style="font-size:150%">&lt;</span></span> and <span class="red"><span style="font-size:150%">&gt;</span></span>, as follows:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Emitting HTML links using special attributes</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lsqb;link.name.&lt;&rsqb;content here&lsqb;link.name.&gt;&rsqb;
</pre></div>
<div class="extras"><p>Now, the parser emits: <strong>&lt;a href="http://example.com"&gt;content here&lt;/a&gt;</strong>, which is a bit more useful, but seemingly rather complex to to use in practice. In light of this, two special built-ins are provided in order to ease the creation and usage of hyperlinks. The first is a link template, <strong>&lsqb;link._template_&rsqb;</strong>, which can be inherited during creation of new links, and the second is a factory, <strong>&lsqb;link.ln_factory&rsqb;</strong>, which can be used to easily create a hyperlink with minimal input, and which has several useful attributes that can be used during rendering. Let's take a look at each of these now.</p></div>
<div class="extras"><p>Going back to our original example, if we add <strong>_inherit="_template_"</strong> to the definition e.g.:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Inheriting attributes from a template</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;link _="name" href="http://example.com" _inherit="_template_"
</pre></div>
<div class="extras"><p>We now have several new attributes available to use. For example, if we write <strong>&lsqb;link.name._asurl&rsqb;</strong>, the parser emits <strong>&lt;a href="http://example.com"&gt;http://example.com&lt;/a&gt;</strong> which renders as <a href="http://example.com">http://example.com</a>.</p></div>
<div class="extras"><p>If we use just the variable name like we did before e.g. <strong>&lsqb;link.name&rsqb;</strong>, we get this: <a href="http://example.com">Usage: link.name(_text="Text to Link")</a>. As you can see, the default text for the link is actually a usage statement, requesting that we add the <strong>_text=</strong> parameter like so: <strong>&lsqb;link.name&lpar;_text="my web site"&rpar;&rsqb;</strong>, which then yields: <a href="http://example.com">my web site</a>.</p></div>
<div class="extras"><p>If you want to use different content with the same link, then specifying the <strong>_text=</strong> parameter provides a convenient way to do that. For example, if I change the parameter to <strong>_text="My Really Cool Website"</strong>, I will get: <a href="http://example.com">My Really Cool Website</a>.</p></div>
<div class="extras"><p>There is one side effect to overriding the default values for attributes on variables in all namespaces except the <strong>&#64;code</strong> namespace. When a default attribute is overridden in a call, it changes the default value of that attribute for subsequent calls!</p></div>
<div class="extras"><p>For example, if I write <strong>&lsqb;link.name&rsqb;</strong> again, then I will get the last value specified for _text, e.g. <a href="http://example.com">My Really Cool Website</a>.</p></div>
<div class="extras"><p class="note">Keep that in mind as it affects parameter passing in all of the namespaces except <strong>&#64;code</strong>.<br /><br />In <strong>@code</strong>, default values for parameters can only be overridden when the variable is defined with <strong>@code</strong> or updated with <strong>@set</strong>. Anything passed via a call will be persisted for that call, and then revert to the original value.</p></div>
<div class="extras"><p>You can also set the initial value for <strong>_text</strong> when the link variable is initially defined. For example, if we write:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Specify initial value for _text during declaration</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;link _="name" href="http://example.com" _inherit="_template_" _text="my default title"
</pre></div>
<div class="extras"><p>And now if I write <strong>&lsqb;link.name&rsqb;</strong>, I will get the new default value for _text, i.e.: <a href="http://example.com">my default title</a>, without having to specify <strong>_text</strong> on the initial usage of the link.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Using the link factory to create hyperlinks</h3></div>
<div class="extras"><p>Before we leave the section on hyperlinks, let's a have a look at a better shorthand for creating links, the built-in link factory <strong>ln_factory</strong>. This built-in allows you to easily create a new link with minimal parameters:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Using the link factory to easily create hyperlinks</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lsqb;ln_factory(nm="sample" hr="http://example.com" t="my default title")&rsqb;
</pre></div>
<div class="extras"><p>And now, if I write <strong>&lsqb;sample&rsqb;</strong>, I will get: <a href="http://example.com">my default title</a>. Notice how in this example, we left off the namespace <strong>link.</strong>. Recall that namespaces allow identifiers to be reused, and the value of a duplicated identifier in different namespaces is unique within each namespace. This ambiguity can lead to unexpected expansion since the if no namespace is supplied, the different namespaces are searched attempting to resolve the identifier. If the parser finds a match before it searches the intended namespace, then that is what it will use.</p></div>
<div class="extras"><p>Given that, it's always a good idea to specify the namespace except in the most simple of documents, to avoid incorrect expansion down the road. Thus, if I write <strong>&lsqb;link.sample&rsqb;</strong>, I will get the value as before: <a href="http://example.com">my default title</a>.</p></div>
<div class="extras"><p>As you might expect, <strong>ln_factory</strong> inherits from <strong>link._template_</strong>, and as such, it inherits attributes including <strong>_asurl</strong>. For example, <em><strong>&lsqb;link.sample._asurl&rsqb;</strong></em> which expands to <strong>&lt;a href="http://example.com"&gt;http://example.com&lt;/a&gt;</strong> and renders as: <a href="http://example.com">http://example.com</a>.</p></div>
<div class="extras"><p>One other feature of the <strong>link._template_</strong> are the <strong>_qlink</strong> and <strong>_qtext</strong> attributes. These allow you to specify alternative link text to the same <strong>href</strong>. For example, if I add <strong>_qtext="alternative link text"</strong> when the variable is declared, and then write <strong>&lsqb;link.sample._qlink&rsqb;</strong>, I will get: <a href="http://example.com">alternative link text</a>.</p></div>
<div class="extras"><p>You can also specify the <strong>_qtext</strong> using the special <strong>_null_</strong> syntax:  <strong>&lsqb;link.sample._null_&lpar;_qtext="alt2 link text"&rpar;&rsqb;</strong>. Doing so then cause <strong>_qlink</strong> to emit: <a href="http://example.com">alt2 link text</a>.</p></div>
<div class="extras"><p>And of course, you can create them on the fly by simply specifying the <strong>_qtext</strong> parameter when requesting the <strong>_qlink</strong> attribute value.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Specifying _qtext as parameter to _qlink</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lsqb;link.sample._qlink&lpar;_qtext="yet another descriptive link text"&rpar;&rsqb;<br />
<em>// Emits the following on-the-fly</em>
<a href="http://example.com">yet another descriptive link text</a>
</pre></div>
<div class="extras"><p>As in the <strong>&#64;html</strong> namespace, any valid HTML attribute can be specified when creating link variables. Like <strong>&#64;html</strong>, attributes that begin with an underscore <em><strong>_</strong></em> are considered <em>private</em> and attributes that begin with a letter are considered <em>public</em>. When HTML tags are emitted as part of variable expansion, all public attributes are written as part of the opening tag. Let's see how this works.</p></div>
<div class="extras"><p>If we add <strong>title="my link title here"</strong> when we define the link variable <strong>link.sample</strong> we were just using, and then emit the code using any of the emitters <strong>(link.sample, link.sample._asurl, link.sample._qlink)</strong>, the HTML code includes a <strong>title=</strong> attribute every time the anchor opening tag is written. Let's see how that looks, first, we'll declare it:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Adding public attributes to an &#64;link variable</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// You can add attributes with either <strong>&#64;set</strong> or using the <strong>_null_</strong> method</em><br />
&commat;set _="link.sample" title="link title is now set"
Now &lsqb;link.sample&rsqb; emits: <a href="http://example.com" title="link title is now set">my default title</a> (hover to see the title)<br />
&lsqb;link.sample._null_(title="my link title here")&rsqb;
Now &lsqb;link.sample&rsqb; emits: <a href="http://example.com" title="my link title here">my default title</a> (hover to see the title)<br />
</pre></div>
<div class="extras"><p>Let's take a closer look at what the parser emits and what the browser renders for each link method:</p></div>
<div class="extras"><p><strong>&lsqb;link.sample&rsqb;</strong> emits <em>&lt;a href="http://example.com" title="my link title here"&gt;my default title&lt;/a&gt;</em> which renders as: <a href="http://example.com" title="my link title here">my default title</a></p></div>
<div class="extras"><p><strong>&lsqb;link.sample._asurl&rsqb;</strong> emits <em>&lt;a href="http://example.com" title="my link title here"&gt;http://example.com&lt;/a&gt;</em> which renders as: <a href="http://example.com" title="my link title here">http://example.com</a></p></div>
<div class="extras"><p><strong>&lsqb;link.sample._qlink&rsqb;</strong> emits <em>&lt;a href="http://example.com" title="my link title here"&gt;yet another descriptive link text&lt;/a&gt;</em> which renders as: <a href="http://example.com" title="my link title here">yet another descriptive link text</a></p></div>
<div class="extras"><p>If you hover over any of the preceding links, the browser will show "<strong>my link title here</strong>" after a couple of seconds.</p></div>
<div class="extras"><p>By using this same feature, you can add custom CSS styling via <strong>style=</strong> along with other valid HTML attributes to any <em>&#64;link</em>, <em>&#64;image</em> or <em>&#64;html</em> namespace tag.</p></div>
<div class="extras"><p>As one last example, we will add <strong>style="font-size:2em"</strong> to the link.sample variable, and then emit the same 3 links as before:</p></div>
<div class="extras"><p>Let's write the following markdown: <strong>&lsqb;link.sample._null_(style="font-size:2em")&rsqb;</strong> first.</p></div>
<div class="extras"><p>And now, <strong>&lsqb;link.sample&rsqb;</strong> emits <em>&lt;a href="http://example.com" title="my link title here" style="font-size:2em"&gt;my default title&lt;/a&gt;</em> which renders as: <a href="http://example.com" title="my link title here" style="font-size:2em">my default title</a></p></div>
<div class="extras"><p>Similarly, <strong>&lsqb;link.sample._asurl&rsqb;</strong>  and <strong>&lsqb;link.sample._qlink&rsqb;</strong> render as:</p></div>
<div class="extras"><p><a href="http://example.com" title="my link title here" style="font-size:2em">http://example.com</a></p></div>
<div class="extras"><p><a href="http://example.com" title="my link title here" style="font-size:2em">yet another descriptive link text</a></p></div>
<div class="extras"><p>This should give you a pretty good idea of how you can use hyperlinks in your smd documents, and so this wraps up the section on creating them using the built-ins provided in <em><strong>sys.imports/link.md</strong></em>.</p></div>
<a id="ug_bookmarks"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Creating Bookmarks</h3></div>
<div class="extras"><p>Bookmarks are a special type of link used within an HTML document. There are two logical parts to a bookmark, the <em><strong>ID</strong></em> and the actual reference to the ID, which is done by writing <em><strong>#ID</strong></em>. Within smd, bookmarks are implemented with the <strong>&#64;link</strong> namespace, and are usually created using the Bookmark factory, <strong>bm_factory</strong>, which is a built-in link variable. <strong>bm_factory</strong> uses the <strong>bm_template</strong> variable in order to provide a simple abstraction for creating and using bookmarks within an HTML document.</p></div>
<div class="extras"><p class="note"><em><strong>NOTE</strong></em>: Because the <strong>bm_template</strong> isn't useful outside the context of the <strong>bm_factory</strong>, we are going to focus on the latter only, since it is what you will use to create and use bookmarks.</p></div>
<div class="extras"><p>Similar to it's counterpart <strong>ln_factory</strong>, has the following syntax:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Using the bookmark factory to create in-document links</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lsqb;bm_factory(nm="bookmark1" t="my bookmark text")&rsqb;
</pre></div>
<div class="extras"><p>The <strong>bm_factory</strong> does not need the <strong>hr=</strong> parameter, however, because the href is constructed using only the bookmark name, since it refers to a location within the current document.</p></div>
<div class="extras"><p>Once the bookmark is created using the syntax above, hyperlinks within the current document are created by using the <strong>.link</strong> attribute, and the anchor location is emitted using simply the variable name. Let's look at an example.</p></div>
<div class="extras"><p>Within your document, use the <strong>&lsqb;link.bookmark1&rsqb;</strong> to place the anchor at the appropriate location. In our case, I've placed the anchor just below the variable dump below, so that it's easy to test.  To create a hyperlink to that location, use the syntax: <strong>&lsqb;link.bookmark1.link&rsqb;</strong>, as I have done right here: <a href="#bookmark1">my bookmark text</a>. &lt;-- Click on that link and see that it takes you to the location below.</p></div>
<div class="extras"><p>I'm going to dump the various <strong>&#64;link</strong> variables we've been creating to create some space between the bookmark link I just emitted above and the location where the heading is that I dropped the anchor.</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold"><strong>&#64;link</strong> variable definitions and associated <strong>&#64;html</strong> elements</code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>bookmark1=</strong><br />&nbsp;&nbsp;<strong>id=</strong>{{self._}}<br />
&nbsp;&nbsp;<strong>_format=</strong>@@ {{self._inline}}<br />
&nbsp;&nbsp;<strong>_link_o=</strong>&lt;a href="#{{self.id}}"&gt;<br />
&nbsp;&nbsp;<strong>link=</strong>{{self._link_o}}{{self.text}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>text=</strong>my bookmark text<br />
&nbsp;&nbsp;<strong>_inline=</strong>&lt;a id="{{self.id}}"&gt;&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_qlink=</strong>{{self._link_o}}{{self._qtext}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_qtext=</strong>SETMETOLINKTEXT<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
<br />
<strong>name=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>{{self.&lt;}}{{self._text}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_text=</strong>my default title<br />
&nbsp;&nbsp;<strong>href=</strong>http://example.com<br />
&nbsp;&nbsp;<strong>_asurl=</strong>{{self.&lt;}}{{code.esc_angles.run(url="{{self.href}}")}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_qlink=</strong>{{self.&lt;}}{{self._qtext}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_qtext=</strong>SETMETOLINKTEXT<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
&nbsp;&nbsp;<strong>_inherit=</strong>_template_<br />
<br />
<strong>sample=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>{{self.&lt;}}{{self._text}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_text=</strong>my default title<br />
&nbsp;&nbsp;<strong>href=</strong>http://example.com<br />
&nbsp;&nbsp;<strong>_asurl=</strong>{{self.&lt;}}{{code.esc_angles.run(url="{{self.href}}")}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_qlink=</strong>{{self.&lt;}}{{self._qtext}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_qtext=</strong>yet another descriptive link text<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
&nbsp;&nbsp;<strong>title=</strong>my link title here<br />
&nbsp;&nbsp;<strong>style=</strong>font-size:2em<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<a id="bookmark1"></a>
<div class="extras"><h4>This is where I dropped the anchor for <strong>bookmark1</strong></h4></div>
<div class="extras"><p>Before we leave bookmarks, it is worth mentioning that this factory also supports the <strong>_qlink</strong> and <strong>_qtext</strong> attributes, just like standard links do. So, using our prior bookmark, here is the output when using them:</p></div>
<div class="extras"><p><strong>&lsqb;link.bookmark1._qlink&lpar;"my alternate bookmark name"&rpar;&rsqb;</strong> --&gt; <a href="#bookmark1">my alternate bookmark name</a></p></div>
<div class="extras"><p>That's about all there is to using the smd built-ins for creating HTML bookmarks within a document.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_mailto_links"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h3>mailto links</h3></div>
<div class="extras"><p>You can create mailto: links in your document too, which enables users to click on a link to automatically compose an email addressed to the specified email address. <strong>smd</strong> will encode the entire mailto: link URL using a mix of decimal and hexadecimal HTML entities as a deterrent to spam bots that mine email addresses from HTML documents. Here's the syntax for a <em>mailto:</em> link:</p></div>
<div class="syntax"><p class="divTitle">mailto Link Syntax</p>
<p><div class="extras"><p class="generic"></p>
<p><strong>&#64;link</strong> _id="name" href="<em>mailto:</em>you@yourdomain.com"<br /><br /></p>
<p><em>// or use the link factory</em></p>
<p>&lsqb;link.ln_factory&lpar;nm="sample" hr="mailto://example.com" t="my default title"&rpar;&rsqb;</p>
<p></p></div></p>
</div>
<div class="extras"><p>Let's create two sample links using each method and see how they can be used in your markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">using the mailto: prefix on &#64;link declarations</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<span class="indent">@link _="email_me" href="mailto:me@domain.com"</span>
<span class="indent">&lsqb;ln_factory(nm="feedback" hr="mailto:user@mydomain.com?subject=feature%20feedback" t="Send feedback")&rsqb;</span>
</pre></div>
<div class="extras"><p>I've defined the previous examples inline in the user docs, so now we can use them by using either of these methods:</p></div>
<div class="extras"><p><strong>&lsqb;link.email_me.&lt;&rsqb;email_me&lsqb;link.email_me.&gt;&rsqb;</strong> emits this:<br /></p></div>
<div class="extras"><p><span class="indent"><em>&lt;a href="&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#x6c;&amp;#x74;&amp;#x6f;&amp;#x3a;&amp;#x6d;&amp;#x65;&amp;#x40;&amp;#x64;&amp;#x6f;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#x6e;&amp;#x2e;&amp;#x63;&amp;#x6f;&amp;#x6d;"&gt;</em>email_me<em>&lt;/a&gt;</em></span></p></div>
<div class="extras"><p>which the browser renders like this: <a href="&#109;&#97;&#x69;l&#116;&#x6f;&#x3a;m&#101;&#x40;d&#111;&#x6d;&#x61;i&#110;&#x2e;c&#111;&#x6d;">email me</a>.</p></div>
<div class="extras"><p class="note blue">
<strong>Wait, what the ... happened to the href?</strong>
<br /><br />
<span class="indent"><em>&lt;a href="&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#x6c;&amp;#116;&amp;#111;&amp;#58;me&amp;#x40;&amp;#x64;&amp;#x6f;&amp;#x6d;&amp;#x61;&amp;#105;&amp;#110;&amp;#46;co&amp;#x6d;"&gt;</em></span>
<br /><br />
How come the <strong>href</strong> on the link is all jacked up? Actually, this is intentional! It encodes the email address in a way that makes it a bit more challenging for <strong>spambots</strong> and other web scraper tools to detect an email address. Not impossible, but definitely more challenging! In addition, every time the parser runs the output will be slightly different, yet the link and the behavior remain consistent and correct! Just a cool side benefit to how <strong>smd</strong> parses and encodes links that use a <strong>mailto</strong> prefix on the <strong>href</strong>.
</p></div>
<div class="extras"><p>Getting back to <strong>mailto</strong> links, let's take a look at the other example, the one created with the link factory. The variable name for it is <strong>feedback</strong>, and to use the link, all we need to write is <strong>&lsqb;feedback&rsqb;</strong>, which is much easier and cleaner than having to use the link open and close tags as before.</p></div>
<div class="extras"><p>When we do that, the browser will display <a href="&#x6d;&#97;i&#x6c;&#x74;&#111;&#58;&#x75;&#115;e&#x72;&#x40;&#109;y&#x64;&#111;m&#x61;&#x69;&#110;&#46;&#x63;&#111;&#109;&#x3f;&#x73;&#117;b&#x6a;&#x65;&#99;t&#x3d;&#102;e&#x61;&#x74;&#117;r&#x65;&#37;2&#x30;&#x66;&#101;e&#x64;&#98;&#97;&#x63;&#x6b;">Send feedback</a>, which is exactly what we need. If you'll recall from the discussion on the link factory before, you also have access to the <strong>_qlink</strong> attribute, so we can create custom alternate text on the fly.</p></div>
<div class="extras"><p>For example, if we write <strong>&lsqb;feedback._qlink(_qtext="I would love to get your feedback!")]</strong>, then this is what the browser would display: <a href="&#x6d;&#x61;&#105;l&#x74;&#x6f;&#x3a;&#117;s&#x65;&#x72;&#x40;&#109;y&#x64;&#x6f;&#x6d;&#97;i&#x6e;&#x2e;&#x63;&#111;m&#x3f;&#x73;&#x75;&#98;j&#x65;&#x63;&#x74;&#61;f&#x65;&#x61;&#x74;&#117;r&#x65;&#x25;&#x32;&#48;f&#x65;&#x65;&#x64;&#98;a&#x63;&#x6b;">I would love to get your feedback!</a></p></div>
<div class="extras"><p>And so we come to the end of the <strong>&#64;link</strong> chapter. Built upon the <strong>&#64;html</strong> namespace, <strong>&#64;link</strong> offers some cool features for creating and using hyperlinks if your markdown documents. Next up, is the <strong>&#64;image</strong> namespace.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_ns_image"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>The @image Namespace</h2></div>
<div class="extras"><p>The <strong>&#64;image</strong> keyword is used to declare variables that are used to include images in your document. Basically, <strong>&#64;image</strong> is a convenient way to abstract the <strong>&lt;img&gt;</strong> HTML tag.</p></div>
<div class="extras"><p>Despite being an abstraction of the HTML element <strong>img</strong>, <strong>&#64;image</strong> is not based on the <strong>&#64;html</strong> namespace. Given that, the underlying semantics do not support the <strong>&#64;html</strong> built-in attributes such as <span class="red bold"><span style="font-size:150%">.&lt;</span></span>, <span class="red bold"><span style="font-size:150%">.&gt;</span></span> and <span class="red bold"><span style="font-size:150%">.&lt;+</span></span>. The full syntax is:</p></div>
<div class="syntax"><p class="divTitle">&#64;image Syntax</p>
<p><div class="extras"><p class="generic"></p>
<p>@image _id="imagename" src="pathtoimage" alt="" _private="val"</p>
<p></p></div></p>
</div>
<div class="extras"><p>Here's how it works. Like all namespaces, <em>_id="imagename"</em> is what names the variable in the <strong>&#64;image</strong> namespace. You will use that name to cause the <strong>&lt;img&gt;</strong> tag to be emitted in your document. Also recall that attributes that start with an underscore <span class="red bold"><span style="font-size:150%">_</span></span> are considered private, and are not included in the generated <strong>&#64;image</strong> HTML code. So, if you were to write:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Creating variables in &#64;image namespace</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&commat;image _id="img1" src="path/foo.jpg" alt="my text for alt" class="myclass" _private="My private note"
</pre></div>
<div class="extras"><p>and then write:</p></div>
<div class="extras"><p><span class="indent"><span style="font-size:120%">&lsqb;img1&rsqb;</span></span></p></div>
<div class="extras"><p>The code that would be inserted would be:</p></div>
<div class="extras"><p><span class="indent"><strong>&lt;img src="path/foo.jpg" alt="my text for alt" class="myclass"/&gt;</strong></span></p></div>
<div class="extras"><p>Note that _id wasn't included, nor was _private. However, I can reference them both using the syntax:</p></div>
<div class="extras"><p><span class="indent"><strong>&lsqb;img1._id&rsqb;</strong> which emits <em>img1</em> and <strong>&lsqb;img1._private&rsqb;</strong> which emits <span style="font-size:120%">My private note</span></span></p></div>
<div class="extras"><p>This also works to reference the normal attributes. e.g. <strong>&lsqb;img1.class&rsqb;</strong> which emits <span style="font-size:120%">myclass</span>.</p></div>
<div class="extras"><p>And as is the case for all namespaces, if there's ambiguity in the names used in different namespaces, you can add the namespace prefix to clarify. For example, <em><strong>image.</strong></em> in front of the name to force the correct namespace to resolve. For example, if I write the following two lines in my document:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&#64;var</strong> img1="my variable img1 in &#64;var namespace"
<strong>&#64;image</strong> _id="img1" src="foo.png"
</pre></div>
<div class="extras"><p>Then, when I write <strong>&lsqb;var.img1&rsqb;</strong> the parser will emit <em>my variable img1 in &#64;var namespace</em> and when I write <strong>&lsqb;image.img1&rsqb;</strong> the parser emits <em>&lt;img src="foo.png"/&gt;</em>.</p></div>
<div class="extras"><p>Let's go ahead and include an inline image to see <strong>&#64;image</strong> in action. I will write:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&#64;image</strong> _="shot1" src="&lsqb;sys.root&rsqb;/docs/import/shot1.jpg" alt="shot 1" style="width:30%"
</pre></div>
<div class="extras"><p>When I write <strong>&lsqb;shot1&rsqb;</strong>, the parser emits <em>&lt;img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" alt="shot 1" style="width:30%"/&gt;</em> and the browser renders:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" alt="shot 1" style="width:30%"/></p></div>
<div class="extras"><p>Pretty straightforward, don't you think? Okay, now it's time to take a look at the system provided builtins for <strong>&#64;image</strong>, so we can tap into some additional flexibility when rendering images with <strong>smd</strong>.</p></div>
<a id="ug_image_builtins"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;image builtins</h3></div>
<div class="extras"><p>The <strong>&#64;image</strong> namespace provides a limited set of builtins to get you started with using images in your markdown. These builtins are a good starting point for your own image styling, so let's begin with a quick overview of the builtins in <strong>sys.imports/image.md</strong>.</p></div>
<div class="extras"><p><strong>IMG_DEF</strong> contains four different default styles, each of which can be selected using the <strong>IMG_STYLE</strong> attribute shortcuts:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><strong>&lsqb;IMG_STYLE.inline&rsqb;</strong></li>
<li><strong>&lsqb;IMG_STYLE.inline_border&rsqb;</strong></li>
<li><strong>&lsqb;IMG_STYLE.block&rsqb;</strong></li>
<li><strong>&lsqb;IMG_STYLE.block_border&rsqb;</strong></li>
</ul></div>
<div class="extras"><p>In addition, four fixed size attributes and one custom size attribute is provided via the <strong>IMG_SIZE</strong> declaration:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><strong>&lsqb;IMG_SIZE.thumb&rsqb;</strong></li>
<li><strong>&lsqb;IMG_SIZE.small&rsqb;</strong></li>
<li><strong>&lsqb;IMG_SIZE.medium&rsqb;</strong></li>
<li><strong>&lsqb;IMG_SIZE.large&rsqb;</strong></li>
<li><strong>&lsqb;IMG_SIZE.custom&lpar;w="##%"&rpar;)&rsqb;</strong></li>
</ul></div>
<div class="extras"><p>For a quick example of the size and styling shortcuts, let's write the following markdown in this document and see what we get:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lsqb;IMG_SIZE.thumb&rsqb;
&#64;image _="shot1" src="&lsqb;sys.root&rsqb;/docs/import/shot1.jpg" style="&lcub;&lcub;IMG_STYLE.inline_border&rcub;&rcub;"
&lsqb;shot1&rsqb;
</pre></div>
<div class="extras"><p>And here is what the browser renders:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" style="margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>Let's take a closer look at the builtins declared in <strong>image.md</strong> to assist with using images in your documents. We will start by looking at the built-in help for each builtin, and then we'll move on to using them in our document.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>IMG_DEF</strong> Help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>IMG_DEF</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Defines common image styling options.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Not normally accessed directly. Used by <strong>IMG_SIZE</strong> and <strong>IMG_STYLE</strong> as helpers.<br /><br />&nbsp;&nbsp;<strong>Common Attribute Values</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_i_width</strong> - width: CSS value<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_b_size</strong> - border: CSS size value<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_b_type</strong> - border: CSS type value<br /><br />&nbsp;&nbsp;<strong>Common Styling Defaults</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_border_style</strong> - CSS styling for bordered image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_inline_style</strong> - CSS styling for borderless image<br /><br />&nbsp;&nbsp;<strong>Common Image Style Options</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_st_inline</strong> - CSS styling for inline image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_st_inline_border</strong> - CSS styling for inline bordered image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_st_block</strong> - CSS styling for block image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>img_st_block_border</strong> - CSS styling for block bordered image.</pre>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>IMG_SIZE</strong> Help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>IMG_SIZE</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Provides methods for common image sizes.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Use them when you want to change the default image size used in the <strong>IMG_STYLE</strong> attributes.<br /><br />&nbsp;&nbsp;<strong>Common Methods</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>thumb</strong> - Sets <strong>IMG_DEF._i_width</strong> to 20%<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>small</strong> - Sets <strong>IMG_DEF._i_width</strong> to 40%<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>medium</strong> - Sets <strong>IMG_DEF._i_width</strong> to 70%<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>large</strong> - Sets <strong>IMG_DEF._i_width</strong> to 90%<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>custom(w)</strong> - Sets <strong>IMG_DEF._i_width</strong> to <strong>w</strong><br /><br />&nbsp;&nbsp;<strong>Examples</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;IMG_SIZE.small&rsqb;</strong> - Sets <strong>IMG_DEF._i_width</strong> to <strong>20%</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;IMG_SIZE.custom&lpar;w="50%"&rpar;&rsqb;</strong> - Sets <strong>IMG_DEF._i_width</strong> to <strong>50%</strong>.</pre>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>IMG_STYLE</strong> Help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>IMG_STYLE</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Several styling attributes for common image styles.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;These attributes are used to obtain various CSS styles for an @image variable.<br /><br />&nbsp;&nbsp;<strong>Common Attributes</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>inline</strong> - Returns <strong>IMG_DEF.img_st_inline</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>inline_border</strong> - Returns <strong>IMG_DEF.img_st_inline_border</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>block</strong> - Returns <strong>IMG_DEF.img_st_block</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>block_border</strong> - Returns <strong>IMG_DEF.img_st_block_border</strong><br />&nbsp;&nbsp;<strong>Examples</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;IMG_STYLE.inline&rsqb;</strong> - Returns the CSS to style an inline image<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;IMG_STYLE.block_border&rsqb;</strong> - Returns the CSS to style a block image with a border.</pre>
</div>
<div class="extras"><p>The builtins you normally use in your documents are <strong>IMG_SIZE</strong> and <strong>IMG_STYLE</strong>. <strong>IMG_SIZE</strong> is used to set the size of the image that will be displayed in the document. Before we get too far, though, we need to actually declare an <strong>@image</strong> variable that we can experiment with. Let's begin with the following declaration:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declare an image variable</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Set image size to large, declare myshot var and render</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.large&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;image _id="myshot" src="&lsqb;sys.imports&rsqb;/avs/needshot.png" style="&lsqb;IMG_STYLE.inline_border&rsqb;"</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
</div>
<div class="extras"><p>And when we do that, here's what we get:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>Okay, not too complicated thus far. The first thing to note is that the image size takes up almost the entire document window. This is because the width is currently set to <strong>90%</strong>. So let's go ahead and set the size to <strong>&lsqb;IMG_SIZE.small&rsqb;</strong>, and then render the image again:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Change image size to small and render again</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Set image size to small again and just render</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.small&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
</div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>Wait, this looks the same! What's going on? Let's begin by taking a look at the declaration for <strong>myshot</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declaration of image.myshot</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
myshot=
  src=/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png
  style=margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;
  _format=&lt;{{self._tag}}{{self._public_attrs_}}/&gt;
  _tag=img

</pre></div>
<div class="extras"><p>Okay, looks like the issue is that <strong>style</strong> is hard-coded to the <strong>inline_border</strong> style. So, if we redeclare our @image variable, but this time use either "<strong>[!IMG_STYLE.inline_border!]</strong>" or "<strong>{{IMG_STYLE.inline_border}}</strong>", either of which will cause the parser to not evaluate the variable until it is used, that should allow us to override it. So basically, here's the markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declare an image variable</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare myshot, set image size to small, render</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;image _id="myshot" src="&lsqb;image_path&rsqb;/needshot.png" style="&lsqb;!IMG_STYLE.inline_border!&rsqb;"</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.small&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
</div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/needshot.png" style="margin-left:auto;margin-right:auto;width:40%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>And now if I write <strong>&lsqb;IMG_SIZE.thumb&rsqb;</strong> followed by <strong>&lsqb;myshot&rsqb;</strong> I will get:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Change image size to thumb and render again</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Set image size to thumb and just render</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.thumb&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
</div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/needshot.png" style="margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>Let's review the new definition of <strong>myshot</strong> to see how this change affected the variable definition:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declaration of image.myshot</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
myshot=
  src=/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/needshot.png
  style=[IMG_STYLE.inline_border]
  _format=&lt;{{self._tag}}{{self._public_attrs_}}/&gt;
  _tag=img

</pre></div>
<div class="extras"><p>You can see that <strong>style=</strong> is now set to <strong>&lsqb;IMG_STYLE.inline_border&rsqb;</strong> instead of being hardcoded. Using the <span class="red"><span style="font-size:130%">&lsqb;!&nbsp;!&rsqb;</span></span> around a variable name in an attribute declaration causes the parser to delay evaluation of the variable until it is actually used. Note that you would get the same effect by surrounding the variable/attribute name with curly braces, i.e. <span class="red"><span style="font-size:120%">&lcub;&lcub;&nbsp;&rcub;&rcub;</span></span>.</p></div>
<div class="extras"><p>You can see more of these builtins and the <strong>&#64;image</strong> support in action by reviewing the <a href="#examples">samples</a> that are included in the user guide.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_ns_code"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>The &#64;code Namespace</h2></div>
<div class="extras"><p>The <strong>&#64;code</strong> keyword is used to construct a very specialized type of variable for your documents. Like all the other namespaces, these variables can have names that are identical to variables in other namespaces, although it is normally recommended that you avoid doing that.</p></div>
<div class="extras"><p><strong>&#64;code</strong> variables are probably best described as macros, and although the other namespace variables could also be viewed this way, <strong>&#64;code</strong> variables are much more powerful because they provide a way to construct emitters written in Python! <strong>&#64;code</strong> macros are used heavily throughout the system builtins to achieve some of the more powerful features of <strong>smd</strong>.</p></div>
<div class="extras"><p class="note blue">If you are not familiar with Python and Python programming, then you may want to skip this section; it isn't for you. You can still do quite a bit with <strong>smd</strong> without having to write extensions in Python.</p></div>
<a id="ug_code_syntax"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;code Syntax</h3></div>
<div class="syntax"><p class="divTitle">&#64;code command syntax</p>
<p><br /></p>
<p><span class="indent"><strong>&#64;code</strong> <strong>_id="name" src="value" type="eval | exec" &lsqb;...&rsqb;&nbsp;]</strong><br /><br /></span></p>
<p><span class="red"><span class="indent"><span class="indent">NOTE: either underscore &apos;<strong>_</strong>&apos; or &apos;<strong>_id</strong>&apos; can be used to name the variable.</span></span></span></p>
</div>
<div class="extras"><p><strong>&#64;code</strong> variables require that the <span class="green bold italic"><span style="font-size:150%">_</span></span> or <span class="green bold italic"><span style="font-size:150%">_id</span></span> special attribute name be used to specify the variable name. In addition to that requirement, <strong>&#64;code</strong> variables also require two specific public attributes: <span class="green bold italic"><span style="font-size:150%">src</span></span> and <span class="green bold italic"><span style="font-size:150%">type</span></span>. As you might expect, <span class="green bold italic"><span style="font-size:150%">src</span></span> contains the Python source code that will be executed, and <span class="green bold italic"><span style="font-size:150%">type</span></span> specifies either <em>eval</em> or <em>exec</em>, which are underlying Python concepts. Refer to the Python documentation for the specifics on <em>eval</em> vs. <em>exec</em> when writing Python code. Let's take a look at an example declaration:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declaring an &#64;code variable</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&nbsp;
&#64;code _id="echo" src="print('{{self.text}}')" type="eval" text="&ast;text to print&ast;"<br />
<span class="indent"><strong>OR</strong></span><br />
&#64;code _id="echo" src="print('$.text')" type="eval" text="&ast;text to print&ast;"
</pre></div>
<div class="extras"><p class="note"><strong>&#64;code</strong> declarations support the shorthand notation <strong>$.attrname</strong> which is identical to <strong>&lcub;&lcub;&#x73;elf.attrname&rcub;&rcub;</strong>. They can be used interchangably on &#64;code declarations within the <strong>src</strong> attribute only.<br /><br />Keep in mind, however, that there is a subtle semantic difference between the two syntaxes. In addition to only being valid in the context of the <strong>src</strong> attribute value, if a <strong>$.attrname</strong> reference value contains delayed expansion markdown i.e. &lcub;&lcub;var.attr&rcub;&rcub;, it will simply be substituted, it will not be marked down.</p></div>
<div class="extras"><p>Let's go ahead and write that declaration now using the first style for referencing attributes <strong>{{self.text}}</strong>, and then we'll type <strong>&lsqb;code.echo&rsqb;</strong> and it will emit: <em>text to print</em>. So far, so good, not too terribly complicated, right?</p></div>
<div class="extras"><p>Okay, let's do it again, only this time, we'll pass specific text when we write the markdown, like so: <strong>&lsqb;code.echo&lpar;text="### My Inline Heading"&rpar;&rsqb;</strong>, which will give us: ### My Inline Heading. Okay, that's weird, I was expecting an HTML level 3 heading. What happens if I write it again, only this time I'll put the macro at the start of a line:</p></div>
<div class="extras"><p><h3>My Inline Heading</h3></p></div>
<div class="extras"><p>Aha! Interesting. While that might seem unique to <strong>&#64;code</strong> variables, it is not. You can write the same thing as an <strong>&#64;var</strong> variable, and it will behave similarly. So if it behaves like <strong>&#64;var</strong> variables, then I should be able to write <strong>&lsqb;code.echo&rsqb;</strong> again (at the start of the line, of course), and this time it should print the heading without me specifying it (according to the rule that parameters to markdown variables are sticky rule). Let's give that a shot:</p></div>
<div class="extras"><p><em>text to print</em></p></div>
<div class="extras"><p>Wait what? It defaulted back to the original declaration's value for <strong>text</strong>. And there's another difference about <strong>&#64;code</strong> variables. Parameters passed to a markdown instance do not become the new default values for the attributes associated with that variable. So how do I override it without redeclaring the variable? With <strong>&#64;set</strong>. Let's try that:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Changing &#64;code attribute defaults</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;set _="code.echo" text="### My Inline Heading"
&lsqb;code.echo&rsqb;
</pre></div>
<div class="extras"><p>This causes the following to be emitted:</p></div>
<div class="extras"><p><h3>My Inline Heading</h3></p></div>
<div class="extras"><p>And that's how you change the default values for <strong>&#64;code</strong> variable attributes.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Additional attributes on &#64;code variables</h3></div>
<div class="extras"><p><strong>&#64;code</strong> variables have several unique attributes:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><strong>_code</strong> - used by <strong>&#64;code</strong> to store the compiled Python code.</li>
<li><strong>_params_</strong> - used by store the parameters to the current markdown instance</li>
<li><strong>_last</strong> - stores the result of the last time the macro was run</li>
<li><strong>run</strong> - used to invoke the macro. <strong>&lsqb;code.echo.run&rsqb;</strong> is the same as <strong>&lsqb;code.echo&rsqb;</strong></li>
<li><strong>src</strong> - holds the source code in string form.</li>
<li><strong>type</strong> - stores the Python type used for evaluating/compiling the code.</li>
</ul></div>
<div class="extras"><p>Let's take a quick look at the definition for <strong>code.echo</strong>:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">Definition for <strong>code.echo</strong></code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>echo=</strong><br />&nbsp;&nbsp;<strong>src=</strong>print('{{self.text}}')<br />
&nbsp;&nbsp;<strong>type=</strong>eval<br />
&nbsp;&nbsp;<strong>text=</strong>### My Inline Heading<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>### My Inline Heading<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div class="extras"><p>Accessing these attributes is done the same way as any other namespace. For example:</p></div>
<div class="extras"><p><strong>&lsqb;code.echo.src&rsqb;</strong> contains <em>print('{{self.text}}')</em> which emits <em>print('### My Inline Heading')</em>.</p></div>
<div class="extras"><p><strong>&lsqb;code.echo._last&rsqb;</strong> contains <em>### My Inline Heading</em> which emits <em>### My Inline Heading</em>.</p></div>
<div class="extras"><p><strong>_last</strong> just provides a convenient way to access the value output of the last time the code was run by the Python interpreter, avoiding having to run it again to get the same value. You might find this useful at times.</p></div>
<div class="extras"><p>Let's update our <strong>echo</strong> variable by adding the following <strong>help</strong> attribute and changing the default for <strong>text</strong> to reference it (by the way, this is how most of the <strong>&#64;code</strong> system built-ins are declared):</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Adding a default help string to an &#64;code variable</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;set _="code.echo" text="&lcub;&lcub;&#x73;elf._help&rcub;&rcub;" _help="&lcub;&lcub;&#x73;elf._&rcub;&rcub;&lpar;\"&ast;text to print&ast;\"&rpar;"<br />
&lsqb;code.echo._help&rsqb; emits echo(text="<em>text to print</em>")
&lsqb;code.echo.?&rsqb; emits echo(text="<em>text to print</em>")
</pre></div>
<div class="extras"><p>If you create your own <strong>&#64;code</strong> macros, it's a good idea to create a default help string for it so that anyone trying to use it will see how it works. That someone might just be you, and you'll be glad you did!</p></div>
<div class="extras"><p>Let's take a look at one more declaration:</p></div>
<div class="extras"><p><span class="indent"><strong>&#64;code _id="esc_angles" type="eval" src="print('{{self.url}}'.replace('<', '&amp;lt;').replace('>', '&amp;gt;'))" url="{{self._help}}" _help="Usage: code.esc_angles.run(url="text to escape"</strong></span></p></div>
<div class="extras"><p>And now we write the following markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em><strong>//</strong> Because <strong>url</strong> has not been set yet, it will default to the built-in help string</em>
&nbsp;
<strong>&lsqb;code.esc_angles&rsqb;</strong> emits <em>&nbsp;&nbsp;&lt;em&gt;esc_angles(url="&lt;text to escape&gt;")&lt;/em&gt;&lt;br /&gt;&lt;br /&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;strong&gt;url&lt;/strong&gt; = string to operate on&lt;br /&gt;&lt;br /&gt;&nbsp;&nbsp;&nbsp;&nbsp;Replace all occurrences of &lt;em&gt;&lt;&lt;/em&gt; with &lt;em&gt;&amp;lt;&lt;/em&gt; and &lt;em&gt;&gt;&lt;/em&gt; with &lt;em&gt;&amp;gt;&lt;/em&gt; in string &lt;strong&gt;url&lt;/strong&gt;</em><br />
<strong>&lsqb;code.esc_angles(url="&lt;https://google.com&gt;")]</strong> emits <em>&lt;https://google.com&gt;</em>.
</pre></div>
<div class="extras"><p>As it turns out, <strong>code.esc_angles</strong> is actually one of the built-in <strong>&#64;code</strong> macros provided by <strong>smd</strong>.</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">Definition for <strong>code.esc_angles</strong></code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>esc_angles=</strong><br />&nbsp;&nbsp;<strong>type=</strong>eval<br />
&nbsp;&nbsp;<strong>src=</strong>print('{{self.url}}'.replace('&lt;', '&amp;lt;').replace('&gt;','&amp;gt;'))<br />
&nbsp;&nbsp;<strong>url=</strong>{{self._help}}<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&amp;lt;https://google.com&amp;gt;<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Reviewing the builtin help for <strong>esc_angles</strong></pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// Value of <strong>_help</strong> has been suppressed from the dump above. It follows:</em><br />
<strong>_help=</strong>&amp;nbsp;&amp;nbsp;&lt;em&gt;{{self._}}(url="&amp;lt;text to escape&amp;gt;")&lt;/em&gt;&lt;br /&gt;&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;strong&gt;url&lt;/strong&gt; = string to operate on&lt;br /&gt;&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Replace all occurrences of &lt;em&gt;&amp;lt;&lt;/em&gt; with &lt;em&gt;&amp;amp;lt;&lt;/em&gt; and &lt;em&gt;&amp;gt;&lt;/em&gt; with &lt;em&gt;&amp;amp;gt;&lt;/em&gt; in string &lt;strong&gt;url&lt;/strong&gt;<br />
<strong>&lsqb;esc_angles._help&rsqb;</strong> emits <br />&nbsp;&nbsp;<em>esc_angles(url="&lt;text to escape&gt;")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>url</strong> = string to operate on<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Replace all occurrences of <em>&lt;</em> with <em>&amp;lt;</em> and <em>&gt;</em> with <em>&amp;gt;</em> in string <strong>url</strong><br />
<strong>&lsqb;esc_angles.?&rsqb;</strong> emits <br />&nbsp;&nbsp;<em>esc_angles(url="&lt;text to escape&gt;")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>url</strong> = string to operate on<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Replace all occurrences of <em>&lt;</em> with <em>&amp;lt;</em> and <em>&gt;</em> with <em>&amp;gt;</em> in string <strong>url</strong>
</pre></div>
<div class="extras"><p>We will see the rest of built-in macros later in the chapter.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Inheriting attributes</h3></div>
<div class="extras"><p><strong>&#64;code</strong> variables do <strong>not</strong> support the <strong>_inherit</strong> attribute when declaring new variables.</p></div>
<a id="ug_code_names"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;code Variable names</h3></div>
<div class="extras"><p>Variable names in the <strong>&#64;code</strong> namespace are restricted to the same requirements as the other namespaces, e.g. <a href="#ug_var_names">Names</a>.</p></div>
<a id="ug_code_attrs"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;code Built-in Attributes</h3></div>
<div class="extras"><p>In addition to the specific attributes covered above, <strong>&#64;code</strong> variables support the underlying built-in attributes of all namespaces. They can be useful to assist in debugging complex declarations. Refer to the <a href="#ug_var_attrs">Attributes</a> section for all of the details of the built-in attributes.</p></div>
<a id="ug_code_builtins"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>&#64;code Built-in Macros Help Section</h3></div>
<div class="extras"><p><strong>&#64;code</strong> provides a number of useful builtins to assist with creating more complex markdown documents. In this section, we'll take a closer look at what's available, and see how they can be used in your own documents.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Escaping and Encoding</h3></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.esc_angles</p>
<p>&nbsp;&nbsp;<em>esc_angles(url="&lt;text to escape&gt;")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>url</strong> = string to operate on<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Replace all occurrences of <em>&lt;</em> with <em>&amp;lt;</em> and <em>&gt;</em> with <em>&amp;gt;</em> in string <strong>url</strong></p>
<div class="extras"><p class="generic"><strong>Dump of code.esc_angles</strong>:</p></div>
<div class="extras"><p class="box">
<strong>esc_angles=</strong><br />&nbsp;&nbsp;<strong>type=</strong>eval<br />
&nbsp;&nbsp;<strong>src=</strong>print('{{self.url}}'.replace('&lt;', '&amp;lt;').replace('&gt;','&amp;gt;'))<br />
&nbsp;&nbsp;<strong>url=</strong>{{self._help}}<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&amp;lt;https://google.com&amp;gt;<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.escape</p>
<p>&nbsp;&nbsp;<em>escape(t="text to escape")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>t</strong> = string to operate on<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Same as code.esc_angles, but also replaces <em>&amp;</em> with <em>&amp;amp;</em></p>
<div class="extras"><p class="generic"><strong>Dump of code.escape</strong>:</p></div>
<div class="extras"><p class="box">
<strong>escape=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import HtmlUtils;print(HtmlUtils.escape_html('{{self.t}}'))<br />
&nbsp;&nbsp;<strong>t=</strong>{{self._help}}<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&amp;lt;a id="bookmark_name"&amp;gt;&amp;lt;/a&amp;gt;<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.escape_var</p>
<p>&nbsp;&nbsp;<em>escape_var(v="var_to_esc")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>v</strong> = existing variable / attribute to escape<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Same as code.escape, but takes an existing variable or attribute name to operate on.</p>
<div class="extras"><p class="generic"><strong>Dump of code.escape_var</strong>:</p></div>
<div class="extras"><p class="box">
<strong>escape_var=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import HtmlUtils;print(HtmlUtils.escape_html_var('{{self.v}}'))<br />
&nbsp;&nbsp;<strong>v=</strong>self._help<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&amp;lt;img src="/Users/ken/Dropbox/shared/src/script/smd/docs/import/shot1.jpg" alt="shot 1" style="width:30%"/&amp;gt;<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.encodeURL</p>
<p>&nbsp;&nbsp;<em>encodeURL(t="https://www.url.com?x=encode me")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>t</strong> = a URL string to be encoded<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Replaces all blanks in URL string e.g. " " with "<em>%20</em>"<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> If <strong>t</strong> begins with <strong>mailto:</strong> the entire string is encoded using a mix of dec/hex HTML character entities</p>
<div class="extras"><p class="generic"><strong>Dump of code.encodeURL</strong>:</p></div>
<div class="extras"><p class="box">
<strong>encodeURL=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import HtmlUtils;print(HtmlUtils.encodeURL('{{self.t}}'))<br />
&nbsp;&nbsp;<strong>t=</strong>{{self._help}}<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import HtmlUtils;print(HtmlUtils.encodeURL('{{self.t}}'))<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.encode_smd</p>
<p>&nbsp;&nbsp;<em>encode_smd(t="smd markdown to encode")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>t</strong> = an smd string that will be encoded for display<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Use <em>&lt;&nbsp;&gt;</em> for <em>&lsqb;&nbsp;&rsqb;</em>, <em>2{</em> for <em>&lcub;&lcub;</em>, <em>2}</em> for <em>&rcub;&rcub;</em>, <em>2&plus;</em> for <em>&plus;&plus;</em> and <em>2&sim;</em> for <em>&sim;&sim;</em>.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;The entire list of replacements is:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>&lt;</em> becomes <em>&amp;lsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>&gt;</em> becomes <em>&amp;rsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>2&lcub;</em> becomes <em>&amp;lcub;&amp;lcub;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>2&rcub;</em> becomes <em>&amp;rcub;&amp;rcub;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>&ast;</em> becomes <em>&amp;#42;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>&commat;</em> becomes <em>&amp;#64;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>2&plus;</em> becomes <em>&amp;plus;&amp;plus;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>2&sim;</em> becomes <em>&amp;tilde;&amp;tilde;</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE1:</strong> Do not use square brackets, curly braces, double plus or double tilde directly, because the parser will replace them with markdown.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE2:</strong> You need to use <em>&lsqb;E.lp&rsqb;</em> for <em>(</em> and <em>&lsqb;E.rp&rsqb;</em> for <em>)</em>, because parenthesis are used by the markdown to identify parameters to the macros.</p>
<div class="extras"><p class="generic"><strong>Dump of code.encode_smd</strong>:</p></div>
<div class="extras"><p class="box">
<strong>encode_smd=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import HtmlUtils;print(HtmlUtils.encode_smd('{{self.t}}'))<br />
&nbsp;&nbsp;<strong>t=</strong>{{self._help}}<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&amp;#64;code<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.encode_smd_var</p>
<p>&nbsp;&nbsp;<em>encode_smd_var(v="var_to_encode")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>v</strong> = existing variable / attribute to markdown as smd<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Same as code.encode_smd, but takes an existing variable or attribute name to operate on</p>
<div class="extras"><p class="generic"><strong>Dump of code.encode_smd_var</strong>:</p></div>
<div class="extras"><p class="box">
<strong>encode_smd_var=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import HtmlUtils;print(HtmlUtils.encode_smd_var('{{self.v}}'))<br />
&nbsp;&nbsp;<strong>v=</strong>self._help<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import HtmlUtils;print(HtmlUtils.encode_smd_var('{{self.v}}'))<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div class="extras" style="border-bottom:2px solid black"><h3>Miscellaneous Helpers</h3></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.datetime_stamp</p>
<p>&nbsp;&nbsp;<em>datetime_stamp(fmtstr="%Y%m%d @ %H:%M:%S")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>fmtstr</strong> is a Python strftime format string. The default format is: %Y%m%d @ %H:%M:%S<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> Unless you don't like the default format, you normally don't specify <strong>fmtstr</strong></p>
<div class="extras"><p class="generic"><strong>Dump of code.datetime_stamp</strong>:</p></div>
<div class="extras"><p class="box">
<strong>datetime_stamp=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from time import strftime;print(strftime("{{self.fmtstr}}"))<br />
&nbsp;&nbsp;<strong>fmtstr=</strong>%Y%m%d @ %H:%M:%S<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>20200819 @ 12:13:28<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.dump</p>
<p>&nbsp;&nbsp;<em>dump(ns="namespace", name="var name regex" format="False" whitespace="False" help="False")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>ns</strong> - the namespace that <strong>name</strong> is in<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>name</strong> - the variable/attribute name regex to dump<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>format</strong> - use formatting to aid readability<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>whitespace</strong> - include prefix whitespace (HTML entities) and breaks &lt;br /&gt;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>help</strong> - dump the help attribute value (if present)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Dumps one or more variables that match <strong>name</strong>, formatting according to <strong>format</strong> and <strong>whitespace</strong>.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> The default values work best when running <strong>smd</strong> interactively.</p>
<div class="extras"><p class="generic"><strong>Dump of code.dump</strong>:</p></div>
<div class="extras"><p class="box">
<strong>dump=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.dump('{{self.ns}}', '{{self.name}}', {{self.format}}, {{self.whitespace}}, {{self.help}})<br />
&nbsp;&nbsp;<strong>ns=</strong>code<br />
&nbsp;&nbsp;<strong>name=</strong>dump$<br />
&nbsp;&nbsp;<strong>format=</strong>True<br />
&nbsp;&nbsp;<strong>whitespace=</strong>True<br />
&nbsp;&nbsp;<strong>help=</strong>False<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong><br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
<p><strong>NOTE:</strong> The values for <strong>format</strong>, <strong>whitespace</strong> and <strong>help</strong> above are what is being used for generating the user documentation, and are not necessarily the defaults. Refer to the docs above for the actual defaults.</p>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.ln_alias</p>
<p>&nbsp;&nbsp;<em>ln_alias(<strong>nm=</strong>"existing_link_name", <strong>attr=</strong>"_new_PRIVATE_attr_name", <strong>lt=</strong>"new link text")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>nm</strong> - The name of the existing @link variable you are adding an alias to<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>attr</strong> - The name of a new PRIVATE attribute that will be added<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>lt</strong> - The new link text you want to use for the hyperlink<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;This macro adds a new alias for an existing link. That is, alternate text for the same underlying anchor.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> Be sure you specify a PRIVATE attribute i.e. begins with <em><strong>_</strong></em> (underscore). If you do not, you<br />&nbsp;&nbsp;&nbsp;&nbsp;will create an infinite recursion during markdown because the open tag will reference the new attribute!</p>
<div class="extras"><p class="generic"><strong>Dump of code.ln_alias</strong>:</p></div>
<div class="extras"><p class="box">
<strong>ln_alias=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;print('@set _ns="link" _id="{0}"       {1}="{3}{0}.&lt;{4}{2}{3}{0}.&gt;{4}"'.format('{{self.nm}}',       '{{self.attr}}', '{{self.lt}}', CodeHelpers.b(0), CodeHelpers.b(1)))<br />
&nbsp;&nbsp;<strong>nm=</strong>linkname<br />
&nbsp;&nbsp;<strong>attr=</strong>_attr_name<br />
&nbsp;&nbsp;<strong>lt=</strong>NEW_LINK_TEXT_HERE<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;print('@set _ns="link" _id="{0}"       {1}="{3}{0}.&lt;{4}{2}{3}{0}.&gt;{4}"'.format('{{self.nm}}',       '{{self.attr}}', '{{self.lt}}', CodeHelpers.b(0), CodeHelpers.b(1)))<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.repeat</p>
<p>&nbsp;&nbsp;<em>repeat(t="chars to repeat" c="# to repeat")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>t</strong> = character or string to repeat<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>c</strong> = number of times to repeat<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Example: code.repeat(t="%" c="42") will print 42 "%" percent characters</p>
<div class="extras"><p class="generic"><strong>Dump of code.repeat</strong>:</p></div>
<div class="extras"><p class="box">
<strong>repeat=</strong><br />&nbsp;&nbsp;<strong>type=</strong>eval<br />
&nbsp;&nbsp;<strong>src=</strong>print('{}'.format('{{self.t}}'*{{self.c}}))<br />
&nbsp;&nbsp;<strong>t=</strong>{{self._help}}<br />
&nbsp;&nbsp;<strong>c=</strong>1<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>------------------------------------------<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.wrap_stack</p>
<p>&nbsp;&nbsp;<em>wrap_stack(w="< | > | # | tag.< | or tag.>" [encode="True | False"])</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>w</strong> = what you want to get from the wrap stack.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; - Will print the opening wrap tag<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; - Will print the closing wrap tag<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# - Will print the current wrap tag index<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag.&lt; - Will print the opening wrap tags in text form<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag.&gt; - Will print the closing wrap tags in text form<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>encode</strong> = True if you want the HTML escaped, False for raw (default)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;See the documentation on @wrap for details on how to use this macro</p>
<div class="extras"><p class="generic"><strong>Dump of code.wrap_stack</strong>:</p></div>
<div class="extras"><p class="box">
<strong>wrap_stack=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.wrap_stack('{{self.w}}', {{self.encode}})<br />
&nbsp;&nbsp;<strong>w=</strong>*<br />
&nbsp;&nbsp;<strong>encode=</strong>False<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>html.li<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div class="extras" style="border-bottom:2px solid black"><h3>Pushing lines onto input stream</h3></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.equals</p>
<p>&nbsp;&nbsp;<em>equals(v1="ns.var.attr1", v2="ns.var.attr2" true="ns.var.attr3" false="ns.var.attr4")<br /><br /></em>&nbsp;&nbsp;&nbsp;&nbsp;<strong>v1</strong> - attribute 1 for comparison<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>v2</strong> - attribute 2 for comparison<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>true</strong> - attribute to push if <strong>v1</strong> == <strong>v2</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>false</strong> - attribute to push if <strong>v1</strong> != <strong>v2</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Compare attribute <strong>v1</strong> to attribute <strong>v2</strong> and push line onto input stream based on results.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;This macro does a case-sensitive string comparison of <strong>v1</strong> and <strong>v2</strong></p>
<div class="extras"><p class="generic"><strong>Dump of code.equals</strong>:</p></div>
<div class="extras"><p class="box">
<strong>equals=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.equals('{{self.v1}}', '{{self.v2}}', '{{self.true}}', '{{self.false}}')<br />
&nbsp;&nbsp;<strong>v1=</strong>_ns.var.attr_<br />
&nbsp;&nbsp;<strong>v2=</strong>_ns.txtvar.attr_<br />
&nbsp;&nbsp;<strong>true=</strong>_ns.var.true_<br />
&nbsp;&nbsp;<strong>false=</strong>_ns.var.false_<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;CodeHelpers.equals('{{self.v1}}', '{{self.v2}}', '{{self.true}}', '{{self.false}}')<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.pushline</p>
<p>&nbsp;&nbsp;<em>pushline(t="line to push onto input stream")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;t = string to push onto input stream<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> This macro does NOT split the string on the newline \n character. It will give<br />&nbsp;&nbsp;&nbsp;&nbsp;the illusion of doing so, but the newline will be treated as white space by a<br />&nbsp;&nbsp;&nbsp;&nbsp;browser. To push multiple lines, use either code.pushlines or code.pushvar.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;See also: code.pushlines, code.pushvar</p>
<div class="extras"><p class="generic"><strong>Dump of code.pushline</strong>:</p></div>
<div class="extras"><p class="box">
<strong>pushline=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.pushline('{{self.t}}')<br />
&nbsp;&nbsp;<strong>t=</strong>{{self._help}}<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;CodeHelpers.pushline('{{self.t}}')<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.pushlines</p>
<p>&nbsp;&nbsp;<em>pushlines(t="lines to push onto input stream. separate lines with \n")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;t = string to push onto input stream<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> You can push multiple lines by inserting \n characters into the var/attr<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;See also: code.pushline, code.pushvar</p>
<div class="extras"><p class="generic"><strong>Dump of code.pushlines</strong>:</p></div>
<div class="extras"><p class="box">
<strong>pushlines=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.pushlines('{{self.t}}')<br />
&nbsp;&nbsp;<strong>t=</strong>{{self._help}}<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong><br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.pushlist</p>
<p>&nbsp;&nbsp;<em>pushlist(attrlist="var.attr.list")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>attrlist</strong> - an existing variable or attribute<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If <strong>attrlist</strong> is a variable, then that variable <em>must</em> contain an attribute named <strong>attrlist</strong>.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If <strong>attrlist</strong> is an attribute, then that attribute <em>must</em> contain a list of other attributes in the same variable.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;This macro pushes one or more lines specified by <strong>attrlist</strong> onto the input stream. The attributes must be in the same variable.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> See <strong>var.vpl</strong> for a template of what the <strong>attrlist</strong> variable should look like.</p>
<div class="extras"><p class="generic"><strong>Dump of code.pushlist</strong>:</p></div>
<div class="extras"><p class="box">
<strong>pushlist=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.pushlist('{{self.attrlist}}')<br />
&nbsp;&nbsp;<strong>attrlist=</strong>var.macrohelp<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong><br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
&nbsp;&nbsp;<strong>nsvar=</strong>var<br />
&nbsp;&nbsp;<strong>nsname=</strong>var1$|var2$|extvar$<br />
&nbsp;&nbsp;<strong>title=</strong>Current definition of &amp;apos;var1/2&amp;apos; and &amp;apos;extvar&amp;apos; variables<br />
&nbsp;&nbsp;<strong>name=</strong>esc_angles<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.pushvar</p>
<p>&nbsp;&nbsp;<em>pushvar(t="variable whose value will be pushed onto input stream. separate lines with \n")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;v = existing variable / attribute to push onto input stream<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> You can push multiple lines by inserting \n characters into the var/attr<br />&nbsp;&nbsp;&nbsp;&nbsp;e.g. if var.x="line1\nline2" then pushvar(v="var.x") inserts two lines:<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line2<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;See also: code.pushline, code.pushlines</p>
<div class="extras"><p class="generic"><strong>Dump of code.pushvar</strong>:</p></div>
<div class="extras"><p class="box">
<strong>pushvar=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.pushvar('{{self.v}}')<br />
&nbsp;&nbsp;<strong>v=</strong>self._help<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;CodeHelpers.pushvar('{{self.v}}')<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.replace</p>
<p>&nbsp;&nbsp;<em>replace(var="search_str", val="attr_with_rep_val" str="ns.var.attr to operate on")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>var</strong> - the string we are searching for<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>val</strong> - attribute containing replacement string<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>str</strong> - attribute containing string to operate on<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Replaces all occurrences of <strong>var</strong> with <strong>val</strong> in <strong>str</strong> and then push <strong>str</strong> onto input stream.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> Does NOT modify the attribute <strong>str</strong> in memory; simply pushes modified string onto input stream.</p>
<div class="extras"><p class="generic"><strong>Dump of code.replace</strong>:</p></div>
<div class="extras"><p class="box">
<strong>replace=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.replace('{{self.var}}', '{{self.val}}', '{{self.str}}')<br />
&nbsp;&nbsp;<strong>var=</strong>varname_to_replace<br />
&nbsp;&nbsp;<strong>val=</strong>value_to_insert<br />
&nbsp;&nbsp;<strong>str=</strong>string to operate on<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong><br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div class="extras" style="border-bottom:2px solid black"><h3>Specialized get & set variable / attribute values</h3></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.append</p>
<p>&nbsp;&nbsp;<em>append(attr1="ns.var.attr", attr2="ns.var.attr with text to append")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>attr1</strong> - attribute to append text string to<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>attr2</strong> - attribute containing the text to append to <strong>attr1</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Appends text from <strong>attr2</strong> to existing attribute <strong>attr1</strong>.</p>
<div class="extras"><p class="generic"><strong>Dump of code.append</strong>:</p></div>
<div class="extras"><p class="box">
<strong>append=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.append('{{self.attr1}}', '{{self.attr2}}')<br />
&nbsp;&nbsp;<strong>attr1=</strong>ns.var.attr<br />
&nbsp;&nbsp;<strong>attr2=</strong>ns.txtvar.attr<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;CodeHelpers.append('{{self.attr1}}', '{{self.attr2}}')<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.attr_replace</p>
<p>&nbsp;&nbsp;<em>attr_replace(s_str="search_str", r_var="attr_with_rep_val" attr="ns.var.attr to operate on" repl_nl="True | False")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>s_str</strong> - the string we are searching for<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>r_var</strong> - attribute containing replacement string<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>attr</strong> - attribute containing string to operate on<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>repl_nl</strong> - replace escaped newline with newline (default:True)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Replaces all occurrences of <strong>s_str</strong> with <strong>r_var</strong> in <strong>attr</strong> and updates <strong>attr</strong>.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> Like <strong>code.replace</strong> except modifies <strong>attr</strong> directly and does NOT push anything onto the input stream.</p>
<div class="extras"><p class="generic"><strong>Dump of code.attr_replace</strong>:</p></div>
<div class="extras"><p class="box">
<strong>attr_replace=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.attr_replace('{{self.s_str}}', '{{self.r_var}}', '{{self.attr}}', {{self.repl_nl}})<br />
&nbsp;&nbsp;<strong>s_str=</strong>string_to_replace<br />
&nbsp;&nbsp;<strong>r_var=</strong>variable with new_value<br />
&nbsp;&nbsp;<strong>attr=</strong>ns.var.attr<br />
&nbsp;&nbsp;<strong>repl_nl=</strong>True<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;CodeHelpers.attr_replace('{{self.s_str}}', '{{self.r_var}}', '{{self.attr}}', {{self.repl_nl}})<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.attr_replace_str</p>
<p>&nbsp;&nbsp;<em>attr_replace_str(s_str="search_str", r_str="repl_str" attr="ns.var.attr to operate on" repl_nl="True | False")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>s_str</strong> - the string we are searching for<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>r_str</strong> - the replacement string<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>attr</strong> - attribute containing string to operate on<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>repl_nl</strong> - replace escaped newline with newline (default:True)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Replaces all occurrences of <strong>s_str</strong> with <strong>r_str</strong> in <strong>attr</strong> and updates <strong>attr</strong>.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>NOTE:</strong> Like <strong>code.attr_replace</strong>, but accepts replacement string directly instead of indirectly via attribute.</p>
<div class="extras"><p class="generic"><strong>Dump of code.attr_replace_str</strong>:</p></div>
<div class="extras"><p class="box">
<strong>attr_replace_str=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.attr_replace_str('{{self.s_str}}', '{{self.r_str}}', '{{self.attr}}', {{self.repl_nl}})<br />
&nbsp;&nbsp;<strong>s_str=</strong>string_to_replace<br />
&nbsp;&nbsp;<strong>r_str=</strong>new_value<br />
&nbsp;&nbsp;<strong>attr=</strong>ns.var.attr<br />
&nbsp;&nbsp;<strong>repl_nl=</strong>True<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong><br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.attr_replace_value</p>
<p>&nbsp;&nbsp;<em>attr_replace_value(attr="ns.var.attr to operate on" value="new value" repl_nl="True | False")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>attr</strong> - attribute whose value we are to replace<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>value</strong> - replacement value<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>repl_nl</strong> - replace escaped newline with newline (default:True)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Replaces <strong>attr</strong> with <strong>value</strong>.</p>
<div class="extras"><p class="generic"><strong>Dump of code.attr_replace_value</strong>:</p></div>
<div class="extras"><p class="box">
<strong>attr_replace_value=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.attr_replace_value('{{self.attr}}', '{{self.value}}', {{self.repl_nl}})<br />
&nbsp;&nbsp;<strong>attr=</strong>ns.var.attr<br />
&nbsp;&nbsp;<strong>value=</strong>new_value<br />
&nbsp;&nbsp;<strong>repl_nl=</strong>True<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;CodeHelpers.attr_replace_value('{{self.attr}}', '{{self.value}}', {{self.repl_nl}})<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.get</p>
<p>&nbsp;&nbsp;<em>get(v="variable_name")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>v</strong> - variable / attribute name to get<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Emits the value of the variable / attribute <strong>v</strong></p>
<div class="extras"><p class="generic"><strong>Dump of code.get</strong>:</p></div>
<div class="extras"><p class="box">
<strong>get=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.get_ns_var('{{self.v}}')<br />
&nbsp;&nbsp;<strong>v=</strong>variable_name<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;CodeHelpers.get_ns_var('{{self.v}}')<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.get_value</p>
<p>&nbsp;&nbsp;<em>get_value(v="variable_name" ret_type="0|1|2|3|9" escape="True|False" esc_smd="True|False")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>v</strong> - variable / attribute name to get<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>ret_type</strong> - how to emit the value (0, 1, 2, 3 or 9)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>0</strong> - will return the value raw i.e. not marked down<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>1</strong> - will return the value with the initial markdown pass, but without handling delayed expansion<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>2</strong> - will return the after replacing [ with [ and ] with ]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>3</strong> - will return the after replacing <strong>code.get_value.</strong> with <strong>ns.varname.</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>9</strong> - will return the marked down value (default)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>escape</strong> - True to escape the HTML, False otherwise (default)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>esc_smd</strong> - True to escape the SMD, False otherwise (default)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Emits the value of the variable / attribute <strong>v</strong></p>
<div class="extras"><p class="generic"><strong>Dump of code.get_value</strong>:</p></div>
<div class="extras"><p class="box">
<strong>get_value=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.get_ns_var('$.v', $.ret_type, $.escape, $.esc_smd)<br />
&nbsp;&nbsp;<strong>v=</strong>variable_name<br />
&nbsp;&nbsp;<strong>ret_type=</strong>9<br />
&nbsp;&nbsp;<strong>escape=</strong>False<br />
&nbsp;&nbsp;<strong>esc_smd=</strong>False<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;em&amp;gt;{{self._}}(url="&amp;amp;lt;text to escape&amp;amp;gt;")&amp;lt;/em&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;strong&amp;gt;url&amp;lt;/strong&amp;gt; = string to operate on&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;Replace all occurrences of &amp;lt;em&amp;gt;&amp;amp;lt;&amp;lt;/em&amp;gt; with &amp;lt;em&amp;gt;&amp;amp;amp;lt;&amp;lt;/em&amp;gt; and &amp;lt;em&amp;gt;&amp;amp;gt;&amp;lt;/em&amp;gt; with &amp;lt;em&amp;gt;&amp;amp;amp;gt;&amp;lt;/em&amp;gt; in string &amp;lt;strong&amp;gt;url&amp;lt;/strong&amp;gt;<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="section"><p class="divTitle">Macro: code.get_default</p>
<p>&nbsp;&nbsp;<em>get_default(v="variable_name", default="default value")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>v</strong> - The variable / attribute name to get<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>default</strong> - value to return if <strong>v</strong> is not defined<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Returns the value of <strong>v</strong> unless undefined, in which case it returns <strong>default</strong></p>
<div class="extras"><p class="generic"><strong>Dump of code.get_default</strong>:</p></div>
<div class="extras"><p class="box">
<strong>get_default=</strong><br />&nbsp;&nbsp;<strong>type=</strong>exec<br />
&nbsp;&nbsp;<strong>src=</strong>from .utility import CodeHelpers;CodeHelpers.default('$.v', '$.default')<br />
&nbsp;&nbsp;<strong>v=</strong>var or attr name<br />
&nbsp;&nbsp;<strong>default=</strong>default value<br />
&nbsp;&nbsp;<strong>_code=</strong><em>&lt;code object&gt;</em><br />
&nbsp;&nbsp;<strong>_last=</strong>&lt;strong&gt;raw src=&lt;/strong&gt;from .utility import CodeHelpers;CodeHelpers.default('$.v', '$.default')<br />
&nbsp;&nbsp;<strong>_params_=</strong>{}<br />
<br />
</p></div>
</div>
</div>
<div class="extras" style="border-bottom:2px solid black"><h3>Contents of the code.md builtins file</h3></div>
<div class="extras"><p>The import file <strong>&lsqb;sys.imports&rsqb;/code.md</strong> is where the majority of the <strong>&#64;code</strong> built-in macros are documented, so we will just embed the file here to review them.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Contents of code.md builtins</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
// @code namespace builtins

@code _id="esc_angles"\
      type="eval"\
      src="print('{{self.url}}'.replace('&lt;', '&amp;lt;').replace('&gt;','&amp;gt;'))"\
      url="{{self._help}}"\
      _help="[sp.2]*{{self._}}(url=\"[E.lt]text to escape[E.gt]\")*[bb]\
[sp.4]**url** = string to operate on[bb]\
[sp.4]Replace all occurrences of *[E.lt]* with *[E.amp]lt;* and *[E.gt]* with *[E.amp]gt;* in string **url**"

@code _id="escape"\
      type="exec"\
      src="from .utility import HtmlUtils;print(HtmlUtils.escape_html('{{self.t}}'))"\
      t="{{self._help}}"\
      _help="[sp.2]*{{self._}}(t=\"text to escape\")*[bb]\
[sp.4]**t** = string to operate on[bb]\
[sp.4]Same as code.esc_angles, but also replaces *[E.amp]* with *[E.amp]amp;*"

@code _id="escape_var"\
      type="exec"\
      src="from .utility import HtmlUtils;print(HtmlUtils.escape_html_var('{{self.v}}'))"\
      v="self._help"\
      _help="[sp.2]*{{self._}}(v=\"var_to_esc\")*[bb]\
[sp.4]**v** = existing variable / attribute to escape[bb]\
[sp.4]Same as code.escape, but takes an existing variable or attribute name to operate on."

@code _id="encodeURL"\
      type="exec"\
      src="from .utility import HtmlUtils;print(HtmlUtils.encodeURL('{{self.t}}'))"\
      t="{{self._help}}"\
      _help="[sp.2]*{{self._}}(t=\"https://www.url.com?x=encode me\")*[bb]\
[sp.4]**t** = a URL string to be encoded[bb]\
[sp.4]Replaces all blanks in URL string e.g. \" \" with \"*%20*\"[bb]\
[sp.4]**NOTE:** If **t** begins with **mailto:** the entire string is encoded using a mix of dec/hex HTML character entities"

@code _id="encode_smd"\
      type="exec"\
      src="from .utility import HtmlUtils;print(HtmlUtils.encode_smd('{{self.t}}'))"\
      t="{{self._help}}"\
      _help="[sp.2]*{{self._}}(t=\"smd markdown to encode\")*[bb]\
[sp.4]**t** = an smd string that will be encoded for display[bb]\
[sp.4]Use *[E.lt][sp][E.gt]* for *[E.lb][sp][E.rb]*, *2{* for *[E.lcb2]*, *2}* for *[E.rcb2]*, *2[E.plus]* for *[E.ins]* and *2[E.tilde]* for *[E.del]*.[bb]\
[sp.4]The entire list of replacements is:[b]\
[sp.6]*[E.lt]* becomes *[E.amp]lsqb;*[b]\
[sp.6]*[E.gt]* becomes *[E.amp]rsqb;*[b]\
[sp.6]*2[E.lcb]* becomes *[E.amp]lcub;[E.amp]lcub;*[b]\
[sp.6]*2[E.rcb]* becomes *[E.amp]rcub;[E.amp]rcub;*[b]\
[sp.6]*[E.ast]* becomes *[E.amp]#42;*[b]\
[sp.6]*[E.at]* becomes *[E.amp]#64;*[b]\
[sp.6]*2[E.plus]* becomes *[E.amp]plus;[E.amp]plus;*[b]\
[sp.6]*2[E.tilde]* becomes *[E.amp]tilde;[E.amp]tilde;*[bb]\
[sp.4]**NOTE1:** Do not use square brackets, curly braces, double plus or double tilde directly, because the parser will replace them with markdown.[bb]\
[sp.4]**NOTE2:** You need to use *[E.lb]E.lp[E.rb]* for *(* and *[E.lb]E.rp[E.rb]* for *)*, because parenthesis are used by the markdown to identify parameters to the macros."

@code _id="encode_smd_var"\
      type="exec"\
      src="from .utility import HtmlUtils;print(HtmlUtils.encode_smd_var('{{self.v}}'))"\
      v="self._help"\
      _help="[sp.2]*{{self._}}(v=\"var_to_encode\")*[bb]\
[sp.4]**v** = existing variable / attribute to markdown as smd[bb]\
[sp.4]Same as code.encode_smd, but takes an existing variable or attribute name to operate on"

@code _id="datetime_stamp"\
      type="exec"\
      src="from time import strftime;print(strftime(\"{{self.fmtstr}}\"))"\
      fmtstr="%Y%m%d @ %H:%M:%S"\
      _help="[sp.2]*{{self._}}(fmtstr=\"%Y%m%d @ %H:%M:%S\")*[bb]\
[sp.4]**fmtstr** is a Python strftime format string. The default format is: %Y%m%d @ %H:%M:%S[bb]\
[sp.4]**NOTE:** Unless you don't like the default format, you normally don't specify **fmtstr**"

@code _id="repeat"\
      type="eval"\
      src="print('{}'.format('{{self.t}}'*{{self.c}}))"\
      t="{{self._help}}"\
      c="1"\
      _help="[sp.2]*{{self._}}(t=\"chars to repeat\" c=\"# to repeat\")*[bb]\
[sp.4]**t** = character or string to repeat[b]\
[sp.4]**c** = number of times to repeat[bb]\
[sp.4]Example: code.repeat(t=\"%\" c=\"42\") will print 42 \"%\" percent characters"

@code _id="get"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.get_ns_var('{{self.v}}')"\
      v="variable_name"\
      _help="[sp.2]*{{self._}}(v=\"variable_name\")*[bb]\
[sp.4]**v** - variable / attribute name to get[bb]\
[sp.4]Emits the value of the variable / attribute **v**"

@code _id="get_value"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.get_ns_var('$.v', $.ret_type, $.escape, $.esc_smd)"\
      v="variable_name"\
      ret_type="9"\
      escape="False"\
      esc_smd="False"\
      _help="[sp.2]*{{self._}}(v=\"variable_name\" ret_type=\"0|1|2|3|9\" escape=\"True|False\" esc_smd=\"True|False\")*[bb]\
[sp.4]**v** - variable / attribute name to get[bb]\
[sp.4]**ret_type** - how to emit the value (0, 1, 2, 3 or 9)[b]\
[sp.6]**0** - will return the value raw i.e. not marked down[b]\
[sp.6]**1** - will return the value with the initial markdown pass, but without handling delayed expansion[b]\
[sp.6]**2** - will return the after replacing {{ with [ and }} with ][b]\
[sp.6]**3** - will return the after replacing **self.** with **ns.varname.**[b]\
[sp.6]**9** - will return the marked down value (default)[bb]\
[sp.4]**escape** - True to escape the HTML, False otherwise (default)[bb]\
[sp.4]**esc_smd** - True to escape the SMD, False otherwise (default)[bb]\
[sp.4]Emits the value of the variable / attribute **v**"

@code _id="get_default"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.default('$.v', '$.default')"\
      v="var or attr name"\
      default="default value"\
      _help="[sp.2]*{{self._}}(v=\"variable_name\", default=\"default value\")*[bb]\
[sp.4]**v** - The variable / attribute name to get[b]\
[sp.4]**default** - value to return if **v** is not defined[bb]\
[sp.4]Returns the value of **v** unless undefined, in which case it returns **default**"

@code _id="pushline"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.pushline('{{self.t}}')"\
      t="{{self._help}}"\
      _help="[sp.2]*{{self._}}(t=\"line to push onto input stream\")*[bb]\
[sp.4]t = string to push onto input stream[bb]\
[sp.4]**NOTE:** This macro does NOT split the string on the newline \n character. It will give[b]\
[sp.4]the illusion of doing so, but the newline will be treated as white space by a[b]\
[sp.4]browser. To push multiple lines, use either code.pushlines or code.pushvar.[bb]\
[sp.4]See also: code.pushlines, code.pushvar"

@code _id="pushlines"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.pushlines('{{self.t}}')"\
      t="{{self._help}}"\
      _help="[sp.2]*{{self._}}(t=\"lines to push onto input stream. separate lines with \n\")*[bb]\
[sp.4]t = string to push onto input stream[bb]\
[sp.4]**NOTE:** You can push multiple lines by inserting \n characters into the var/attr[bb]\
[sp.4]See also: code.pushline, code.pushvar"

@code _id="pushvar"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.pushvar('{{self.v}}')"\
      v="self._help"\
      _help="[sp.2]*{{self._}}(t=\"variable whose value will be pushed onto input stream. separate lines with \n\")*[bb]\
[sp.4]v = existing variable / attribute to push onto input stream[bb]\
[sp.4]**NOTE:** You can push multiple lines by inserting \n characters into the var/attr[b]\
[sp.4]e.g. if var.x=\"line1\nline2\" then pushvar(v=\"var.x\") inserts two lines:[bb]\
[sp.6]line1[b]\
[sp.6]line2[bb]\
[sp.4]See also: code.pushline, code.pushlines"

@code _id="ln_alias"\
      type="exec"\
      src="from .utility import CodeHelpers;print('@set _ns=\"link\" _id=\"{0}\" \
      {1}=\"{3}{0}.&lt;{4}{2}{3}{0}.&gt;{4}\"'.format('{{self.nm}}', \
      '{{self.attr}}', '{{self.lt}}', CodeHelpers.b(0), CodeHelpers.b(1)))"\
      nm="linkname" attr="_attr_name" lt="NEW_LINK_TEXT_HERE"\
      _help="[sp.2]*{{self._}}(**nm=**\"existing_link_name\", **attr=**\"_new_PRIVATE_attr_name\", **lt=**\"new link text\")*[bb]\
[sp.4]**nm** - The name of the existing @link variable you are adding an alias to[b]\
[sp.4]**attr** - The name of a new PRIVATE attribute that will be added[b]\
[sp.4]**lt** - The new link text you want to use for the hyperlink[bb]\
[sp.4]This macro adds a new alias for an existing link. That is, alternate text for the same underlying anchor.[bb]\
[sp.4]**NOTE:** Be sure you specify a PRIVATE attribute i.e. begins with ***_*** (underscore). If you do not, you[b]\
[sp.4]will create an infinite recursion during markdown because the open tag will reference the new attribute!"

@code _id="append"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.append('{{self.attr1}}', '{{self.attr2}}')"\
      attr1="ns.var.attr"\
      attr2="ns.txtvar.attr"\
      _help="[sp.2]*{{self._}}(attr1=\"ns.var.attr\", attr2=\"ns.var.attr with text to append\")*[bb]\
[sp.4]**attr1** - attribute to append text string to[b]\
[sp.4]**attr2** - attribute containing the text to append to **attr1**[bb]\
[sp.4]Appends text from **attr2** to existing attribute **attr1**."

@code _id="equals"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.equals('{{self.v1}}', '{{self.v2}}', '{{self.true}}', '{{self.false}}')"\
      v1="_ns.var.attr_"\
      v2="_ns.txtvar.attr_"\
      true="_ns.var.true_"\
      false="_ns.var.false_"\
      _help="[sp.2]*{{self._}}(v1=\"ns.var.attr1\", v2=\"ns.var.attr2\" true=\"ns.var.attr3\" false=\"ns.var.attr4\")[bb]*\
[sp.4]**v1** - attribute 1 for comparison[b]\
[sp.4]**v2** - attribute 2 for comparison[b]\
[sp.4]**true** - attribute to push if **v1** == **v2**[b]\
[sp.4]**false** - attribute to push if **v1** != **v2**[bb]\
[sp.4]Compare attribute **v1** to attribute **v2** and push line onto input stream based on results.[bb]\
[sp.4]This macro does a case-sensitive string comparison of **v1** and **v2**"

@code _id="wrap_stack"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.wrap_stack('{{self.w}}', {{self.encode}})"\
      w="*"\
      encode="False"\
      _help="[sp.2]*{{self._}}(w=\"&lt; | &gt; | # | tag.&lt; | or tag.&gt;\" [encode=\"True | False\"])*[bb]\
[sp.4]**w** = what you want to get from the wrap stack.[b]\
[sp.6][E.lt] - Will print the opening wrap tag[b]\
[sp.6][E.gt] - Will print the closing wrap tag[b]\
[sp.6]# - Will print the current wrap tag index[b]\
[sp.6]tag.[E.lt] - Will print the opening wrap tags in text form[b]\
[sp.6]tag.[E.gt] - Will print the closing wrap tags in text form[bb]\
[sp.4]**encode** = True if you want the HTML escaped, False for raw (default)[bb]\
[sp.4]See the documentation on @wrap for details on how to use this macro"

@code _id="replace"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.replace('{{self.var}}', '{{self.val}}', '{{self.str}}')"\
      var="varname_to_replace"\
      val="value_to_insert"\
      str="string to operate on"\
      _help="[sp.2]*{{self._}}(var=\"search_str\", val=\"attr_with_rep_val\" str=\"ns.var.attr to operate on\")*[bb]\
[sp.4]**var** - the string we are searching for[b]\
[sp.4]**val** - attribute containing replacement string[b]\
[sp.4]**str** - attribute containing string to operate on[bb]\
[sp.4]Replaces all occurrences of **var** with **val** in **str** and then push **str** onto input stream.[b]\
[sp.4]**NOTE:** Does NOT modify the attribute **str** in memory; simply pushes modified string onto input stream."

@code _id="attr_replace"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.attr_replace('{{self.s_str}}', '{{self.r_var}}', '{{self.attr}}', {{self.repl_nl}})"\
      s_str="string_to_replace"\
      r_var="variable with new_value"\
      attr="ns.var.attr"\
      repl_nl="True"\
      _help="[sp.2]*{{self._}}(s_str=\"search_str\", r_var=\"attr_with_rep_val\" attr=\"ns.var.attr to operate on\" repl_nl=\"True | False\")*[bb]\
[sp.4]**s_str** - the string we are searching for[b]\
[sp.4]**r_var** - attribute containing replacement string[b]\
[sp.4]**attr** - attribute containing string to operate on[b]\
[sp.4]**repl_nl** - replace escaped newline with newline (default:True)[bb]\
[sp.4]Replaces all occurrences of **s_str** with **r_var** in **attr** and updates **attr**.[b]\
[sp.4]**NOTE:** Like **code.replace** except modifies **attr** directly and does NOT push anything onto the input stream."

@code _id="attr_replace_value"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.attr_replace_value('{{self.attr}}', '{{self.value}}', {{self.repl_nl}})"\
      attr="ns.var.attr"\
      value="new_value"\
      repl_nl="True"\
      _help="[sp.2]*{{self._}}(attr=\"ns.var.attr to operate on\" value=\"new value\" repl_nl=\"True | False\")*[bb]\
[sp.4]**attr** - attribute whose value we are to replace[b]\
[sp.4]**value** - replacement value[b]\
[sp.4]**repl_nl** - replace escaped newline with newline (default:True)[bb]\
[sp.4]Replaces **attr** with **value**."

@code _id="attr_replace_str"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.attr_replace_str('{{self.s_str}}', '{{self.r_str}}', '{{self.attr}}', {{self.repl_nl}})"\
      s_str="string_to_replace"\
      r_str="new_value"\
      attr="ns.var.attr"\
      repl_nl="True"\
      _help="[sp.2]*{{self._}}(s_str=\"search_str\", r_str=\"repl_str\" attr=\"ns.var.attr to operate on\" repl_nl=\"True | False\")*[bb]\
[sp.4]**s_str** - the string we are searching for[b]\
[sp.4]**r_str** - the replacement string[b]\
[sp.4]**attr** - attribute containing string to operate on[b]\
[sp.4]**repl_nl** - replace escaped newline with newline (default:True)[bb]\
[sp.4]Replaces all occurrences of **s_str** with **r_str** in **attr** and updates **attr**.[b]\
[sp.4]**NOTE:** Like **code.attr_replace**, but accepts replacement string directly instead of indirectly via attribute."

@code _id="dump"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.dump('{{self.ns}}', '{{self.name}}', {{self.format}}, {{self.whitespace}}, {{self.help}})"\
      ns="var"\
      name=".*"\
      format="False"\
      whitespace="False"\
      help="False"\
      _help="[sp.2]*{{self._}}(ns=\"namespace\", name=\"var name regex\" format=\"False\" whitespace=\"False\" help=\"False\")*[bb]\
[sp.4]**ns** - the namespace that **name** is in[b]\
[sp.4]**name** - the variable/attribute name regex to dump[b]\
[sp.4]**format** - use formatting to aid readability[bb]\
[sp.4]**whitespace** - include prefix whitespace (HTML entities) and breaks [E.lt]br /[E.gt][bb]\
[sp.4]**help** - dump the help attribute value (if present)[bb]\
[sp.4]Dumps one or more variables that match **name**, formatting according to **format** and **whitespace**.[bb]\
[sp.4]**NOTE:** The default values work best when running **smd** interactively."

@var _id = "vpl"\
      attrlist="1,2,3,4,5"\
      1="Line 1" 2="Line 2" 3="Line 3" 4="Line 4" 5="Line 5"

@code _id="pushlist"\
      type="exec"\
      src="from .utility import CodeHelpers;CodeHelpers.pushlist('{{self.attrlist}}')"\
      attrlist="var.vpl.attrlist"\
      _help="[sp.2]*{{self._}}(attrlist=\"var.attr.list\")*[bb]\
[sp.4]**attrlist** - an existing variable or attribute[b]\
[sp.6]If **attrlist** is a variable, then that variable *must* contain an attribute named **attrlist**.[b]\
[sp.6]If **attrlist** is an attribute, then that attribute *must* contain a list of other attributes in the same variable.[bb]\
[sp.4]This macro pushes one or more lines specified by **attrlist** onto the input stream. The attributes must be in the same variable.[bb]\
[sp.4]**NOTE:** See **var.vpl** for a template of what the **attrlist** variable should look like."

</pre></div>
<a id="ug_code_misc"></a>
<div class="extras" style="border-bottom:2px solid black"><h3>A few more things about &#64;code</h3></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> FINISH THIS SECTION</p></div>
<div class="extras"><p>Here are just a few more things about the <strong>&#64;code</strong> namespace to help drive home your understanding of the declaration and usage of variables within it.</p></div>
<div class="extras"><p><strong>&#64;code</strong> attributes cannot be changed via _null_ or when markdown is applied. You must use <strong>&#64;set</strong> to do that</p></div>
<div class="extras"><p>Not specific to <strong>&#64;code</strong>, but you'll likely encounter it here: You cannot use () inside parameter strings, as it breaks the parser... Workaround using the <strong>E.lp/E.rp</strong> constants.</p></div>
<div class="extras"><p>Which leads to this issue: you cannot nest markdown variables that require parameters... they require that you use () inside parameter strings... no workaround for this right now.</p></div>
<div class="extras"><p>Here's an example:</p></div>
<div class="extras"><p><strong>[encode_smd(t="<var.revision.plain(v=\"1.4.2\")>")]</strong> - Doesn't work</p></div>
<div class="extras"><p><strong>&lsqb;var.revision.plain&lpar;v="1.4.2"&rpar;&rsqb;</strong> - Works just fine.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="building"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Creating Sophisticated Layouts</h2></div>
<div class="extras"><p>Now that you've got the basics out of the way, it's time to dig in a little deeper and look at the tools available to create bigger and more sophisticated layouts for your documents. In the chapters that follow, we will look at importing files in order to create reusable building blocks, managing the default block tags emitted when no specific HTML markdown is specified, and a set of common <strong>div</strong>'s that you can use and/or customize to your specific needs.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="imports"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Importing, Embedding and Watching files</h2></div>
<div class="extras"><p>In this chapter, we will cover three different keywords used in <strong>smd</strong>:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><strong>&#64;import</strong> - Used to import markdown files</li>
<li><strong>&#64;embed</strong> - Used to embed files directly into the output stream</li>
<li><strong>&#64;watch</strong> - Used to manually add a file to the watch list</li>
</ul></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>The &#64;import keyword</h3></div>
<div class="extras"><p>The most often used of these keywords is <strong>&#64;import</strong>. It begins during <strong>smd</strong> startup, when it is used to import the builtins, and continues throughout processing depending on the complexity of your markdown documents.</p></div>
<div class="extras"><p>A few things that are import to keep in mind when using <strong>&#64;import</strong>:</p></div>
<div class="extras"><ul class="ulist">
<li>Any given file will only be <strong>&#64;import</strong>'ed one time. Subsequent attempts are ignored.</li>
<li>These files can and usually do contain markdown</li>
<li>They can be nested to any level</li>
<li><strong>&#64;wrap</strong> tags used within any imported file are automatically cleared when EOF is reached on the imported file.</li>
<li>If a path begins with '$' or '$/', they are replaced with the path of the currently opened file; this allows relative importing of dependencies.</li>
</ol></div>
<div class="extras"><p>Here are some examples of <strong>&#64;import</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Example &#64;import statements</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<code>&nbsp;&nbsp;&nbsp;&nbsp;@import "filename"</code>
<code>&nbsp;&nbsp;&nbsp;&nbsp;@import "/abs/path/to/filename"</code>
<code>&nbsp;&nbsp;&nbsp;&nbsp;@import "../relative/path/to/filename"</code>
<code>&nbsp;&nbsp;&nbsp;&nbsp;@import "$/relative/to/current/filename"</code>
</pre>
</div>
<div class="extras"><p>The <strong>&#64;import</strong> statement can be used to include documents that contain commonly used contents for your scripts, such as common aliases, links, headers, sections, etc. You can use fully qualified paths, relative paths, or paths based on the current file being processed. The latter uses the symbol '$' to designate that the path to this file should begin with the path the current file being processed. For example, assume the current file being processed is: /mydir/myfile.md. The statement:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;import "$/vars.md"</pre></div>
<div class="extras"><p>Would be the same as writing <strong>@import "/mydir/vars.md"</strong>. This is useful because it doesn't require that you use absolute paths for everything. The path can be specified as either <strong>'$/path/filename'</strong> or <strong>'$path/filename'</strong>. In other words, you can specify the '/' after '$' or leave it off, whatever your preference is.</p></div>
<a id="embed"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>The &#64;embed keyword</h3></div>
<div class="extras"><p>The <strong>&#64;embed</strong> keyword is used to embed files directly into the output stream. It's a bit like <strong>&#64;import</strong>, except that the files are <strong>not</strong> parsed. The contents are embedded directly into the output stream. In most cases, you will use <strong>&#64;embed</strong> to embed HTML markdown directly into your output stream, but technically, it can be used to embed anything. Just make sure that whatever you embed is properly formatted for the context, as there isn't any way to modify it. Here are few fun facts about <strong>&#64;embed</strong>:</p></div>
<div class="extras"><ul class="ulist">
<li>Any given file can be <strong>&#64;embed</strong>'ed as many times as you want.</li>
<li>These files usually do <strong>not</strong> contain <strong>smd</strong> markdown, although it's okay if they do, the content just won't be parsed...</li>
<li>Like <strong>&#64;import</strong>, <strong>&#64;embed</strong> files can be nested to any level</li>
<li>Also like <strong>&#64;import</strong>, <strong>&#64;embed</strong> supports the relative import prefix of '$' or '$/'</li>
</ol></div>
<div class="syntax"><p class="divTitle">&#64;embed Syntax</p>
<p><br /></p>
<p>&#64;embed "/path/filename" &lsqb; &lt;escape | esc&gt; = "True" | "Yes" &rsqb;</p>
</div>
<div class="extras"><p>The &#64;embed keyword supports an option <strong>escape</strong> or <strong>esc</strong> that allows you to specify that the output should be encoded HTML:</p></div>
<div class="extras"><p><span class="indent"><span class="red"><span style="font-size:142%">&lt;</span></span> becomes <span class="red"><span style="font-size:120%">&amp;lt;</span></span>&nbsp;&nbsp;<span class="red"><span style="font-size:142%">&gt;</span></span> becomes <span class="red"><span style="font-size:110%">&amp;gt;</span></span>&nbsp;&nbsp;...</span></p></div>
<div class="extras"><p>This allows you to display HTML encoded files as text, otherwise the browser would interpret and render it as HTML. The default is <strong>False</strong>.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>Example &#64;embed statements</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&#64;embed "myembedfile.html"<br />&nbsp;&nbsp;&nbsp;&nbsp;&#64;embed "myembedfile.html" escape="true"</pre></div>
<a id="watch"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>The &#64;watch keyword</h3></div>
<div class="extras"><p><strong>&#64;watch</strong> isn't used very often, since most files that are either imported, embedded or otherwise handled via one of the command line interfaces are automatically added to the watch list.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>What is the watch list?</h3></div>
<div class="extras"><p>The watch list is simply a list of all the files that the <strong>smd</strong> parser has encountered while performing markdown on your content. The higher level command line utilities such as <strong>smdparse</strong> and <strong>ismd</strong> also add files to the watch list, but for the most part, it's the underlying <strong>smd</strong> parser that is responsible for keeping track.</p></div>
<div class="extras"><p>Interestingly enough, as far as <strong>smd</strong> is concerned, the watch list isn't very important. It doesn't act on it in any way, but it's useful for other programs and utilities, such as <strong>ismd</strong>, as a way to detect changes occurring to files that are directly involved with the current document being processed, and act on it. In the case of <strong>ismd</strong>, for example, when changes to the files that make up a document are detected, it will invoke the parser again to refresh the content, and then notify all the output monitors that they need to update their output windows. This is extremely useful while developing new content, because it gives you a sort of WYSIWYG experience, always updating the output view as you make changes!</p></div>
<div class="extras"><p>So why do we need <strong>&#64;watch</strong> then? I mean, if <strong>smd</strong> and other command line utilities already track everything, why do I need it? Good question, grasshopper. The most common reason ties back to the <strong>&#64;embed</strong> command. Since the content of embedded files is not parsed or scanned in any way, there isn't a way for the parser to know if that content references something that needs to be monitored. Enter <strong>&#64;watch</strong>. Using this keyword, you can add files to the watch list, and then if they are changed, and one of the underlying utilities that monitors the watch list detects it, it will reparse the content and update the output monitors. Pretty cool, huh?</p></div>
<div class="extras"><p>The usage is simple, identical to <strong>&#64;embed</strong> as a matter of fact (except that the <strong>escape</strong> option isn't supported -- nor does it make sense here):</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>Example &#64;watch statement</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&#64;watch "mywatchfile.html"</pre></div>
<div class="extras"><p>You can use the <strong>&#64;dump</strong> keyword with option <strong>tracked=</strong> to review the files that are currently being watched. This is a good way to just make sure that your watch command is working as expected during the creation process. For example, let's say you <strong>&#64;embed</strong> the file "myscript.html" which includes a <strong>&lt;script&gt;</strong> tag that references <strong>myjavascript.js</strong>. We could make sure that our <strong>&#64;watch</strong> markdown is correct by using the following markdown:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="source"><code style="font-size:1.4em;font-weight:bold">Debug hack for making sure my &#64;watch file is monitored</code>
<code style="font-size:1.2em"><br /><br /></code>
<code style="font-size:1.2em"><em>// first let's dump the embed file inline escaped</em><br /></code>
<code style="font-size:1.2em"><strong>&#64;embed '$/../import/myscript.html' escape="true"<br /></strong></code>
&lt;script src="myjavascript.js"&gt;&lt;/script&gt;

<code style="font-size:1.2em"><br /><br /></code>
<code style="font-size:1.2em">[<em>smdcomment.il] now embed it again, but this time don't escape it</em><br /></code>
<code style="font-size:1.2em"><strong>&#64;embed '$/../import/myscript.html'<br /></strong></code>
<script src="myjavascript.js"></script>

<code style="font-size:1.2em"><br /></code>
<code style="font-size:1.2em"><em>// now let's see which files are being watched</em><br /></code>
<code style="font-size:1.2em"><strong>&#64;dump tracked=".*(myjavascript.js|myscript.html)"</strong></code>
<div class="variables">
<code>
----------------------------------------<br />
Files seen during parsing: .*(myjavascript.js|myscript.html)<br />
----------------------------------------<br />
&nbsp;&nbsp;<em>/Users/ken/Dropbox/shared/src/script/smd/docs/import/myscript.html</em><br />
</code>
</div>
<code style="font-size:1.2em"><br /></code>
<code style="font-size:1.2em"><em>// okay, so only the </em>myscript.html<em> was picked up, as expected. Let's add a watch for the JS file...</em><br /></code>
<code style="font-size:1.2em"><strong>&#64;watch '$/../import/myjavascipt.js'</strong></code>
<code style="font-size:1.2em"><br /><br /></code>
<code style="font-size:1.2em"><em>// Let's check again to see what's being monitored...</em><br /></code>
<code style="font-size:1.2em"><strong>&#64;dump tracked=".*(myjavascript.js|myscript.html)"</strong></code>
<div class="variables">
<code>
----------------------------------------<br />
Files seen during parsing: .*(myjavascript.js|myscript.html)<br />
----------------------------------------<br />
&nbsp;&nbsp;<em>/Users/ken/Dropbox/shared/src/script/smd/docs/import/myscript.html</em><br />
&nbsp;&nbsp;<em>/Users/ken/Dropbox/shared/src/script/smd/docs/import/myjavascript.js</em><br />
</code>
</div>
<code style="font-size:1.2em"><br /></code>
<code style="font-size:1.2em"><em>// Cool! Now both files are being watched ...</em><br /></code>
</div>
</div>
<div class="extras"><p>When you review the preceding section in the docs, you will notice a lot more than is actually needed in practice. This is because I wanted to show the steps and the actual content to help you understand all the steps. In reality, all you needed was:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Just the needed steps for the debug hack...</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<strong>&#64;embed</strong> 'path/to/myscript.html'
<strong>&#64;watch</strong> 'path/to/myjavascript.js'
<strong>&#64;dump</strong> tracked=".*(myjavascript.js|myscript.html)"
</pre></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Summary of &#64;import, &#64;embed and &#64;watch</h3></div>
<div class="extras"><p>That wraps up the section on importing, embedding and watching files. Onward!</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_wrap"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>@wrap and @parw</h2></div>
<div class="extras"><p>By default, <strong>smd</strong> does not place any type of wrapper around emitted contE. This is a good default, however, many times adding wrappers can greatly assist your formatting efforts. This is where @wrap comes in handy...</p></div>
<div class="extras"><p>First, let's review the complete syntax for both <strong>&#64;wrap</strong> and <strong>&#64;parw</strong></p></div>
<div class="syntax"><p class="divTitle">@wrap and @parw command syntax</p>
<p>&nbsp;</p>
<p><span class="indent"><strong>&#64;wrap</strong> <strong>&lt;html.tag &lsqb;, html.tag &lsqb;, ...]] | &lsqb;nop | null]&gt;</strong><br /><br /></span></p>
<p><span class="indent"><strong>&#64;parw</strong> <strong>&lsqb;&ast; | all | &num; &rsqb;</strong></span></p>
<p><br /><br /></p>
<p><span class="indent"><span class="indent"><em>NOTE: tag variables passed to <strong>&#64;wrap</strong> <strong>must</strong> be in the <strong>@html</strong> namespace.</span></span></em></p>
</div>
<div class="extras"><p>The concept for <strong>&#64;wrap</strong> is straightforward: whenever anything is written to the output stream, it will be wrapped with the specified variable from the <strong>&#64;html</strong> namespace. Let's look at an example, <strong>smd</strong> session:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@wrap demonstration</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em>// By default, there are no wrap tags in effect</em>
This line will not have any tags
<em>Output --></em>This line will not have any tags
&#64;wrap p
This line will be wrapped with HTML p tags
<em>Output --></em>&lt;p&gt;This line will be wrapped with HTML p tags&lt;/p&gt;
This line also...
<em>Output --></em>&lt;p&gt;This line also...&lt;/p&gt;
&#64;parw
But not this line
<em>Output --></em>But not this line
</pre></div>
<div class="extras"><p>See how that works? When we issue the <strong>@wrap p</strong> command, subsequent output is wrapped with &lt;p&gt;&lt;/p&gt; tags. It remains in effect until it is cleared with the <strong>@parw</strong> command, or if inside an <strong>@import</strong>'ed file, when EOF is reached on the current file.</p></div>
<div class="extras"><p class="note">It's important to note that any <strong>@wrap</strong> tags that are in effect during the processing of an imported file will be cleared when EOF is reached on that imported file, so that when you return to the parent file, the <strong>@wrap</strong> tag stack for it will be restored to what it was before the file was <strong>@import</strong>'ed.</p></div>
<div class="extras"><p><strong>&#64;wrap</strong> tags can be nested as well. Consider the following example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@wrap tag nesting</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;wrap div
This line will be wrapped with HTML div tags
<em>Output --></em>&lt;div&gt;This line will be wrapped with HTML div tags&lt;/div&gt;
&#64;wrap p
This line, however, will be wrapped in HTML p tags
<em>Output --></em>&lt;p&gt;This line, however, will be wrapped in HTML p tags&lt;/p&gt;
&#64;parw
And now we are back to being wrapped in HTML div tags again
<em>Output --></em>&lt;div&gt;And now we are back to being wrapped in HTML div tags again&lt;/div&gt;
</pre></div>
<div class="extras"><p>You can nest as deeply as you wish.</p></div>
<div class="extras"><p>In addition, you are not limited to a single HTML tag when wrapping. Take a look at this example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@wrap tag multiples</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;wrap div, p
This line will be wrapped with HTML both a div and a p tag
<em>Output --></em>&lt;div&gt;&lt;p&gt;This line will be wrapped with HTML both a div and a p tag&lt;/p&gt;&lt;/div&gt;
</pre></div>
<div class="extras"><p>It is important to distinguish that if multiple tags are listed on a single <strong>@wrap</strong> tag, the parser considers this a single wrap tag with multiple elements. That is, when you use <strong>@parw</strong>, it will clear a single item from the stack, and in the case of a multiple <strong>@wrap</strong> tag, it clears all of the tags associated with that tag. Let's demonstrate it just to be sure:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Clearing @wrap tag multiples</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
Begin by showing that input is not wrapped by default
<em>Output --></em>Begin by showing that input is not wrapped by default
&#64;wrap div, p
This line will be wrapped with HTML both a div and a p tag
<em>Output --></em>&lt;div&gt;&lt;p&gt;This line will be wrapped with HTML both a div and a p tag&lt;/p&gt;&lt;/div&gt;
&#64;parw
And now this line has no tags
<em>Output --></em>And now this line has no tags
</pre></div>
<div class="extras"><p>If you issue <strong>&#64;parw</strong> when the wrap stack is empty, the parser issues a warning:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">@parw with empty wrap stack</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;parw
WARNING: wrapper stack is empty&lt;br /&gt;
</pre></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Additional options</h3></div>
<div class="extras"><p>The <strong>&#64;wrap</strong> has two specialized parameters <strong>nop</strong> and <strong>null</strong> which do the same thing: they temporarily suspend wrapping of content with the previously specified <strong>&#64;wrap</strong> tag. Here's an example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Temporarily suspend wrapping of content</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;wrap div, p
This line will be wrapped with HTML both a div and a p tag
<em>Output --></em>&lt;div&gt;&lt;p&gt;This line will be wrapped with HTML both a div and a p tag&lt;/p&gt;&lt;/div&gt;
&#64;wrap null
And now this line has no tags
<em>Output --></em>And now this line has no tags
&#64;parw
And now this line will have the previously specified wrap tags of div, p
<em>Output --></em>&lt;div&gt;&lt;p&gt;And now this line will have the previously specified wrap tags of div, p&lt;/p&gt;&lt;/div&gt;
</pre></div>
<div class="extras"><p>The <strong>&#64;parw</strong> also accepts parameters: <span class="bold"><span style="font-size:120%">&ast; | all</span></span> or alternatively a <span class="bold"><span style="font-size:120%">&num;</span></span> specified how many tags to clear from the stack. By default, <strong>&#64;parw</strong> will clear a single item from the wrap stack. If you pass an integer <span class="bold"><span style="font-size:120%">n</span></span>, then it will attempt to clear <span class="bold"><span style="font-size:120%">n</span></span> items from the wrap stack. If you pass either <span class="bold"><span style="font-size:120%">&ast;</span></span> or <span class="bold"><span style="font-size:120%">all</span></span>, then it will clear all items from the wrap stack, but only those that were added within the current scope. The current scope just means the current <strong>&#64;import</strong> file, and it goes back to the note we made up front about remove items from the wrap stack. Here are a couple of examples of the parameters to <strong>&#64;parw</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Clearing the wrap stack</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;wrap div, p
This line will be wrapped with HTML both a div and a p tag
<em>Output --></em>&lt;div&gt;&lt;p&gt;This line will be wrapped with HTML both a div and a p tag&lt;/p&gt;&lt;/div&gt;
&#64;wrap li
And now this line a list item tag
<em>Output --></em>&lt;li&gt;And now this line a list item tag&lt;/li&gt;
&#64;parw &#42;
And now this line has no tags
<em>Output --></em>And now this line has no tags
&nbsp;
&#64;wrap div
This line will be wrapped with HTML div tags
<em>Output --></em>&lt;div&gt;This line will be wrapped with HTML div tags&lt;/div&gt;
&#64;wrap p
This line, however, will be wrapped in HTML p tags
<em>Output --></em>&lt;p&gt;This line, however, will be wrapped in HTML p tags&lt;/p&gt;
&#64;parw 25
WARNING: only 2 items found on the stack that were cleared&lt;br /&gt;
</pre></div>
<div class="extras"><p>The final thing we'll cover is a specialized <strong>&#64;code</strong> macro called <strong>wrap_stack</strong>. This macro gives you some additional options to use with <strong>&#64;wrap</strong> tags for a few specialized cases. Here are the details on this macro.</p></div>
<div class="extras"><p>The first thing is the macro itself, here's the builtin help string for it:</p></div>
<div class="syntax"><p class="divTitle">code.wrap_stack help string</p>
<p>&nbsp;&nbsp;<em>wrap_stack(w="< | > | # | tag.< | or tag.>" [encode="True | False"])</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>w</strong> = what you want to get from the wrap stack.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; - Will print the opening wrap tag<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; - Will print the closing wrap tag<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# - Will print the current wrap tag index<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag.&lt; - Will print the opening wrap tags in text form<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag.&gt; - Will print the closing wrap tags in text form<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>encode</strong> = True if you want the HTML escaped, False for raw (default)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;See the documentation on @wrap for details on how to use this macro</p>
</div>
<div class="extras"><p>If you invoke it with no parameters <em>&lsqb;code.wrap_stack&rsqb;</em>, it will return the complete starting and ending tags for the current wrap tag.</p></div>
<div class="extras"><p>If you pass <span class="red"><span style="font-size:150%">&lt;</span></span>, it returns the opening tag(s) sequence, and conversely, <span class="red"><span style="font-size:150%">&gt;</span></span> returns the closing tag(s).</p></div>
<div class="extras"><p>If you pass <span class="red"><span style="font-size:150%">&num;</span></span>, it returns the current stack size, which is really only useful for debugging purposes.</p></div>
<div class="extras"><p>Finally, are the options <span class="red"><span style="font-size:120%">tag.<</span></span> and <span class="red"><span style="font-size:120%">tag.></span></span>. These are similar to the <span class="red"><span style="font-size:120%">&lt;&nbsp;&gt;</span></span> options, but they return the tags in text form instead of as the actual HTML markup. <span class="red"><span style="font-size:120%">tag.<</span></span> is the most useful, because you can use it to maintain the current <strong>&#64;wrap</strong> tags, while adding one or more additional tags.</p></div>
<div class="extras"><p>Here are some examples:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Viewing the wrap stack</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;wrap div, p
&lsqb;code.wrap_stack&rsqb;
&lt;div&gt;&lt;p&gt;&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;&lt;/p&gt;&lt;/div&gt;
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack&rsqb;
&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack(w="&lt;")]
&lt;div&gt;&lt;p&gt;
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack(w="&gt;")]
&lt;/p&gt;&lt;/div&gt;
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack(w="&num;")]
1
&nbsp;
&#64;&#64;&lsqb;code.wrap_stack(w="tag.<")]
div,p
</pre></div>
<div class="extras"><p>At first glance, the initial call to <strong>&lsqb;code.wrap_stack&rsqb;</strong> might look like a bug, because the tag appears twice. However, this is behaving properly, since technically, a wrap tag of <strong>div,p</strong> is currently in effect, and thus the output from the call to <strong>code.wrap_stack</strong> is being wrapped in the tags! On the subsequent calls, you'll notice we prefix each line with <em><strong>&commat;&commat;</strong></em>, something we haven't discussed yet. This is the <strong>raw</strong> prefix, and when used at the start of any line, any wrap tags in effect are ignored.</p></div>
<div class="extras"><p>This concludes the chapter on <strong>&#64;wrap</strong> and <strong>&#64;parw</strong>.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="div"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Divs</h2></div>
<div class="extras"><p>In this chapter, we will discuss the predefined <strong>DIV</strong>'s that are declared inside the builtin file <strong>divs.md</strong>.</p></div>
<div class="extras"><p class="note red">
NOTE: If you have not read the chapters on <a href="#ug_ns_var"><strong>&#64;var</strong></a>, <a href="#ug_set_keyword"><strong>&#64;set</strong></a> and <a href="#ug_ns_html"><strong>&#64;html</strong></a>, stop right now and go read them. Otherwise, you might have trouble understanding the concepts that will be covered in this chapter...
</p></div>
<div class="extras"><p>The predefined DIVs in the <strong>divs.md</strong> builtin are organized into four types to give several options for your content. Let's start by looking at a summary of the divs that are available:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><span style="text-decoration:underline"><span class="green"><strong>Generic DIVs</strong></span></span></li>
<li><strong>&lsqb;section&rsqb;</strong> - Generic content</li>
<li><strong>&lsqb;section_pbb&rsqb;</strong> - Generic content but with the class <strong>pbb</strong> (i.e. page break before -- when printing)</li>
<li><strong>&lsqb;toc&rsqb;</strong> - Table of Contents</li>
<li><strong>&lsqb;syntax&rsqb;</strong> - Syntax content</li>
<li><strong>&lsqb;review&rsqb;</strong> - Review content</li>
<li><strong>&lsqb;review_pba&rsqb;</strong> - Review content with <strong>pba</strong> class (i.e. page break after -- when printing)</li>
<li><strong>&lsqb;plain&rsqb;</strong> - Plain content with class plainTitle (draws a bottom-border) after the title<br /><br /></li>
<li><span style="text-decoration:underline"><span class="green"><strong>Code DIVs</strong></span></span></li>
<li><strong>&lsqb;code&rsqb;</strong> - Code content - See notes for rendering details<br /><br /></li>
<li><span style="text-decoration:underline"><span class="green"><strong>Note DIVs</strong></span></span></li>
<li><strong>&lsqb;note&rsqb;</strong> - Note content - See notes for rendering details on this and remaining DIVs</li>
<li><strong>&lsqb;vo&rsqb;</strong> - Voiceover content</li>
<li><strong>&lsqb;box&rsqb;</strong> - Box content</li>
<li><strong>&lsqb;question&rsqb;</strong> - Question content</li>
<li><strong>&lsqb;greyout&rsqb;</strong> - Greyout content</li>
<li><strong>&lsqb;generic&rsqb;</strong> - Generic content</li>
<li><strong>&lsqb;important&rsqb;</strong> - Important content<br /><br /></li>
<li><span style="text-decoration:underline"><span class="green"><strong>List DIVs</strong></span></span></li>
<li><strong>&lsqb;ulist&rsqb;</strong> - Unordered bulleted list content</li>
<li><strong>&lsqb;ulistplain&rsqb;</strong> - Unordered list no bullets content</li>
<li><strong>&lsqb;olist&rsqb;</strong> - Ordered list with decimal numbers content</li>
</ul></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Generic DIVs</h3></div>
<div class="extras"><p>There four different styles of DIVs are predefined for you, and you can add more as well as customize these to your hearts content. Each of these has a similar interface, so let's see what that is, and how it is used. Only one of each different type will be covered, since the interface on the others is identical! We will start with the <em><strong>section</strong>-style</em> DIVs, of which you have <strong>section, section_pbb, toc, syntax, review, review_pba and plain</strong>.</p></div>
<div class="extras"><p>First, let's take a look at the actual definition of <strong>section</strong> and it's associated <strong>&#64;html</strong> and <strong>&#64;var</strong> variables:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">&#64;html Support for <strong>section</strong></code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>_section_div_=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>div<br />
&nbsp;&nbsp;<strong>class=</strong>section<br />
<br />
<strong>_section_p_=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>p<br />
&nbsp;&nbsp;<strong>class=</strong>divTitle<br />
<br />
<strong>_section_p_content_=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>&lt;{{self._tag}}{{self._public_attrs_}}&gt;&lt;/{{self._tag}}&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>p<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div style="margin-left:3.3em;margin-right:3.3em;border:2px solid black;background:lightgray">
<div class="extras"><p><div class="source"><code style="font-size:1.4em;font-weight:bold">&#64;var definition for <em>section</em>*</code></p></div>
<code style="font-size:1.2em"><div class="extras"><p></code>
<strong>section=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>@@ {{self.inline}}<br />
&nbsp;&nbsp;<strong>nd=</strong>@@{{self.inline_nd}}<br />
&nbsp;&nbsp;<strong>with_content=</strong>@@ {{self.wc_inline}}<br />
&nbsp;&nbsp;<strong>with_content_nd=</strong>@@ {{self.wc_inline_nd}}<br />
&nbsp;&nbsp;<strong>wc_inline=</strong>{{self.wc_open_inline}}{{self.wc_content}}{{self.wc_close_inline}}<br />
&nbsp;&nbsp;<strong>wc_inline_nd=</strong>{{self.wc_open_inline_nd}}{{self.wc_content}}{{self.wc_close_inline_nd}}<br />
&nbsp;&nbsp;<strong>wc_open=</strong>{{code.pushlines(t="@@{{self.wc_open_inline}}\n@wrap {{self.wrapID}}")}}<br />
&nbsp;&nbsp;<strong>wc_close=</strong>{{code.pushlines(t="@parw 1\n@@{{self.wc_close_inline}}")}}<br />
&nbsp;&nbsp;<strong>wc_open_nd=</strong>{{code.pushlines(t="@@{{self.wc_open_inline_nd}}\n@wrap {{self.wrapID}}")}}<br />
&nbsp;&nbsp;<strong>wc_close_nd=</strong>{{code.pushlines(t="@parw 1\n@@{{self.wc_close_inline_nd}}")}}<br />
&nbsp;&nbsp;<strong>inline=</strong>{{html._section_div_.&lt;}}{{html._section_p_.&lt;}}{{self.t}}{{html._section_p_.&gt;}}{{html._section_div_.&gt;}}<br />
&nbsp;&nbsp;<strong>wc_open_inline=</strong>{{html._section_div_.&lt;}}{{html._section_p_.&lt;}}{{self.t}}{{html._section_p_.&gt;}}<br />
&nbsp;&nbsp;<strong>wc_close_inline=</strong>{{html.div.&gt;}}<br />
&nbsp;&nbsp;<strong>wc_content=</strong>{{html._section_p_content_.&lt;}}{{self.c}}{{html.p.&gt;}}<br />
&nbsp;&nbsp;<strong>sID=</strong>section<br />
&nbsp;&nbsp;<strong>wrapID=</strong>_section_p_content_<br />
&nbsp;&nbsp;<strong>t=</strong>section default title string<br />
&nbsp;&nbsp;<strong>c=</strong>section default content data<br />
<br />
<code style="font-size:1.2em"></p></div></code>
<div class="extras"><p></div></p></div>
</div>
<div class="extras"><p>If you examine any of other styles in the <span style="text-decoration:underline"><span class="blue"><strong>Generic Groups</strong></span></span>, you will find they have an identical set of attributes/methods. So once you are familiar with one of them, you know how to use all of them! Here is the help string for the <strong>section</strong> var, which applies to all of the generic groups:</p></div>
<div class="syntax"><p class="divTitle">Built-in help string for section</p>
<p>&nbsp;&nbsp;<em>section(t=&#34;title&#34; c=&#34;content&#34;)</em><br /><br />&nbsp;&nbsp;<strong>Common Parameters</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>t</strong> - The title to use for the section div<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>c</strong> = The content to use for the section div<br /><br />&nbsp;&nbsp;<strong>Attributes</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>sID</strong> - the div identifier <strong>section</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>wrapID</strong> - the <strong>@wrap</strong> tag(s) <em>_section_p_content_</em><br /><br />&nbsp;&nbsp;<strong>Methods</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<em><strong>NONE</strong></em> - If no method specified, uses <strong>inline</strong> (<em>raw</em> i.e. prefixed with @@)<br />&nbsp;&nbsp;&nbsp;&nbsp;with_content(t,c) - <strong>wc_inline</strong> (<em>raw</em> i.e. @@ prefix)<br />&nbsp;&nbsp;&nbsp;&nbsp;inline(t) - insert section div with text <strong>t</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;wc_inline(t,c) - insert section div with title <strong>t</strong> and content <strong>c</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;wc_open(t) - open a section div with title <strong>t</strong> and <strong>@wrap _section_p_content_</strong> ready for content<br />&nbsp;&nbsp;&nbsp;&nbsp;wc_close - close section div opened with <strong>wc_open</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;wc_open_inline(t) - like <strong>wc_open</strong> but does not use <strong>@wrap</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;wc_close_inline - close section div opened with <strong>wc_open_inline</strong></p>
</div>
<div class="extras" style="border-bottom:2px solid black"><h3>&#64;raw Versions</h3></div>
<div class="extras"><p>Now let's try each of the methods using the default values, starting with <strong>&lsqb;section&rsqb;</strong>:</p></div>
<div class="section"><p class="divTitle">section default title string</p></div>
<div class="extras"><p>If we look at the HTML for it, you will see:</p></div>
<div class="syntax"><p class="divTitle">Raw HTML emitted by the &lsqb;section&rsqb; variable</p>
<p><br /></p>
<p><span class="indent">@@ &lt;div class="section"&gt;&lt;p class="divTitle"&gt;section default title string&lt;/p&gt;&lt;/div&gt;</span></p>
</div>
<div class="extras"><p>As mentioned, this is in the <strong>&#64;raw</strong> section, so the parser emits the double <strong>@@</strong> prefix, which prevents the output formatter from prefixing any <strong>&#64;wrap</strong> tags. Let's take a look at the remaining built-in attributes and how they render.</p></div>
<div class="extras"><p><strong>&lsqb;section.with_content&rsqb;</strong> renders like this:</p></div>
<div class="section"><p class="divTitle">section default title string</p><p>section default content data</p></div>
<div class="extras"><p>&lsqb;section.wc_open&rsqb; renders like this:</p></div>
<div class="section"><p class="divTitle">section default title string</p>
<p>and now we have to write <strong>&lsqb;section.wc_close&rsqb;</strong> which will close the previous div.</p>
<p>We can keep typing lines, though, and they are added to this section until you close it with <strong>&lsqb;section.wc_close&rsqb;</strong>.</p>
<p>Okay, the next line in the user docs will contain: <strong>&lsqb;section.wc_close&rsqb;</strong></p>
</div>
<div class="extras"><p>You can also nest them, let's look at an example of that. Here I will just write <strong>&lsqb;section.wc_open&rsqb;</strong> three times in a row, followed by three <strong>&lsqb;section.wc_close&rsqb;</strong> tags.</p></div>
<div class="section"><p class="divTitle">section default title string</p>
<div class="section"><p class="divTitle">section default title string</p>
<div class="section"><p class="divTitle">section default title string</p>
</div>
</div>
</div>
<div class="extras"><p>As we previously mentioned, all of the variables within a group contain the exact same attributes/methods. Given that, we can nest them within each other:</p></div>
<div class="section"><p class="divTitle">This is the section.wc_open markdown</p>
<div class="syntax"><p class="divTitle">This is the syntax.wc_open markdown</p>
<div class="toc"><p class="divTitle">This is the toc.wc_open markdown</p>
<div class="plain"><p class="plainTitle">This is the plain.wc_open markdown</p>
</div>
</div>
</div>
</div>
<div class="extras"><p>That is a good segue into changing the default values for these examples.</p></div>
<div class="extras"><p>All of these attributes (across all of the different div types) use the same attribute names for parameters. <strong>t</strong> for the title and <strong>c</strong> for the content. So, if we <strong>&lsqb;section.with_content&lpar;t="my title" c="my content"&rsqb;</strong>, we will see this:</p></div>
<div class="section"><p class="divTitle">mytitle</p><p>my content</p></div>
<div class="extras"><p>Similarly, if we write <strong>&lsqb;section&lpar;t="my different title"&rsqb;</strong>, we get:</p></div>
<div class="section"><p class="divTitle">my different title</p></div>
<div class="extras"><p>And now if we got back and use that same nested sequence from before, we would get:</p></div>
<div class="section"><p class="divTitle">my different title</p>
<div class="section"><p class="divTitle">my different title</p>
<div class="section"><p class="divTitle">my different title</p>
</div>
</div>
</div>
<div class="extras"><p>See how it used the "last" values for <strong>t</strong> and <strong>c</strong>? That's an important concept to remember, as it applies throughout <strong>smd</strong>. If we use the <strong>.with_content</strong> instead, we get:</p></div>
<div class="section"><p class="divTitle">my different title</p><p>my content</p></div>
<div class="extras"><p>See how that works? Remember, this goes back to the side effect discussed in the <a href="#ug_ns_var">@var Namespace</a> chapter that discussed when attribute values are updated they stay updated. So in this last example, the default values used were those from the previous time we used <strong>section</strong> in this chapter (I was going to say <em>section</em>, but it seems like I've worn that out already).</p></div>
<div class="extras"><p>Okay, now let's look at the <strong>inline</strong> versions of the <strong>&lsqb;section&rsqb;</strong> variable.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Inline Versions</h3></div>
<div class="extras"><p>Now, let's take a look at the <strong>_inline</strong> versions of the attributes. The only difference between these versions and their <em>non-_inline</em> counterparts is that they do not prefix the output with the <strong>&#64;raw</strong> tag. Here are some examples of how the output looks when using them:</p></div>
<div class="extras"><p>First, here's <strong>&lsqb;section.inline&rsqb;</strong>:</p></div>
<div class="extras"><p><div class="section"><p class="divTitle">my different title</p></div></p></div>
<div class="extras"><p>And now, <strong>&lsqb;section.wc_inline&rsqb;</strong>:</p></div>
<div class="extras"><p><div class="section"><p class="divTitle">my different title</p><p>my content</p></div></p></div>
<div class="extras"><p>Essentially what you get when using them is output wrapped with whatever the current <strong>&#64;wrap</strong> tag happens to be. This gives you plenty of flexibility to style the output by only controlling the block elements that contain the <strong>_inline</strong> versions of each.</p></div>
<div class="extras"><p>Currently, the <strong>&#64;wrap</strong> tag is set to: <em><strong>&lt;div class="extras"&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;</strong></em>. Let's set it to <strong>&#64;wrap nop</strong>, and then add the same two previous markdown elements:</p></div>
<div class="section"><p class="divTitle">my different title</p></div>
<div class="section"><p class="divTitle">my different title</p><p>my content</p></div>
<div class="extras"><p>Now they are identical to using the <strong>non-_inline</strong> versions, since <strong>&#64;wrap nop</strong> is essentially telling the output formatter to write in raw mode! The final two inline modes will be covered in the next section on nesting DIVs, but there isn't any real magic to them. They match up to their counterparts exactly like the two we just reviewed...</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Final notes on nesting DIVS</h3></div>
<div class="extras"><p>Before we leave Generic DIVs, let's look at a few more examples of nesting. You can get into some precarious formatting issues if you aren't careful, due to how most modern browsers treat block elements, as you'll see below.</p></div>
<div class="extras"><p>In the first example, we are using <strong>wc_open_inline</strong> followed by content, then another <strong>wc_open_inline</strong>, etc. We are using the <strong>&#64;raw</strong> tag on each of the <span class="blue"><span style="font-size:110%">wc_&ast;</span></span> calls, to prevent the output formatter from wrapping the divs with the current wrap tags...</p></div>
<div class="section"><p class="divTitle">my different title</p>
<div class="extras"><p>Here is some content.</p></div>
<div class="section"><p class="divTitle">my different title</p>
<div class="extras"><p>Here is different content.</p></div>
<div class="section"><p class="divTitle">my different title</p>
<div class="extras"><p>And here's the last nested content.</p></div>
</div>
<div class="extras"><p>But here is some additional written after closing the innermost div.</p></div>
</div>
<div class="extras"><p>And some final content just before closing the outmost div...</p></div>
</div>
<div class="extras"><p>This works okay (as long as you use the <strong>&#64;raw</strong> tag when emitting the inline divs, because <strong>&#64;wrap</strong> is set to <em><strong>&lt;p&gt;</strong></em>, so each line is wrapped as a paragraph.</p></div>
<div class="extras"><p>In this next example, we will do the same thing, but without any line breaks. It looks similar, except that most modern browsers will close an open block tag if a new block tag is encountered. Unfortunately, there isn't any simple way to address this because you can't rely on the output formatter of <strong>smd</strong> to solve the issue (like we did above), because there is only a single line being output...</p></div>
<div class="section"><p class="divTitle">my different title</p> Here is some content. <div class="section"><p class="divTitle">my different title</p> Here is different content. <div class="section"><p class="divTitle">my different title</p> And here's the last nested content. </div> But here is some additional written after closing the innermost div. </div> And some final content just before closing the outmost div... </div>
<div class="extras"><p>In this final example on nesting, we are using the raw attributes again, just writing the content on separate lines. This behaves exactly like the first version above, just perhaps a bit more readable since you don't need the <strong>&#64;raw</strong> tags.</p></div>
<div class="section"><p class="divTitle">my different title</p>
<p>Here is some content.<br/></p>
<p>and more content</p>
<div class="section"><p class="divTitle">my different title</p>
<p>Here is different content.</p>
<div class="section"><p class="divTitle">my different title</p>
<p>And here's the last nested content.</p>
</div>
<p>But here is some additional written after closing the innermost div.</p>
<p>what about this?</p>
</div>
<p>And some final content just before closing the outmost div...</p>
<p>and more</p>
<p>and more</p>
</div>
<div class="extras" style="border-bottom:2px solid black"><h3>Other Generic DIVs</h3></div>
<div class="extras"><p>The remaining Generic DIVs have all the same behaviour and attributes as <strong>section</strong>. The only difference in how they look goes back to how they are styled in the <strong>smd.css</strong> file. Try a few out, and/or take a look at the <strong>tests/in/divs.md</strong> unittest file to see them in action!</p></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> OR, maybe I should just inline all the built-in help for each div here. That way, it's all documented and reviewed, and I can do the same with the remaining sections. Document 1, then say all the rest are the same, but here's the help for them...</p></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> Make this isn't already done in the tests/in/divs.md ... It is actually, one of each type, so we just need to do all of them here, but in the right section...</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Code DIVs</h3></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> Code divs here</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Note DIVs</h3></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> Note divs here</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>List DIVs</h3></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> List divs here</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>DIVs Summary</h3></div>
<div class="extras"><p>DIVs are one of the fundemental building blocks for styling HTML pages. Play around with the builtins, and create your own. Remember, you can add your own classes in the <strong>smd.css</strong> CSS file, and then reference them by building your own custom divs using the div factory <strong>_dfactory</strong>.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_title_pages"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Cover, Revision & Contact Sections</h2></div>
<div class="extras"><p>There are three (3) builtins that can be used in your document to add commonly used sections in script files. They are defined in <em>sys.imports/report.md</em>:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><strong>var.cover</strong> - To add a cover section</li>
<li><strong>var.revision</strong> - To add a revision section</li>
<li><strong>var.contact</strong> - To add a contact section</li>
</ul></div>
<div class="extras"><p>The details for each type of section are discussed below.</p></div>
<a id="ug_tp_cover"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>@var.cover</h3></div>
<div class="syntax"><p class="divTitle">Cover Title Syntax</p>
<div class="extras"><p>&lsqb;var.cover(title="your title", author="author name", logline="logline or short description")]<br /></p></div>
<div class="extras"><p>&lsqb;var.cover.inline(title="your title", author="author name", logline="logline or short description")]<br /></p></div>
<p><br /></p>
<p>Each attribute is optional, and they can appear in any order. Also note that the value of any parameter can be whatever you want. Just because it says "author", doesn't mean you have to put the author name there. You could instead write "Roses are Red", and that would be just fine...</p>
</div>
<div class="extras"><p>Let's see how <strong>&lsqb;var.cover&rsqb;</strong> renders out:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p><div class="cover"><h3>[defaults.title]</h3><p>[defaults.author]</p><p class="coverSummary">[defaults.logline]</p></div></p></div>
</div>
<div class="extras"><p>Interesting. Looks like it relies on several <em><strong>default</strong></em> values from the <strong>smd</strong> variable <strong>var.default</strong>. That gives us two options to proceed: Either set the defaults (which you might opt to do in  your enviroment, giving them better default values for your own markdown projects), or you can pass them on the fly, using the syntax above. Let's try again, only this time, we'll use the parameters from above:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p><div class="cover"><h3>your title</h3><p>author name</p><p class="coverSummary">logline or short description</p></div></p></div>
</div>
<div class="extras"><p>That's better! So that's pretty much all there is to <strong>var.cover</strong>. It's used in a few of the samples provided in the docs, and you might find it useful for your own projects, along with its companions, <strong>var.revision</strong> and <strong>var.contact</strong>. Let's take a look at them.</p></div>
<a id="ug_tp_revision"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>@var.revision</h3></div>
<div class="syntax"><p class="divTitle">Revision Syntax</p>
<div class="extras"><p>&lsqb;var.revision&lpar;v="1.0"&rpar;]<br /></p></div>
<div class="extras"><p>&lsqb;var.revision.plain&lpar;v="1.0"&rpar;]<br /></p></div>
<div class="extras"><p>&lsqb;var.revision.inline&lpar;v="1.0"&rpar;]<br /></p></div>
<div class="extras"><p>&lsqb;var.revision.inline_plain&lpar;v="1.0"&rpar;]<br /></p></div>
<p><br /></p>
<p>Specify the revision number of your document within quotes. The default rendering of the <strong>var.revision</strong> variable is to include a timestamp at the end of the string. You can request a plain revision string using the plain attribute e.g. &lsqb;var.revision.plain&rsqb;. In our example below, we are going to use the <strong>plain</strong> version, because this file is included as part of the unittests, and timestamping would cause the test to fail every time. :)</p>
</div>
<div class="extras"><p>Let's see how <strong>&lsqb;var.revision.plain&rsqb;</strong> renders out:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="revision"><p class="revTitle">Revision: <em><strong>[defaults.revision]</strong></em></p></div>
</div>
<div class="extras"><p>And once again, we see that the default revision if not specified, looks to <strong>var.default</strong> for the <strong>revision</strong> attribute. Let's go ahead and specify the revision in the markdown using the following syntax: <strong>&lsqb;var.revision.plain&lpar;v="1.4.2"&rpar;&rsqb;</strong></p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="revision"><p class="revTitle">Revision: <em><strong>1.4.2</strong></em></p></div>
</div>
<div class="extras"><p>Now that you've seen both <strong>var.cover</strong> and <strong>var.revision</strong>, you can probably guess how <strong>var.contact</strong> works just by reviewing the syntax. Let's take a look!</p></div>
<a id="ug_tp_contact"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>@var.contact</h3></div>
<div class="syntax"><p class="divTitle">Contact Syntax</p>
<div class="extras"><p>&lsqb;var.contact(cn="name" ph="phone" em="email" c1="copyright line 1" c2="copyright line 2" c3="copyright line 3")]</p></div>
<div class="extras"><p>&lsqb;var.contact.inline(cn="name" ph="phone" em="email" c1="copyright line 1" c2="copyright line 2" c3="copyright line 3")]</p></div>
<p><br /></p>
<p>Each element is optional, and the elements can appear in any order. By default, the system looks in the <em>var.defaults</em> variable for the definitions of <em>cn, ph, em, c1, c2 & c3</em>.</p>
</div>
<div class="extras"><p>For this example, let's look at an alternative of editing defaults.md to specify the defaults for a markdown document, since it's likely you would vary these on a per-project basis. As it turns out, you can conveniently set them using a single call:</p></div>
<div class="extras"><ul class="ulist-plain">
<li>&nbsp;@set _id="defaults" &bsol;</li>
<li><span class="indent">cn="Ken Lowrie" &bsol;</span></li>
<li><span class="indent">ph="<em>512-555-1234</em>" &bsol;</span></li>
<li><span class="indent">em="me@mycompany.com" &bsol;</span></li>
<li><span class="indent">c1="Copyright  2020 My Company, LLC." &bsol;</span></li>
<li><span class="indent">c2="All Rights Reserved." &bsol;</span></li>
<li><span class="indent">c3="www.mydomain.com"</span></li>
<li></ul></li>
</ul></div>
<div class="extras"><p>So, I'm going to do that now, and then we'll write the <strong>&lsqb;var.contact&rsqb;</strong> markdown and see what we get.</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p><div class="contact"><table style="border:none"><tr style="border:none"><td class="left nowrap" style="border:none">Copyright  2020 My Company, LLC.<br />All Rights Reserved.<br />www.mydomain.com<br /></td><td class="right nowrap" style="border:none">Ken Lowrie<br /><em>512-555-1234</em><br />me@mycompany.com<br /></td></tr></table></div></p></div>
</div>
<div class="extras"><p>Pretty cool, huh? Of course you would likely create <strong>&#64;link</strong> variables for the email address and the website so you could make them hyperlinks, but I'm going to leave that up to you to do.</p></div>
<div class="extras"><p>So that's it for these special section divs. Let's move on!</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="advanced"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Advanced Topics: &#64;raw and more</h2></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> Figure out what leftovers should go here. Grep after this pass of the documentation review, and whatever doesn't fit somewhere else should go here.</p></div>
<div class="extras"><p>The case for @raw | @@. When you use them in emitted lines (or inline), any @wrap tag will NOT be applied.</p></div>
<div class="extras"><p>However, the parser will markdown the line, and it the contents change (i.e. markdown was there), then it will use that instead of the actual raw line.</p></div>
<span style="font-size:150%">wc_&ast;</span>
<div class="extras"><p>Seems like @break is essentially a way of doing a "clear:both" thru the use of a display:block element such as headers...</p></div>
<div class="extras"><p>The @break/@exit are not really needed, because the avshot macro properly handles the closure... grep for this and then see if they are still used then decide it we need to document them...</p></div>
<div class="extras"><p class="note">When you want to force the document out of shot mode, use <em><strong>@break</strong></em> or <em><strong>@exit</strong></em> on an empty line. That will reset the floats which are controlling the AV formatting, and start a new section. See how the document leaves the narration mode of the prior shot, and starts this new block paragraph?</p></div>
<div class="extras"><h1></h1></div>
<div class="extras"><p><strong>[at]break</strong> [lt]--Use @break or @exit to close a shot DIV."</p></div>
<div class="extras"><p>So that pretty much sums up the advanced section. Hopefully it was helpful, if not, ask questions, and I'll clarify. Or better yet, improve the docs, and submit a pull request. :)</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_predefined_classes"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Predefined classes</h2></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> When we document the DIV versions of the these, we can decide to document their use inline like this or not... If not, then we can make that call here, or just delete all of this... The support for this type of thing is a bit odd, so we may not want to do it...</p></div>
<div class="extras"><p>Example: <span class="red">This text will be RED</span></p></div>
<div class="syntax"><p class="divTitle">Variable Decorators</p>
<p><br /></p>
<p><span class="bigandbold indent">&nbsp;@var variable="{:.class}value"</span></p>
<p><br /><br /></p>
<p>So, if you declared this: <strong>@var mynewvar="{:.bigandbold.red}My new big bold value"</strong>, and then write &#91;mynewvar], you'd get this:<br /><br /></p>
<p><span class="bigandbold red">My new big bold value</span></p></p>
</div>
<div class="extras"><p>There are a number of predefined classes in the primary CSS file that can be used to quickly style your AV scripts. You can add others as required, and decorate your elements as needed. Here are a few of them, used outside the AV DIV, and then again inside an AV DIV.</p></div>
<div class="syntax"><p class="divTitle">Predefined classes</p>
<p><span class="indent bigandbold">&lcub;:.note&rcub; -- This is a note.</span></p>
<p><span class="indent bigandbold">&lcub;:.question&rcub; -- This is a question.</span></p>
<p><span class="indent bigandbold">&lcub;:.vo&rcub; -- This is a VO note</span></p>
<p><span class="indent bigandbold">&lcub;:.important&rcub; -- This is important.</span></p>
<p><span class="indent bigandbold">&lcub;:.greyout&rcub; -- This is grey text on grey background.</span></p>
</div>
<div class="extras"><p>Here they are used outside an AV DIV Section.</p></div>
<div class="extras"><p><span class="note">This is a note.</span></p></div>
<div class="extras"><p><span class="question">This is a question.</span></p></div>
<div class="extras"><p><span class="vo">This is a VO note</span></p></div>
<div class="extras"><p><span class="important">This is important.</span></p></div>
<div class="extras"><p><span class="greyout">This is grey text on grey background.</span></p></div>
<div class="extras"><p>*CU: Predefined Classes used inside AV section</p></div>
<div class="extras"><p>Here they are again, used inside an AV DIV section</p></div>
<div class="extras"><p><span class="note">This is a note.</span></p></div>
<div class="extras"><p><span class="question">This is a question.</span></p></div>
<div class="extras"><p><span class="vo">This is a VO note</span></p></div>
<div class="extras"><p><span class="important">This is important.</span></p></div>
<div class="extras"><p><span class="greyout">This is grey text on grey background.</span></p></div>
<div class="extras"><h1></h1></div>
<div class="extras"><p>Here are a few more of the predefined classes available, and remember, you can tailor these or add more as required for your particular purpose.</p></div>
@ divTitle More predefined classes
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.pbb&rcub;</strong>-- Page Break Before (when printing).</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.pba&rcub;</strong>-- Page Break After (when printing).</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.red&rcub;</strong>-- To color text red.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.green&rcub;</strong>-- To color text green.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.blue&rcub;</strong>-- To color text blue.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.center&rcub;</strong>-- To center text.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.left&rcub;</strong>-- To left align text.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.right&rcub;</strong>-- To right align text.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.bigandbold&rcub;</strong>-- To increase text size and make it bold.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.box&rcub;</strong>-- To put a box around it.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.dashed&rcub;</strong>-- To put a dashed line around it.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.greybg&rcub;</strong>-- To make the background grey.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&lcub;:.ignore&rcub;</strong>-- So it won't display in the output.</span></p></div>
<div class="extras"><p>You can stack multiple classes by simply stringing them together. For example, on the next line, I'll write <strong>{:.greybg.bigandbold.blue}This is a big and bold blue note on a grey background.</strong></p></div>
<div class="extras"><p><span class="greybg bigandbold blue">This is a big and bold blue note on a grey background.</span></p></div>
<div class="extras"><p>If you have text you want included in the HTML document, but do not want it rendered by the browser, use the <strong>{:.ignore}</strong> class prefix. For example, on the next line, we'll write {:.ignore}You won't see this.<br /><br /></p></div>
<div class="extras"><p><span class="ignore">You won't see this.</span></p></div>
<div class="extras"><p>When you examine the HTML, you'll see the prior text wrapped in <strong>[lt]p[gt]</strong> tags, inside <strong>[lt]div class="extras"[gt]</strong> markup. However, it will not be rendered by the browser, unless you modify the CSS rule for the ignore class.</p></div>
<div class="extras"><p>Lines that begin with a double forward slash [<em><strong>//</strong></em>] are treated as comments, and are discarded by AVScript. They will not appear in the HTML at all. As another example, we'll write <em>//This will not appear in the HTML</em> on the next line.</p></div>
<div class="extras"><p>If you examine the HTML output, you will not see the previous line in the output.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="avs"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Audio/Visual &lpar;AV&rpar; Script Formatting</h2></div>
<div class="extras"><p>In the prior incarnation of <strong>smd</strong>, the primary purpose of the application was to create Audio/Visual (AV) style scripts from plain text markdown files. In fact, the name of the prior version was <strong>AVScript</strong>, and it consisted of two Python command line utilities: <strong>avscript.py</strong> and <strong>mkavscript.py</strong>. You may recall that this version relied on the <strong>BBEdit</strong> text editor in order to provide the WYSIWYG preview support while building your markdown documents.</p></div>
<div class="extras"><p>As it morphed into the current version where no reliance on a specific text editor was required, it also shed some of the syntax and semantics of the prior version which limited it to being useful only for creating AV Script documents. This led the way to it being useful for creating many other types of content, from simple web pages to dynamic pages and new monitoring features including endpoints for direct HTTP service.</p></div>
<div class="extras"><p>But the roots of being useful for generating A/V Scripts remains through the use of specialized built-ins provided as part of the distribution package. This support is contained within the <strong>&lsqb;sys.imports&rsqb;/avs</strong> directory.</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>The <strong>AVS</strong> builtin library</h3></div>
<div class="extras"><p>The <strong>AVS</strong> builtins provide everything you need to create A/V-style scripts, from the simple, mostly text based scripts, to complex shot-breakdown documents that help you communicate your vision to everyone, be it your Executive Producers or the all important Crew Members!</p></div>
<div class="extras"><p>Although there are a number of markdown files in the <strong>avs</strong> directory, the two you will use primarily are:</p></div>
<div class="extras"><ul class="ulist-plain">
<li><strong>&lsqb;sys.imports&rsqb;/avs/avshot.md</strong> - for simple A/V scripts</li>
<li><strong>&lsqb;sys.imports&rsqb;/avs/avs.md</strong> - for access to the shot breakdown builtins.</li>
</ul></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> Review where <strong>avshot</strong> used by including <strong>avs.md</strong> and change to <strong>avshot.md</strong> where it makes sense...</p></div>
<div class="extras"><p>Let's see a quick example now. Consider the following markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Generate a simple AV shot</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&#64;import "&lsqb;sys.imports&rsqb;/avs/avshot.md"
&nbsp;
&lsqb;avshot.shot_with_desc(_s="WS:Sunrise", _d="\&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;There is just something about a sunrise that gets the blood flowing...\&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;And here is some additional narration.&lsqb;bb&rsqb;\&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;and here are some additional shot notes.\&nbsp;
")]
</pre></div>
<div class="extras"><p>This is what will be rendered by the browser:</p></div>
<div class="av"><ul>
<li>WS:Sunrise</li>
</ul>
<p>There is just something about a sunrise that gets the blood flowing...    And here is some additional narration.<br /><br />    and here are some additional shot notes.</p>
</div>
<div class="extras"><p>And here is the actual HTML code that the parser emits:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Raw HTML Output from prior <em>avshot.shot_with_desc</em> markdown</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lt;div class="av"&gt;&lt;ul&gt;
&lt;li&gt;WS:Sunrise&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There is just something about a sunrise that gets the blood flowing...    And here is some additional narration.&lt;br&gt;&lt;br&gt;    and here are some additional shot notes.&lt;/p&gt;
&lt;/div&gt;
</pre></div>
<div class="extras"><p>While this is useful for simple A/V Shot generation, many times it might be easier and clearer to write things in a more free-from style. As it turns out, <strong>avshot</strong> has builtin methods for that as well. Take a look at this:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Generate a simple AV shot using the section methods</pre><pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
&lsqb;avshot.visual&rsqb;
&nbsp;&nbsp;&nbsp;&nbsp;There is nothing like waking up to the smell of coffee percolating in the outdoors.
&lsqb;avshot.audio&rsqb;
&nbsp;&nbsp;&nbsp;&nbsp;&ast;After we fade into the early morning wide-shot of the camp-site, we will cut to this close-up, making sure the client's product logo is visible in the shot.&ast;
&lsqb;avshot.end&rsqb;
</pre></div>
<div class="extras"><p>And here is how the browser will render this markdown:</p></div>
<div class="av"><ul>
<li>CU:Coffee pot heating on wire rack of fire pit</li>
</ul>
<p>There is nothing like waking up to the smell of coffee percolating in the outdoors.</p>
<p><em>After we fade into the early morning wide-shot of the camp-site, we will cut to this close-up, making sure the client's product logo is visible in the shot.</em></p>
</div>
<div class="extras"><p>In both the <strong>.visual</strong> and <strong>.audio</strong> sections, you can have as much information as required, just keep writing, even starting new regular paragraphs. You can insert any markdown as well, to aid your reader in understanding what you want. When you're done, close out the one shot, and start another. You know, lather, rinse, repeat...</p></div>
<div class="extras"><p>In the upcoming <a href="#examples">Samples</a> chapters, we will cover <strong>avshot</strong> in much more detail as well as the entire set of <strong>avs</strong> builtins... For now, this hopefully provided a quick introduction to what's in store!</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Guide to the Sample Documents</h3></div>
<div class="extras"><p>Before we leave this chapter, here's a guide to each of the examples provided in the upcoming chapters. This should point you to which specific sample(s) you may want to review to jump start your project.</p></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> Might be best to put links here with short summaries of the purpose of each example, so that we can direct the reader to specific sections for review...</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_debug"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Debugging your markdown files</h2></div>
<div class="extras"><p>Okay, most of you will never need any of the things we are going to discuss here. Why would you? Your markdown will be flawless and perfect the first time. That's good for you, unfortunately for me, that's not the case. Because of that, two special keywords were added to assist with the markdown debugging process: <strong>&#64;debug</strong> and <strong>&#64;dump</strong>. This chapter is going to go over both of them in detail, and show how they can be used to assist in the debugging process.</p></div>
<a id="ug_debug_cmd"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>The &#64;debug keyword</h3></div>
<div class="extras"><p>We will start with the <strong>&#64;debug</strong> keyword, as this is useful for getting debug messages written into the output stream, so that you can see what is happening in real-time.</p></div>
<div class="syntax"><p class="divTitle">&#64;debug Keyword Syntax</p>
<p><br /></p>
<p><span class="indent"><strong>&#64;debug</strong> &lsqb;<em>tag</em>="<em>regex</em>" &lsqb;<em>tag</em>="<em>regex</em>" &lsqb; ... &rsqb; &rsqb; &rsqb;</span></p>
<p><br /></p>
<p><span class="indent"><span class="indent"><em><strong>tag</strong></em> is one of &lt;<strong>on | off | toggle | enabled | tags</strong>&gt;</span></span></p>
<p><span class="indent"><span class="indent"><em><strong>regex</strong></em> is any Python-compliant regular expression</span></span></p>
</div>
<div class="extras"><p>Okay, to start, you can see that the parameters to <strong>&#64;debug</strong> are <em>all</em> optional. So, if we type <em>&#64;debug</em>, this is what happens:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;debug keyword</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em><strong>//</strong> Toggle everything on</em>
<strong>&#64;debug</strong>
Toggling Debug Mode<br />
<span class="debug green"><strong>Method(toggle): _SYSTEM is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): bookmarks is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): cache is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): cache.import is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): markdown is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): ns is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): ns.add is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): ns.code is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): ns.html is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): ns.image is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): ns.link is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): ns.var is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): smd is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): smd.line is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): smd.raw is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): stdinput is now enabled</strong></span>
<span class="debug green"><strong>Method(toggle): utility is now enabled</strong></span>
&nbsp;
<em><strong>//</strong> Toggle everything back off</em>
<strong>&#64;debug</strong>
Toggling Debug Mode<br />
<span class="debug green"><em>Method(toggle): _SYSTEM is now disabled</em></span>
<span class="debug green"><em>Method(toggle): bookmarks is now disabled</em></span>
<span class="debug green"><em>Method(toggle): cache is now disabled</em></span>
<span class="debug green"><em>Method(toggle): cache.import is now disabled</em></span>
<span class="debug green"><em>Method(toggle): markdown is now disabled</em></span>
<span class="debug green"><em>Method(toggle): ns is now disabled</em></span>
<span class="debug green"><em>Method(toggle): ns.add is now disabled</em></span>
<span class="debug green"><em>Method(toggle): ns.code is now disabled</em></span>
<span class="debug green"><em>Method(toggle): ns.html is now disabled</em></span>
<span class="debug green"><em>Method(toggle): ns.image is now disabled</em></span>
<span class="debug green"><em>Method(toggle): ns.link is now disabled</em></span>
<span class="debug green"><em>Method(toggle): ns.var is now disabled</em></span>
<span class="debug green"><em>Method(toggle): smd is now disabled</em></span>
<span class="debug green"><em>Method(toggle): smd.line is now disabled</em></span>
<span class="debug green"><em>Method(toggle): smd.raw is now disabled</em></span>
<span class="debug green"><em>Method(toggle): stdinput is now disabled</em></span>
<span class="debug green"><em>Method(toggle): utility is now disabled</em></span>
</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre></div></pre>
<div class="extras"><p>Okay, awesome, you can see that <strong>&#64;debug</strong> on it's own, simply toggles the state of each registered debug handler. In our case, everything was off, and so the first time <strong>&#64;debug</strong> was used, it toggled everything on. Then, the second time, everything was toggled back off.</p></div>
<div class="extras"><p>However, if one or more of the registered handlers was <strong>on</strong>, then the first time we issued the <strong>&#64;debug</strong> it would have toggled those off, and everything else on! It's a toggle, so that should be self explanatory. If you aren't sure, open up an <strong>smd</strong> session and try it, and see how it works.</p></div>
<div class="extras"><p class="note blue">NOTE: To be honest, enabling <em>all</em> of the debug handlers at once will most likely not be very useful for you. There are hundreds of debug messages that will be printed depending on what your markdown contains, and it'll be very tricky to follow along. In most cases, you will choose one or two of the handlers to enable, and then use the output from them to decode what is going on.</p></div>
<a id="ug_debug_parms"></a>
<div class="extras" style="border-bottom:2px solid black"><h3>The &#64;debug parameters</h3></div>
<div class="extras"><p>The parameters to <strong>&#64;debug</strong> are:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><table style="margin-left:auto;margin-right:auto">
<tr><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Parameter</td><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Description</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>on="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">turn the registered debug handler&lpar;s&rpar; on for all that match the <strong>regex</strong> string.</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>off="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">turn the registered debug handler&lpar;s&rpar; off for all that match the <strong>regex</strong> string.</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>toggle="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">toggle the state of the registered debug handler&lpar;s&rpar; for all that match the <strong>regex</strong> string.</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>enabled="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">dumps the current registered debug handler&lpar;s&rpar; and their state, without changing it&lpar;s&rpar; off for all that match the <strong>regex</strong> string.</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>tags="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">dumps the registered debug handler&lpar;s&rpar; names; if <em>name emphasized</em> it is disabled, or <strong>name bold</strong> it is enabled. Does this off for all that match the <strong>regex</strong> string.</td></tr>
</table></div>
</div>
<div class="extras"><p>Next, let's talk about the <strong>regex</strong> string that can be specified with each of these options. Regular Expressions are a convenient way of matching multiple things using a specific language if you will. I'm not going to get into describing that, but there are plenty of sites on the Internet that will cover it quite thoroughly. The important thing to remember is that the <strong>regex</strong> <em><strong>must</strong></em> be a Python-compliant regular expression in order for it to work as expected. Let's look at a few examples of how you can use it to match multiple debug handlers in <strong>smd</strong>.</p></div>
<div class="extras"><p>The various modules and subsystems in <strong>smd</strong> can register a debug handler using a name. If you look at the list of handlers above, you'll see the names within the output strings. For example, <strong>ns</strong>, <strong>ns.add</strong> and <strong>ns.code</strong> are all registered debug handler names. Let's say you want to toggle the state of all handlers that begin with <em>ns</em>. You could do that by typing <em>@debug toggle="ns"</em> or <em>@debug toggle="ns&ast;"</em>. Just be sure to put the <strong>@debug</strong> statement on a line by itself, because otherwise it will be treated as inline text.</p></div>
<div class="extras"><p>But what if you wanted to toggle just the <strong>ns</strong> handler, but not all of the other ones that begin with <em>ns</em>? You would do that like this: <em>@debug toggle="<span class="red bold"><span style="font-size:110%">ns$</span></span></em>. The <span class="red bold"><span style="font-size:110%">$</span></span> signals the end of the string, or name in this current context. See how that works so far?</p></div>
<div class="extras"><p>Now, let's say we wanted to toggle the state of the <em>utility</em> and <em>ns</em> debug handlers. Do we need to <strong>&#64;debug</strong> statements for that? Nope. Use this: <em>@debug toggle="<span class="red bold"><span style="font-size:110%">utility | ns$</span></span>"</em> statement. NOTE: I added spaces around the pipe <span class="red bold"><span style="font-size:110%">|</span></span> so it would be easier to read. Do <strong>not</strong> do that for real, or you won't get the results you expect.</p></div>
<div class="extras"><p>Keep in mind that this method of using regular expressions for the parameter strings works the same in <strong>&#64;debug</strong> and <strong>&#64;dump</strong>, so it's definitely worth getting more familiar with.</p></div>
<div class="extras"><p>This wraps up the section on the <strong>&#64;debug</strong> statement. Let's move along into <strong>&#64;dump</strong> now, another useful debugging trick when writing your own builtins and macros.</p></div>
<a id="ug_dump_cmd"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>The &#64;dump keyword</h3></div>
<div class="extras"><p>The <strong>&#64;dump</strong> keyword is used to dump the current declarations of variables. As you will see, you can dump a single variable, or multiple variables, in one or more namespaces. Let's first take a look at the syntax:</p></div>
<div class="syntax"><p class="divTitle">&#64;dump Keyword Syntax</p>
<p><br /></p>
<p><span class="indent"><strong>&#64;dump</strong> &lsqb;<em>tag</em>="<em>regex</em>" &lsqb;<em>tag</em>="<em>regex</em>" &lsqb; ... &rsqb; &rsqb; &rsqb;</span></p>
<p><br /></p>
<p><span class="indent"><span class="indent"><em><strong>tag</strong></em> is one of &lt;<strong>var | html | link | image | code | sysdef | tracked | help</strong>&gt;</span></span></p>
<p><span class="indent"><span class="indent"><em><strong>regex</strong></em> is any Python-compliant regular expression</span></span></p>
</div>
<div class="extras"><p>Okay, to start, you can see that, like <strong>&#64;debug</strong>, the parameters to <strong>&#64;dump</strong> are <em>all</em> optional. So, if we type <em>&#64;dump</em>, this is what happens:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;dump keyword</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em><strong>//</strong> Dump all the sysdef's, tracked files and variables in all namespaces</em>
<strong>&#64;dump</strong>
----------------------------------------
System Defaults: .*
----------------------------------------
&nbsp;&nbsp;&nbsp;&nbsp;Current system defaults
----------------------------------------
Files seen during parsing: .*
----------------------------------------
&nbsp;&nbsp;&nbsp;&nbsp;Files seen during parsing
----------------------------------------
NAMESPACE: var
----------------------------------------
&nbsp;&nbsp;&nbsp;&nbsp;Current <strong>&#64;var</strong> variables
----------------------------------------
NAMESPACE: link
----------------------------------------
&nbsp;&nbsp;&nbsp;&nbsp;Current <strong>&#64;link</strong> variables
----------------------------------------
NAMESPACE: html
----------------------------------------
&nbsp;&nbsp;&nbsp;&nbsp;Current <strong>&#64;html</strong> variables
----------------------------------------
NAMESPACE: image
----------------------------------------
&nbsp;&nbsp;&nbsp;&nbsp;Current <strong>&#64;image</strong> variables
----------------------------------------
NAMESPACE: code
----------------------------------------
&nbsp;&nbsp;&nbsp;&nbsp;Current <strong>&#64;code</strong> variables
</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre></div></pre>
<div class="extras"><p>Because there are hundreds of variables defined in even the simplist <strong>smd</strong> markdown session, I've chosen to show nothing in the list above. If you would like to see for yourself, then start <strong>smd</strong> interactively (type <strong>[smd.il] -nd</strong> in your terminal window), and then <strong>@dump</strong>. Let's review all of tag options for <strong>&#64;dump</strong>.</p></div>
<a id="ug_dump_parms"></a>
<div class="extras" style="border-bottom:2px solid black"><h3>The &#64;dump parameters</h3></div>
<div class="extras"><p>The parameters to <strong>&#64;dump</strong> are:</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><table style="margin-left:auto;margin-right:auto">
<tr><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Parameter</td><th class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center">Description</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>sysdef="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Dump the system defaults whose name matches the <strong>regex</strong> string</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>tracked="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Dump all the files that match the <strong>regex</strong> string</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>var="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Dump all <strong>&#64;var</strong> variables whose name matches the <strong>regex</strong> string</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>link="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Dump all <strong>&#64;link</strong> variables whose name matches the <strong>regex</strong> string</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>html="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Dump all <strong>&#64;html</strong> variables whose name matches the <strong>regex</strong> string</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>image="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Dump all <strong>&#64;image</strong> variables whose name matches the <strong>regex</strong> string</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>code="regex"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">Dump all <strong>&#64;code</strong> variables whose name matches the <strong>regex</strong> string</td></tr>
<tr><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:center"><em>help="True|False"</em></td><td class="item" style="padding:5px;width:auto;font-size:1.3em;text-align:left">The allowable values for this parameter are either <strong>True</strong> or <strong>False</strong>. This controls whether or not <strong>&#64;dump</strong> will print the <strong>_help</strong> attribute, if present</td></tr>
</table></div>
</div>
<div class="extras"><p>Anyway, note that like <strong>&#64;debug</strong>, <strong>&#64;dump</strong> also allows regular expressions to be used in the parameter for any of the tags. Given that, consider this example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;dump keyword</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em><strong>//</strong> Dump <span class="red bold"><span style="font-size:110%">b$</span></span> and <span class="red bold"><span style="font-size:110%">bb</span></span> from <strong>&#64;var</strong> namespace</em>
<strong>&#64;dump</strong> var="b$|bb"
----------------------------------------
NAMESPACE: var
----------------------------------------
b=
&nbsp;&nbsp;&nbsp;&nbsp;_format=
&nbsp;
bb=
&nbsp;&nbsp;&nbsp;&nbsp;_format={{b}}{{b}}
</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre></div></pre>
<div class="extras"><p>Unlike <strong>&#64;debug</strong>, you can also specify multiple tags with <strong>&#64;dump</strong>. Here's an example of that:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;dump keyword - multiple tags</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em><strong>//</strong> Dump <span class="red bold"><span style="font-size:110%">b$</span></span> and <span class="red bold"><span style="font-size:110%">bb</span></span> from <strong>&#64;var</strong> namespace and <span class="red bold"><span style="font-size:110%">table</span></span> from <strong>&#64;html</strong> namespace</em>
<strong>&#64;dump</strong> var="b$|bb" html="table"
----------------------------------------
NAMESPACE: var
----------------------------------------
b=
&nbsp;&nbsp;&nbsp;&nbsp;_format=
&nbsp;
bb=
&nbsp;&nbsp;&nbsp;&nbsp;_format={{b}}{{b}}
&nbsp;
----------------------------------------
NAMESPACE: html
----------------------------------------
table=
&nbsp;&nbsp;&nbsp;&nbsp;_format=<{{self._tag}}{{self._public_attrs_}}></{{self._tag}}>
&nbsp;&nbsp;&nbsp;&nbsp;_tag=table
&nbsp;
table_2=
&nbsp;&nbsp;&nbsp;&nbsp;_format=<{{self._tag}}{{self._public_attrs_}}></{{self._tag}}>
&nbsp;&nbsp;&nbsp;&nbsp;_tag=table
&nbsp;&nbsp;&nbsp;&nbsp;style=margin-left:auto;margin-right:auto
</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre></div></pre>
<div class="extras"><p>Go ahead and try dumping different variables from the various namespaces to get familiar with using the regular expressions to choose only those you are interested in. This will be very helpful to you when you start writing your own markdown documents, you know, if you end up having an issue in your markdown that you need to debug. :)</p></div>
<div class="extras"><p>There is also a builtin macro in the <strong>&#64;code</strong> namespace called <strong>code.dump</strong> that can be used to display the help string for a given variable. It is used quite a bit in the user documentation, although unless you are writing documentation for your own extensions to <strong>smd</strong>, it isn't likelly something you will get much use out of.</p></div>
<div class="extras"><p>One final note is the special tag <strong>help</strong>. First, it does not take a regular expression like the other tags. Instead, it takes either <strong>True</strong> or <strong>False</strong>. By default, it is set to False, which tells it that it should <strong>not</strong> dump the <strong>_help</strong> attribute on a variable if one exists. If you set it to True, however, and a given variable has the <strong>_help</strong> attribute, then it will dump that too. It is set to False by default because in most cases, you don't want to see the help string, or if you do, it makes much more sense to display it with <strong>varname.?</strong> or <strong>varname.??</strong>, so it will be formatted in a way that you can read it!</p></div>
<a id="ug_common_issues"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>A few common situations you might encounter</h3></div>
<div class="extras"><p>In this section, we will document how to debug common issues you may encounter while writing markdown for your project. Currently I have only identified a couple that are common things that happen to me, so I will address them now. As more things are identified going forward, I will add them here.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h4>Markdown nesting error</h4></div>
<div class="extras"><p>Consider the following markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Markdown nested too deeply error</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em><strong>//</strong> Declare two variables</em>
&#64;var x="{{y}}"
&#64;var y="{{x}}"
&lsqb;x&rsqb;
<em><strong>//</strong> Boom</em>
smd.core.exception.NestingError: Markdown().markdown--Expansion nested too deeply. Enable @debug on="markdown"
</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre></div></pre>
<div class="extras"><p>Did your computer make a small explosive sound? LoL. No? Okay, bad joke. Anyhow, it's likely obvious what has happened here: variable <strong>x</strong> says it should evaluate to <strong>y</strong> and <strong>y</strong> says it should evaluate to <strong>x</strong>. So this battle will continue 25 times, and then the markdown code will give up. The good news is that it pretty much tells you how to debug the issue at the end: <em>Enable @debug on="markdown"</em>. So, let's change the code as follows:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Markdown nested too deeply error - enable debug</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
<em><strong>//</strong> Declare two variables</em>
&#64;var x="{{y}}"
&#64;var y="{{x}}"
&#64;debug on="markdown"
&lsqb;x&rsqb;
<em><strong>//</strong> Boom</em>
smd.core.exception.NestingError: Markdown().markdown--Expansion nested too deeply. Enable @debug on="markdown"
</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre></div></pre>
<div class="extras"><p>Looks the same, but if you scroll up a bit to the top of the exception stack, you will notice the following set of messages:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Markdown recursion dump with debug enabled</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">
markdown recursion dump:
&nbsp;&nbsp;&nbsp;&nbsp;Item: 26: {{y}}
&nbsp;&nbsp;&nbsp;&nbsp;Item: 25: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 24: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 23: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 22: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 21: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 20: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 19: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 18: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 17: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 16: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 15: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 14: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 13: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 12: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 11: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 10: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 9: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 8: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 7: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 6: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 5: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 4: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 3: [x]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 2: [y]
&nbsp;&nbsp;&nbsp;&nbsp;Item: 1: [x]
Traceback (most recent call last):
</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"></pre></div></pre>
<div class="extras"><p>You can see from the recursion dump that <strong>x</strong> refers to <strong>y</strong>, then <strong>y</strong> refers back to <strong>x</strong>, and so on and so forth until it dies. Now this is a very simplistic example, but the good news is that in most cases, it will be easy to figure out if you toggle on the <strong>markdown</strong> debug handler, because it will show you each line that it tried to process, which will identify which variables and/or attributes are involved in the showdown.</p></div>
<div class="extras"><p>Next up is using <strong>ismd</strong> to debug the raw HTML...</p></div>
<div class="extras" style="border-bottom:2px solid black"><h4>Debugging the raw HTML</h4></div>
<div class="extras"><p>Another useful thing to know is how to debug the raw HTML instead of looking at the rendered output, which at times might depend on the browser you are using to display it. Usually though, this method will help you figure out where your HTML markup is messing up, so it's definitely a good trick to know.</p></div>
<div class="extras"><p>If you skipped the chapter on <strong>ismd</strong>, now might be a good time to review it.</p></div>
<div class="extras"><p><span class="bigandbold red">TODO:&nbsp;</span> Finish this when the command line docs for <strong>ismd</strong> are done, so I don't repeat a bunch of it...</p></div>
<div class="extras"><p>Okay, so that wraps the chapter on debugging. And it also marks the end of the primary documentation for <strong>smd</strong>. In the remaining chapters, we will look at several examples that illustrate how to accomplish some real-world applications for <strong>smd</strong>.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="examples"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Sample Projects built with smd</h2></div>
<div class="extras"><p>We will now look at several different examples created with <strong>smd</strong> that show some of what you can do with this app. Most of these samples were taken from actual projects I did, with just some minor cleanup to hopefully give you ideas and/or a starting point for creating your own content.</p></div>
<div class="extras"><ul class="ulist-plain">
<li>Sample 1 - <a href="#ug_samp_proposal">Creating a Project Proposal</a></li>
<li>Sample 2 - <a href="#ug_samp_avscript">How to use the <em>avshot</em> builtin</a></li>
<li>Sample 3 - <a href="#ug_samp_shots">Real World Example - AAT A/V script using <em>avshot</em></a></li>
<li>Sample 4 - <a href="#ug_samp_film">A Music Video Treatment</a></li>
<li>Sample 5 - <a href="#ug_samp_images">Using the Advanced Image and Shot Support</a></li>
</ul></div>
<div class="extras"><p>I recommend reading them in order, since each builds upon concepts covered in one or more of the prior examples.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_samp_proposal"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Creating a Proposal using smd</h2></div>
<div class="extras"><p>In this example, we will use <strong>smd</strong> to create a project proposal document. The objective here is simply to show that you can format content in all sorts of different ways using <strong>smd</strong>, not that this example is necessarily the best way to create a project proposal. A regular old word processor would likely be a better option for this task...</p></div>
<div style="margin-left:3.3em;margin-right:3.3em">
<div class="extras"><p><h1 class="blue center">Unknown Documentary Project</h1></p></div>
<div class="extras"><p>The purpose of this document is to provide an estimate for the production and post production costs associated with producing the documentary tentatively titled <em>Just Shut It Off</em>."</p></div>
<div class="extras"><p><h2 class="green">Production Estimate</h2></p></div>
<div class="plain"><p class="plainTitle">This estimate <em>does NOT</em> include costs for:</p></div>
<div class="extras"><ol class="olist">
<li>Stock footage (photos, video, audio, graphix, score, etc.) Producer will be responsible for purchasing clips to be used in the film. In the most common case, we will locate clips and provide purchasing details (costs, source, licensing info). The Producer will either purchase them directly and provide the footage to the editor, or we will send an invoice, and once it's paid in full, we will purchase the clips. Keep in mind that most sites have a <strong>no refunds, no returns policy</strong>. So once they are purchased, you own them.</li>
<li>Shooting new footage. Any footage that we need to shoot will be invoiced separately. As is the case with stock footage, an invoice will be issued for footage we are to shoot, and it must be paid in advance before we will shoot it.</li>
<li>Creation of custom graphics or animations.</li>
<li>Foley creation</li>
<li>Voiceover</li>
<li>DVD and/or Blu-ray Mastering</li>
</ol></div>
<div class="plain"><p class="plainTitle">This estimate <strong>does</strong> include costs for:</p></div>
<div class="extras"><ol class="olist">
<li>Color correction</li>
<li>Color grading</li>
<li>If we already have (own) stock footage that can be used in the film, we are happy to use it. No additional costs will be associated with using the footage that we already own, but any copyrights on said footage remain with us.[dblbrk]</li>
<li>Audio mixing (including FX, VO, score)[dblbrk]</li>
<li>Music score (provided you choose a title from our existing royalty free library)[dblbrk]</li>
<li>Mastering to high resolution H.264 digital media. Most festivals accept submissions in this format nowadays; also, this format can be remastered to either DVD or Blu-ray.</li>
</ol></div>
<div class="plain"><p class="plainTitle">Cost options</p></div>
<div class="extras"><p>Normally, there are three (3) billing options to choose from when hiring [Cloudy Logic Studios] to edit your film:</p></div>
<div class="extras"><p>1. <span style="text-decoration:underline"><strong>Per runtime minute of film</strong></span>. $525/minute. Minimum charge: $2,625 (5 minute minimum, regardless if final film is less than 5 minutes long).</p></div>
<div class="extras"><p class="note">
Example: If the <strong>TRT</strong> (total run time) of the finished film is eight (8) minutes, the total cost would be $4,200. Partial minutes will be billed in fifteen (15) second increments, i.e. ~$131 per one quarter (1/4) minute.<br /><br />
<span class="indent2"><strong>Considerations when choosing TRT option</strong><br /><br /></span>
<span class="indent">This rate applies to editing normal footage (video, photos, audio). As an example, the demo film that we produced would have all fit under this rate, with one exception (green screen footage that was keyed for ending). However, if we are given footage that requires <em>specialized attention</em>, a different rate will apply on a per clip basis.<br /><br /></span>
<span class="indent2">Some examples that require specialized attention are: Footage that is shot on green screen and must be keyed. Footage that is shaky and must be stabilized. Footage shot with incorrect color temperature. Any media (video/photos) that requires rotoscoping. Audio that must be cleaned up.</span>
</p></div>
<div class="extras"><p>2. <span style="text-decoration:underline"><strong>Per hour</strong></span>. Editing for this project will be billed at $60/hr. Since we bill based upon hours spent, there are no exceptions to the type of footage being edited, as is the case with the <em><strong>"Per runtime minute of film"</strong></em> estimate above.</p></div>
<div class="extras"><p>3. <span style="text-decoration:underline"><strong>Per project</strong></span>. An estimate for the entire project requires a completed script in AV format, with all details ironed out, including exact clips to be used, footage to be shot, etc. Given those requirements, it is not feasible to provide this option for consideration at this time.</p></div>
<div class="extras"><p><em><strong>NOTE:</strong> For this project, only billing options 1 and 2 will be offered.</em></p></div>
<div class="plain"><p class="plainTitle">Retainer</p><p>If you decide to hire [Cloudy Logic Studios] for this project, no retainer will be required.</p></div>
<div class="plain"><p class="plainTitle">Invoicing</p></div>
<div class="extras"><p>Once the project is underway, we will invoice periodically as various milestones are met. These milestones will be set and agreed upon by both parties prior to commencement. They will be something like this:</p></div>
<div class="extras"><ol class="olist">
<li>Rough cut <em>- might be in stages</em></li>
<li>Picture lock <em>- no changes to timeline after this</em></li>
<li>Color grade complete <em>- possible after audio mixing</em></li>
<li>Audio mixing complete <em>- possible before color grade</em></li>
<li>Film completion</li>
</ol></div>
<div class="extras"><p class="note">
If the project is being billed per runtime minute, the milestone invoices will be billed in fractional estimates of the minimum runtime up until picture lock, at which time remaining invoices will be billed based on the actual total runtime.<br /><br />
If the project is being billed per hour, then invoices at each milestone will reflect the total based on hours invested to achieve the milestone.<br /><br />
Usually, work on the next milestone will not commence until the invoice for the prior milestone has been paid.<br /><br />
Finally, keep in mind that final media will not be released until all invoices are paid in full.
</p></div>
<div class="plain"><p class="plainTitle">Summary</p></div>
<div class="extras"><p>If you would like to move forward with the project, here are the <span style="text-decoration:underline"><strong>next steps</strong></span>:</p></div>
<div class="extras"><ol class="olist">
<li>Choose a billing option</li>
<li>Iron out milestones</li>
<li>Acceptance of Terms - return signed contract</li>
</ol></div>
<div class="extras"><p>Thanks again for choosing [Cloudy Logic Studios] for your production needs. We look forward to working with you on this project.</p></div>
<div class="extras"><p>Please let <a href="&#109;&#97;&#x69;&#x6c;&#116;&#111;&#x3a;&#x79;&#111;&#117;&#x40;&#x79;&#111;&#117;&#x72;&#x64;&#111;&#109;&#x61;&#x69;&#110;&#46;&#x63;&#x6f;&#109;">me@mydomain.com</a> know if you have any questions regarding this estimate, or if you need any clarifications and/or changes.</p></div>
<div class="extras"><p>Warmest regards,</p></div>
<div class="extras"><p><span class="bigandbold">Firstname LastName</span><br />Producer<br />Production Company<br />512.867.5309<br />__DELETEME__mailto:you@youremailaddress.com</p></div>
<div class="extras"><p><h2 class="pbb"><span style="text-decoration:underline">Terms and Signatures</span></h2></p></div>
<div class="extras"><p>If you agree to the terms and conditions outlined in this proposal, select a billing option, <span style="text-decoration:underline">initial each page</span>, sign/print/date below, and return the entire contract to [info@cloudylogic.com].</p></div>
<div class="extras"><p><h4><span style="text-decoration:underline">Choose your Billing Option:</span></h4></p></div>
<div class="extras"><p><span class="indent"><span class="bigandbold">{&nbsp;&nbsp;&nbsp;&nbsp;} Per runtime minute.</span></span><br /><br /><span class="indent"><span class="bigandbold">{&nbsp;&nbsp;&nbsp;&nbsp;} Per hour.</span></span></p></div>
<div class="extras"><p>Upon final acceptance of video, an invoice will be generated outlining the final amount due. Payment is due within 30 days of final acceptance.</p></div>
<div class="extras"><p class="note"><span class="bigandbold"><strong>NOTE</strong>: Final media is <em>not delivered</em> until all outstanding invoices have been paid in full.</span></p></div>
<div class="extras"><p><h4><span style="text-decoration:underline">Signatures</span></h4></p></div>
<div class="extras"><p><strong>Customer Name:</strong></p></div>
<div class="extras"><p>Signature: ___________________</p></div>
<div class="extras"><p>Printed: ___________________</p></div>
<div class="extras"><p>Date: ________</p></div>
<div class="extras"><p><br /><br /><br /><br /></p></div>
<div class="extras"><p><strong>Cloudy Logic Studios</strong></p></div>
<div class="extras"><p>Signature: ___________________</p></div>
<div class="extras"><p>Printed: ___________________</p></div>
<div class="extras"><p>Date: ________</p></div>
</div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_samp_avscript"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Sample A/V Script Document</h2></div>
<div class="extras"><p>In this example, I will show you how to use <strong>smd</strong>'s <strong>avshot</strong> builtin to create an Audio/Visual (A/V) Script. AV Scripts are simple two column scripts that describe the visuals (i.e. shots) on the left, and the audio (i.e. narration or voiceover), on the right. <strong>smd</strong> has several builtins that assist with creating this type of script, but in this example, we are going to focus on <strong>avshot</strong>.</p></div>
<div class="extras"><p>Start by including <strong>&#64;import &lsqb;sys.imports&rsqb;/avs/avshot.md</strong>, and you will get everything you need to use <strong>avshot</strong>.</p></div>
<div class="extras"><h2>A/V Script Series</h2></div>
<div class="cover"><h3>Title of Script</h3><p>Script Author</p><p class="coverSummary">Script summary goes here and can be as long as needed. Let it wrap around if you have softwrap, or just go on forever.</p></div>
<div class="revision"><p class="revTitle">Revision: <em><strong>1a</strong></em></p></div>
<div class="contact"><table style="border:none"><tr style="border:none"><td class="left nowrap" style="border:none">Copyright (c) 2020 by YOURNAME.<br />All Rights Reserved.<br />Don't steal my script<br /></td><td class="right nowrap" style="border:none">Contact Name<br />Phone<br /><a href="email@yourdomain.com">me</a><br /></td></tr></table></div>
<div class="review"><p class="divTitle">Notes to Reviewers</p><p>    Please send <a href="email@yourdomain.com">me</a> any and all <a href="DELETE_ME_mailto:email@yourdomain.com?subject=Your%20Film%20Title%20Feedback">feedback</a>, preferably by marking up the PDF using embedded comments. If you edit the PDF text, do so inline using comment boxes, or if you edit the text directly, change the color and/or font size so I can easily find it. <ins>additions are marked like this</ins> <del>deletions are marked like this</del></p></div>
<div class="plain"><p class="plainTitle">Film Pitch for <strong>Client Name</strong></p><p>    <strong>Client Name</strong>:<br /><br />    Please review the proposed script for your upcoming project. We believe that it will show the type of production value that we will bring to your project, focusing primarily on ...</p></div>
<div class="section"><p class="divTitle"></p>
<p>A/V Script for <strong>Client Name</strong> project entitled "Best-est Social Media Campaign for Acme Widgets, LLC"</p>
</div>
<div class="extras"><p><strong>&lsqb;avshot.visual&rsqb;</strong> begins the definition of a shot. You can list one or more shots in this section, and include formatting and other markdown. When you are done listing the shots, you will use either <strong>&lsqb;avshot.audio&rsqb;</strong> or <strong>&lsqb;avshot.noaudio&rsqb;</strong> to either begin listing the narration or voiceover, or simply close out the shot.</p></div>
<div class="extras"><p>In this example, we will open with <strong>avshot.visual</strong>, write out shot description, and the close with <strong>avshot.noaudio</strong>, so there won't be anything listed in the right column.</p></div>
<div class="av"><ul>
<li><strong>CU:&nbsp;</strong> Staring out the window</li>
</ul>
</div>
<div class="extras"><p>Not too exciting just yet, but we'll get there. The more common case is to use <strong>avshot.visual</strong>, then describe the shot, use <strong>avshot.audio</strong>, describe the narration or voiceover, then close with <strong>avshot.end</strong>. Let's do that now, and see how it looks.</p></div>
<div class="av"><ul>
<li><strong>WS:&nbsp;</strong> Busy freeway rush hour traffic at a standstill</li>
</ul>
<p>In this example, after the preceding shot declaration, we used <strong>&lsqb;avshot.audio&rsqb;</strong> to close out the visuals section, and begin the narrative section. You can have as much narration and notes as you need. When you're done, close out the shot with <strong>&lsqb;avshot.end&rsqb;</strong>.</p>
<p>There are a bunch of useful shot notation mnemonics defined in the <strong>sys.imports/avs/shotacro.md</strong> file, so you'll definitely want to review that to get an idea of those goodies!</p>
</div>
<div class="plain"><p class="plainTitle">Mixing AV Script builtins and other markdown</p></div>
<div class="extras"><p>At any time in your AV Script, you can switch back and forth between shots and normal markdown. All you do is place the normal markdown outside the <strong>avshot</strong> builtins. It's that simple. When you're ready, you just start adding more shots!</p></div>
<div class="av"><ul>
<li><span class="red">PART 1: Description for part 1</span></li>
<li>PART 1A</li>
<li><span class="blue">PART 1B</span></li>
</ul>
<p><a href="https://domain.com/article_link/">Link to Article</a></p>
<p>notes for the first part.</p>
<p>and some other notes.</p>
<p>And a few more.</p>
</div>
<div class="av"><ul>
<li>WS:Couple watching TV</li>
</ul>
</div>
<div class="av"><ul>
<li>CU:Couple looking concerned</li>
</ul>
<p>The narrative for the shots on the left would go here.</p>
</div>
<div class="av"><ul>
<li>MS:Paranoid guy looking thru blinds</li>
<li>If you indent a line following a shot, then that text becomes part of the prior shot, allowing you to put a little more description if you need it.</li>
</ul>
<p>If you want to put inline notes, questions or use any of the Simple Divs (<em>note, question, vo, important, greyout</em>), you need to use the *<strong>no-div</strong> version. The <strong>no-div</strong> version uses the suffix <strong>_nd</strong> on the key attribute names. For example, if I use the default and write:<br /><br /> <strong>&lsqb;note&lpar;t="this is my note")]</strong>, this is what I will see:</p>
<div class="extras"><p class="note">this is my note</p></div>
<p>See how the box jams up against the left margin of the right column? It also clears the floats, which will mess up the formatting for the next element in the audio section... ugh!</p>
<p>This time, i'll write <strong>note.nd</strong>, to use the no-div variant, and let's see how that looks:</p>
<p class="note">this is my note</p>
<p>Much better! Just remember to use the <strong>nd</strong> versions of any of the simple divs when you are using them inside the <strong>avshot</strong> builtins!</p>
</div>
<div class="av"><ul>
<li>ECU:Perspective looking thru peephole.</li>
</ul>
</div>
<div class="av"><ul>
<li>CU:Locking door</li>
</ul>
<p>More narrative here that goes with the shot on the left...</p>
</div>
<div class="av"><ul>
<li>PART 2: The middle section</li>
</ul>
<p>This is a description for this section</p>
<p><a href="https://domain.com/another_article_link">Link to Article</a> <-- That should have been turned into a link</p>
</div>
<div class="av"><ul>
<li><span class="red">MS/CU:Clips of people angry</span></li>
<li>You can add more information about a shot by simply typing more info. Each line break in your text begins a new line in the section.</li>
<li>This will be on a new line,</li>
<li>And so will this.</li>
</ul>
<p>The narration for the Clips of people angry would be here...</p>
<p>New lines over here do the same thing. Each time you insert a line in your markdown, it will start a new paragraph.</p>
<p>Like this...</p>
<p>And this!</p>
</div>
<div class="av"><ul>
<li>WS:violence</li>
<li>This adds additional visual info on your shot.</li>
<li><span class="green">You can also prefix each new line with a different class for formatting...</span></li>
</ul>
<p>CGI Websites and blogs</p>
<p><span class="blue">CGI Use PIP to fill the screen</span></p>
<p>Words, words, words, blah, blah, blah</p>
</div>
<div class="section"><p class="divTitle">Video Segment Part 2 is next ...</p></div>
<div class="av"><ul>
<li><strong>CGI:</strong></li>
</ul>
<p>CGI Text is here</p>
</div>
<div class="av"><ul>
<li><span><strong>FTB:</strong></span> <em>fin</em></li>
</ul>
<p>The End.</p>
</div>
<div class="av"><ul>
<li>WS:Stock clips of TV shows that ...</li>
</ul>
<p><span class="blue">So many programs on television today ...</span></p>
<p>We should <em><strong>practice tolerance</strong></em> and ...</p>
<p><span class="green">Its also crucial for people to <em>...</em> and <strong>...</strong>.</span></p>
<p><span class="red">We are past due for ...</span></p>
</div>
<div class="av"><ul>
<li>TS1</li>
</ul>
</div>
<div class="plain"><p class="plainTitle">Specialized avshot builtins</p></div>
<div class="extras"><p>There are two short versions of avshot that can be used for quick shot only cases or shot with short description. They are:</p></div>
<div class="extras"><p><span class="indent"><strong>&lsqb;avshot.shot_only&rsqb;</strong> and <strong>&lsqb;avshot.shot_with_desc&rsqb;</strong></span></p></div>
<div class="extras"><p>They are just simplified versions you can use to quickly generate a shot only or a shot with short description.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Simplified <em>avshot</em> methods</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// If all you have is a shot (visual), use the shot_only method</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.shot_only(_s="shot info"&rpar;]</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// If you have a shot (visual) and audio (narration,...), use the shot_with_desc method</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.shot_with_desc(_s="shot info" _d="shot description"&rpar;]</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// An example of each method</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.avshot.shot_only(_s="&lsqb;cu&rsqb; Hands holding phone")&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.avshot.shot_with_desc(_s="&lsqb;ecu&rsqb; text message on phone" _d="help&lsqb;bb&rsqb;me")&rsqb;</pre>
</div>
<div class="extras"><p>And here is how the two <strong>avshot</strong> methods above will render:</p></div>
<div class="av"><ul>
<li><strong>CU:&nbsp;</strong> Hands holding phone</li>
</ul>
</div>
<div class="av"><ul>
<li><strong>ECU:&nbsp;</strong> text message on phone</li>
</ul>
<p>help<br /><br />me</p>
</div>
<div class="extras"><p>Sometimes all you need are these shorthand methods to describe your shots, but in other cases the separate section-based methods (<strong>avshot.visual</strong>, <strong>avshot.audio</strong>, <strong>avshot.end</strong> are better. The good news, you can mix and match as you like. Before we leave this example, let's review the builtin hep string for <strong>avshot</strong>.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">For reference, here is the help for <strong>avshot</strong>:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>avshot</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Used to emit shots in A/V Script-style documents.<br /><br />&nbsp;&nbsp;<strong>Common Parameters</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_s</strong> - shot info. e.g. WS: Lake with people swimming near shore<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_d</strong> - shot description/narrative for opening wide shot<br /><br />&nbsp;&nbsp;<strong>Methods</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>visual</strong> - Open a shot declaration, ready for shot(s)<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>audio</strong> - Close shot section and transition to audio; ready for shot description<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>end</strong> - Close shot declaration<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>noaudio</strong> - Close shot declaration when no shot description will be set<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>shot_only(_s)</strong> - Create a complete shot declaration; shot(s) specified in <strong>_s</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>shot_with_desc(_s,_d)</strong> - Create complete shot declaration; shot(s) <strong>_s</strong>, description <strong>_d</strong>.</pre>
</div>
<div class="extras"><p>Okay, that wraps up this chapter on creating A/V scripts with <strong>smd</strong>.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_samp_shots"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Sample A/V Script using <em>avshot</em> builtin</h2></div>
<div class="extras"><p>In this example, we will review an actual AV script from a project I did a few years back. This version was originally written using the old <strong>avscript</strong> version of the software, before it supported embedding images, so it's entirely done using text to describe the visuals and narration. It was converted to conform to the new <strong>smd</strong> builtins for inclusion in the user guide.</p></div>
<div class="extras"><p><h1 class="center blue">AAT 4th Gen Video Series</h1></p></div>
<div class="cover"><h3>Using iOS Devices with the AAT</h3><p>Ken Lowrie</p><p class="coverSummary">This video shows how to use iOS devices to connect to the AAT's internal web server to control and manage the AAT. This video demonstration will use an iPhone and iOS 8.3.</p></div>
<div class="revision"><p class="revTitle">Revision: <em><strong>1a</strong></em></p></div>
<div class="contact"><table style="border:none"><tr style="border:none"><td class="left nowrap" style="border:none">Copyright (c) 2015 by Sunsight Instruments.<br />All Rights Reserved.<br />Antenna Alignment Tool<br /></td><td class="right nowrap" style="border:none">Ken Lowrie<br />407-555-1000<br /><a href="email@yourdomain.com">me</a><br /></td></tr></table></div>
<div class="review"><p class="divTitle">Notes to Reviewers</p>
<p>Please send feedback by marking up the PDF using embedded comments or notes. If you edit the PDF text directly, be sure to change your font color so that I can easily find the changes.</p>
<p>Notes that begin with <span class="blue">"VOICEOVER NOTE"</span> or <div class="extras"><p class="vo">are inside a box like this</p></div></p>
<p>can be ignored; they are for the voiceover guy.</p>
<p>Additions <ins>are now marked like this</ins> and deletions <del>are now marked like this</del></p>
<p>Thanks in advance for reviewing and commenting on the script!</p>
</div>
<div class="section"><p class="divTitle">Script begins here</p></div>
<div class="av"><ul>
<li><strong>CGI:</strong>Using iOS devices with the AAT</li>
<li><em>RECAP</em>: Show clips from finished video timelines that recap</li>
<li><strong>CGI:</strong>iPhone or iPad Devices can operate the AAT</li>
<li><strong>CGI:</strong>iOS v7.1.2 or later required</li>
</ul>
<p>Welcome to <em>Using iOS devices with the AAT</em>.</p>
<p>In this video, we will show you how to control your AAT using an iOS device. It's simple and efficient, using tools that you are already familiar with: Your iOS Device and a Web Browser! Here's a quick preview:</p>
<p>First, power on the AAT and wait for AZM to begin flashing</p>
<p>Then, connect to the AAT hotspot with your iOS device</p>
<p>Finally, open aat.sunsight.com in your browser, or just touch the AAT home page icon</p>
<p>And that's all there is to it!</p>
<p>Once you've connected, you can do things like print site reports, email those reports to your customers, and more.</p>
<p>Using iOS devices to connect to the AAT's internal web server allows you to access the User Interface or UI, which in turn, enables you to fully manage and/or control the AAT.</p>
</div>
<div class="extras"><h1></h1></div>
<div class="av"><ul>
<li>Additional setup and shortcuts are covered</li>
<li>Adobe Acrobat Reader for viewing PDF reports</li>
<li>How to create a PDF Report</li>
<li>Sending PDF reports to your customers</li>
</ul>
<p><ins>In the remainder of this video, we will cover a one-time setup for your iOS device that enables you to efficiently control your AAT.</ins></p>
<p>We will cover how to set up a home screen shortcut, to make accessing the AAT quick and easy, and we'll discuss Adobe's Acrobat Reader application for viewing PDF reports on your device.</p>
<p>After a quick introduction on generating PDF reports, we'll show you how to get the PDF reports to your customers.</p>
</div>
<div class="av"><ul>
<li>Requirements and Limitations</li>
<li>The AAT should be powered on and ready for clients to attach</li>
<li>Refer to <em><strong>Connecting to the AAT with the Android Phone</strong></em> for details</li>
<li>Only one (1) user can be connected at a time</li>
</ul>
<p>This video assumes the AAT is powered on and ready for clients to attach to its internal hotspot. View the video entitled <em><strong>Connecting to the AAT with the Android Phone</strong></em> to learn about the AAT startup process.</p>
<p>Keep in mind that only one user can control the AAT through its onboard website at a time. Multiple users connected at the same time is not supported.</p>
</div>
<div class="av"><ul>
<li>SIDEBAR: Connecting to the AAT's Wireless Network</li>
<li>IMAGE: Picture of an iPhone or an iPad</li>
<li>Connecting to the network will look different depending on your hardware and software</li>
<li>Process is <em>identical</em> to connecting to <em>any</em> wireless hotspot</li>
<li>Refer to your device documentation for additional help</li>
</ul>
<p><ins>You'll need an iOS device that is running version 7.1.2 or later in order to use it to control the AAT.</ins></p>
<p>In the demonstration, we will be using an iPhone 6+ running iOS 8.3 with the native Safari browser. You can use other iOS browsers, such as Google Chrome, if you prefer.</p>
<p>Depending on the hardware and software version of your iOS device, along with the browser you are using, this process may look slightly different than what is shown in the video.</p>
<p>The good news is that connecting to the AAT's wireless network is <em><strong>identical</strong></em> to connecting to any wireless hotspot, so if you are having trouble figuring out how to do this, refer to the documentation that came with your iOS device for additional assistance.</p>
<p>Let's go ahead and watch the demonstration of using an iOS device to control the AAT. The first step is to connect to the AAT's Wireless Network or hotspot.</p>
</div>
<div class="av"><ul>
<li>SCAST: Show AAT WiFi Network Connect via iOS 8.3</li>
</ul>
<p>To do this, on your iOS device, choose SETTINGS, and then select Wi-Fi.</p>
<p>Ensure Wi-Fi is on, and then look for the AAT Wireless hotspot.</p>
<p>The AAT hotspot has a network name beginning with <em>AAT 90</em>, followed by a series of digits that represent the serial number of the unit. The serial number is on a printed decal affixed to the back of the tool.</p>
<p>Touch the AAT hotspot in the list to initiate the connection.</p>
<p>You can tell that you have successfully connected to the hotspot when the name appears with a checkmark next to it, <em>and</em> the WiFi icon is displayed in the top left status bar, as shown in the video.</p>
</div>
<div class="extras"><h1></h1></div>
<div class="av"><ul>
<li>Connecting to the AAT</li>
<li>SCAST: Show the iOS home screen display and dock, and touch the Safari icon</li>
</ul>
<p>Now that we are connected to the AAT hotspot, we are ready to access the AAT User Interface. To do that, you need to launch Safari, so go ahead and find the <em>Safari</em> icon on your iOS Device, normally located on the dock, and touch it to launch the browser.</p>
</div>
<div class="av"><ul>
<li>Launch the AAT User Interface</li>
<li>SCAST: Touch the new tab icon in Safari</li>
<li>SCAST: Show aat.sunsight.com and then Home page</li>
<li>SCAST: Show 192.168.0.50 and then Home page</li>
</ul>
<p class="vo">GREGG: BEWARE!!!<br /><br />Here is that AAT dot SUNSIGHT dot COM again... :)</p>
<p>To start the User Interface, open an empty browser tab, and in the address field, enter the URL <em>aat.sunsight.com</em>, and then press <em>GO</em>. The AAT user interface home page will be displayed, and you're now ready to setup, manage profiles and print reports!</p>
<p>Alternatively, you can enter the IP address of the AAT, which is usually, 192.168.0.50.  Enter it <em><strong>exactly</strong></em> as shown, with the periods separating the four groups of digits. Press the GO key and wait for the home page of the AAT user interface to display.</p>
</div>
<div class="av"><ul>
<li>Optional Step - Saving a shortcut or bookmark</li>
<li>Save a shortcut on the home screen to quickly return to the AAT home page</li>
</ul>
<p>To save time starting the AAT User Interface in the future, you can create a shortcut on your home screen, which you can then tap to go directly to the AAT home page.</p>
</div>
<div class="av"><ul>
<li>SCAST: Show the sharing icon and save to home screen</li>
<li>SCAST: Show launching AAT UI via home screen icon</li>
</ul>
<p>To add a shortcut to the home screen, start Safari and launch the AAT User Interface by typing <em>aat.sunsight.com</em> in the address bar, and then touch the sharing icon (located at the bottom of the page on an iPhone, or at the top next to the address bar on an iPad).</p>
<p>Choose <em>Add to Home Screen</em>, and type in a name, such as <em>AAT</em>, press the <em>ADD button</em>, and the shortcut will be added to your homescreen.</p>
<p>From now on, after connecting to the AAT's WiFi network, you can simply touch the shortcut icon on the home screen to start the AAT User Interface, instead of launching the browser and typing in the URL or IP Address!</p>
</div>
<div class="av"><ul>
<li>SCAST: Show the sharing icon and add bookmark icon</li>
<li>SCAST: Show launching AAT UI via browser bookmark</li>
</ul>
<p>In addition to saving a shortcut on the home screen, you can create a bookmark by tapping the Bookmark icon, also available on the sharing submenu.</p>
<p>Enter the name you'd like to use, then touch <em>Save</em>.</p>
<p>To access the bookmark later, simply tap the bookmark icon from inside the browser, and then tap on the saved AAT Bookmark.</p>
</div>
<div class="av"><ul>
<li>Adobe Acrobat</li>
<li>Allows viewing and managing PDF reports</li>
<li>Provides a means of saving PDF reports so they can be recalled later</li>
<li>This app is optional; it is not needed to view or email PDFs on iOS</li>
</ul>
<p>You can install the free Adobe Acrobat application from the App store in order to view and manage AAT reports in PDF format on your iOS device.</p>
<p>PDF format is a very convenient way to send reports generated by the AAT to your customers, usually via email. In addition, the Adobe Acrobat app provides a convenient way to save reports and email them later.</p>
<p>Keep in mind that installing the Adobe Acrobat application is optional, and is not needed to view or email PDF reports on your iOS device.</p>
</div>
<div class="av"><ul>
<li>SCAST: Show how to download/install Adobe Acrobat via the App store</li>
</ul>
<p>To install Adobe Acrobat, start the <em>App Store</em> by touching the <em>App Store icon</em> on the home screen.</p>
<p>Press the <em>Search button</em> in the bottom bar, and then, in the search area, type <em>ADOBE ACROBAT</em> to locate the free download, and then install the application on your device.</p>
<p class="note"><strong>NOTE</strong>: Your device must be configured with an account in order to access the App Store. Refer to the documentation that came with your device for further information.</p>
</div>
<div class="extras"><h1></h1></div>
<div class="av"><ul>
<li>Generating Reports</li>
<li>Site Reports can be generated in Adobe PDF format</li>
<li>View reports before sharing to verify data is complete and accurate</li>
</ul>
<p>Once you have completed your work using the AAT, you can generate site reports in Adobe PDF format to send to your customers.</p>
</div>
<div class="av"><ul>
<li>SCAST: Show the site report being generated</li>
</ul>
<p>To generate the PDF site report, touch the "Profiles, Captures, Reports" tab on the AAT Website, and then touch the PDF button next to the site you want to report on, or select "All PDF" to report on all sites.</p>
<p>The PDF report is generated and shown in the browser tab, at which point you can review the report, then when you're ready, press the SHARE icon, and choose your preferred method for sharing with your customer.</p>
</div>
<div class="av"><ul>
<li>SCAST: Show opening the PDF in Adobe Reader app</li>
</ul>
<p>If you have an optional PDF Viewer installed on your iOS device, such as the free Adobe Acrobat app, you can use the <em>Open in</em> feature of iOS to view your report and store it.</p>
<p>Once you open a report in the Adobe Acrobat app, it is saved there, and can be reviewed and shared at a later time.</p>
<p>This provides a convenient way to access your reports without needing to reconnect to the AAT, and regenerate them.</p>
</div>
<div class="av"><ul>
<li>Sharing Reports</li>
<li>To email reports, you must have an email account configured on your iOS device</li>
<li>Refer to your iOS documentation or consult your IT department for assistance</li>
</ul>
<p>In most cases, you'll want to email the generated PDF reports to your customers.</p>
<p>In order to do this, an email account must be configured on your iOS device, and you must be connected to the Internet, either via a mobile data connection, or via a wireless connection with Internet connectivity.</p>
<p>Refer to the iOS documentation if you need assistance with configuring an email account on your device, or consult with your company's IT staff..</p>
<p class="note"><strong>REMEMBER</strong>: The AAT's internal wireless hotspot does <em>not</em> have Internet connectivity. While attached to the AAT, however, you can generate and <em>share</em> the PDFs via email, they just won't be sent until the device is connected to the Internet.</p>
</div>
<div class="av"><ul>
<li>SCAST: Email report to customer</li>
</ul>
<p>To email the report to a customer, touch the <em>Sharing</em> icon, and then touch the <em>mail</em> icon. Compose your email and press the <em>SEND</em> button to finish. You may wish to verify that the email with the report was sent successfully.</p>
</div>
<div class="av"><ul>
<li>Summary</li>
</ul>
<p>This concludes the video on using iOS devices for operating and managing the AAT.</p>
<p>We've seen how to connect to the AAT's built-in WiFi hotspot and launch the AAT User Interface, as well as how to create shortcuts for quickly navigating to the AAT's web site.</p>
<p>We also discussed using the Adobe Acrobat application for viewing and managing PDFs.</p>
<p>Finally, we learned how to generate a site report and email it to a customer.</p>
<p>If you need information on connecting to the AAT using Windows or Android Devices, refer to the specific training videos available on the training page at sunsight.com. Thanks for watching!</p>
</div>
<div class="section"><p class="divTitle">Shotlist, Images and Screen Captures for Video</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_samp_film"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Creating a Treatment for Film/Video</h2></div>
<div class="extras"><p><h1 class="blue center">Music Video Treatment</h1></p></div>
<div class="cover"><h3><em>Title of Project</em></h3><p><strong>Confidential</strong></p><p class="coverSummary">This is the proposed music video treatment for the upcoming <strong>Artist Name</strong> single titled <em>Title of Project</em>.</p></div>
<div class="cover"><h3></h3><p><strong>DISCLAIMER</strong>: This document is strictly private, confidential and personal to its recipients and should not be copied, distributed or reproduced in whole or in part, nor passed to any third party without the expressed, written consent of <strong>Production Company, LLC</strong>.</p><p class="coverSummary"></p></div>
<div class="revision"><p class="revTitle">Revision: <em><strong>1f</strong></em></p></div>
<div class="contact"><table style="border:none"><tr style="border:none"><td class="left nowrap" style="border:none">Copyright (c) 2020 by <a href="https://prodcompany.com">Production Company</a>, LLC.<br />All Rights Reserved.<br />Antenna Alignment Tool<br /></td><td class="right nowrap" style="border:none">Joe Producer<br /><em>555-867-5309</em><br /><a href="__REMOVETHIS__mailto:joe@prodcompany.com">joe@prodcompany.com</a><br /></td></tr></table></div>
<div class="section pbb"><p class="divTitle"><em>Title of Project</em> Music Video Casting Call and Character Breakdown</p></div>
<div class="extras"><p><strong>Production Title:</strong> <em>Title of Project</em><br /><strong>Independent/Student/Studio:</strong> Independent<br /><strong>Production Type:</strong> Music Video<br /><br /><strong>Production Location:</strong> NE San Antonio<br /><br /><strong>Production Start Date:</strong> 08/05/2018<br /><strong>Production Wrap Date:</strong> 08/20/2018<br /><strong>Production Schedule:</strong> August 13 - 17 &lpar;<em>Preferred</em>&rpar;<br /><br /><span class="indent">We want to shoot between August 13th - August 17th, based on schedules. Prefer if cast can be available to shoot any day/time (weekdays, evenings or weekends), but we will work around schedules. Primary location will be NE San Antonio.</span></p></div>
<div class="extras"><p><strong>Producer&lpar;s&rpar;:/Director&lpar;s&rpar;:</strong> Production Company</p></div>
<div class="extras"><p><strong>Synopsis:</strong> "<em>Title of Project</em>" will be a combination narrative and performance video. The song is about ...</p></div>
<div class="plain"><p class="plainTitle">Character Breakdowns:</p></div>
<div class="extras"><p><em><strong>All parts are non-speaking, and we are in search of actors that are able to emote well, especially for the role of <span class="cast">MOM</span>.</strong></em></p></div>
<div class="extras"><p>Ethnicities aren't important, however, we will try to cast the <span class="cast">MOM</span>, <span class="cast">SON</span> and <span class="cast">DAUGHTER</span> roles with actors that <em>could be</em> related.</p></div>
<div class="extras"><p><span class="cast">MOM</span> (Female, 35-45) This is the lead role in the video. Mother arrives home and discovers... In the various scenes, we follow her through ... This character will be a very emotional role throughout the video. <em>Must be available to take family pictures before production begins.</em></p></div>
<div class="plain"><p class="plainTitle">Scene Breakdowns:</p></div>
<div class="scene"><p class="divTitle">Scene 1 - <span class="bigandbold blue">Narrative -</span> Location S:0 Instrumental</p><p><span class="wardrobe"><strong>WARDROBE</strong></span><br /><br /><span class="props"><strong>PROPS</strong></span> <span class="props">Grocery Bags</span><br /><br /><span class="makeup"><strong>MAKEUP</strong></span><br /><br /><span class="cast"><strong>CAST</strong></span> <span class="cast">MOM</span>, <span class="cast">DAUGHTER</span></p></div>
<div class="av"><ul>
<li><strong>WS:&nbsp;</strong>Crane high shooting over car<br /><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot0.jpg" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/><br /><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot0</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong>WS:&nbsp;</strong>Crane high shooting over car</em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>24mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr></table></li>
</ul>
<p>Title: <em>Title of Project</em><br />Artist: Artist Name<br />Directed by: Dan Director<br />Produced by: <a href="https://prodcompany.com">Production Company</a></p>
<p>Probably just use the <em>Title of Project</em> and Artist Name titles on this shot.</p>
<p class="note">This needs to start high enough up that you can't see the trunk, and make sure the sky is NOT blown out! It comes down to reveal <span class="cast">MOM</span> opening trunk and reaching in to grab groceries.</p>
</div>
<div class="av"><ul>
<li><strong>WS:&nbsp;</strong>Crane Down to Mom removing groceries<br /><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/><br /><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong>WS:&nbsp;</strong>Crane Down to Mom removing groceries</em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>24mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr></table></li>
</ul>
<p class="note">Make sure <span class="cast">MOM</span> is already moving when she comes into frame.</p>
</div>
<div class="section"><p class="divTitle"><span class="bigandbold blue">Narrative -</span> continues - Location S:15 L:~14s-</p></div>
<div class="lyrics"><p class="lyrics italic"><strong>Song Lyrics</strong></p><p><br />I'm sorry momma<br />that you're reading this<br />I always wanted to make you smile<br />so I must go on with this</p></div>
<div class="plain"><p class="plainTitle">Scene 99 - Random Stuff</p></div>
<div class="av"><ul>
<li>WS: Describe your opening master shot here</li>
</ul>
</div>
<div class="av"><ul>
<li><span class="bigandbold red">Stock -</span> Clips of moments from his life</li>
</ul>
<p>Various shots implying flashbacks to memories or moments of his life. <em>If needed</em></p>
</div>
<div class="av"><ul>
<li><span class="bigandbold red">Stock -</span> Possibly one w/<span class="cast">MOM</span> comforting son</li>
</ul>
<p>Show his smile. Return to stock image. <em>If needed</em></p>
</div>
<div class="section"><p class="divTitle">Cast Headshots</p></div>
<div class="extras"><h2>For the part of <span class="cast">DAUGHTER</span></h2></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/actress1.jpg" style="margin-left:auto;margin-right:auto;width:40%;border:1px solid;padding:1em;"/> Actor1 Name - Source: TAW</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/actress2.jpg" style="margin-left:auto;margin-right:auto;width:40%;border:1px solid;padding:1em;"/> Actor2 Name - Source: TAW</p></div>
<div class="extras"><h2>Proposed shooting schedule</h2></div>
<div class="extras"><p>Originally, production was planned for August 2018, but it has been delayed until September due to scheduling conflicts of both cast and crew. We are anticipating two to three (1/2) days for production as follows:</p></div>
<div class="scene"><p class="divTitle">Scene 3 EXT</p>
<p>Cast: <span class="cast">MOM</span>, <span class="cast">DAUGHTER</span>, <span class="cast">SON</span><br /><br />Info: One (1) production day, evening shoot, <em>call time <strong>5pm</strong>, wrap time <strong>8pm</strong></em>.</p>
</div>
<div class="scene"><p class="divTitle">Scene 1 EXT & Scene 2 INT</p><p>Cast: <span class="cast">MOM</span>, <span class="cast">DAUGHTER</span><br /><br />Info: 1/2 Production day, <em>call time <strong>8a</strong>, wrap time <strong>12pm</strong> (noon)</em></p></div>
<div class="scene"><p class="divTitle">Scene 1 EXT & Scene 2 INT</p><p>Cast: <span class="cast">MOM</span><br /><br />Info: 1/2 Production day, <em>call time <strong>3p</strong>, wrap time <strong>8p</strong></em>. This could be scheduled the same day as Scenes 1 and 2 if the actor is available and prefers this option (longer day)</p></div>
<div class="extras"><p><strong>NOTE:</strong> Actual shoot days will be scheduled according to cast availability</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="ug_samp_images"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Embedding Images in AV Shots &lpar;avshot&rpar;</h2></div>
<div class="extras"><p>This chapter will cover using the various builtins for using images in combination with the <strong>avshot</strong> builtin. If you have yet to review the section on <a href="#ug_image_builtins"><strong>&#64;image</strong> builtins</a>, go ahead and do that now, because the rest of this chapter assumes you have! We will provide some additional examples on using the <strong>&#64;image</strong> builtins in <strong>avshot</strong>'s, and then move on to the more powerful builtins that are declared in the <strong>avs/&ast;.md</strong> files.</p></div>
<div class="extras"><p>Recall from the section on <strong>&#64;image</strong> builtins that you can manipulate the size of the image using the <strong>IMG_SIZE</strong> macros. The image sizing macros, when used inside the <strong>avshot</strong> builtin will seem different, given the fact that the visual and audio columns split the document window in half, and thus the width will be a percentage of that half... Here's an example to illustrate the point, starting with the markdown, and the rendering immediately follows it:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Using image variables inside avshot builtin</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare an image variable</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;image _id="myshot" src="&lsqb;image_path&rsqb;/shot1.jpg" style="&lsqb;!var.IMG_STYLE.inline_border!&rsqb;"</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Start the A/V shot declaration</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.visual&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Change the image size to large and render it</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.large&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Change the image size to thumb and render it</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.thumb&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Close the A/V shot declaration</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.noaudio&rsqb;</pre>
</div>
<div class="extras"><p>And here is what the browser will render:</p></div>
<div class="av"><ul>
<li><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/></li>
<li><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;"/></li>
</ul>
</div>
<div class="extras"><p>So although we specified an image size of large, it only used half the window. This is because in <strong>avshot</strong>'s, each column uses half the window, so the relative sizes used in the styling for images is a percentage of that column. Of course it works the other way too:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declare an image variable</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Start the A/V shot declaration and add a shot descriptor</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.visual&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">WS: My wide shot tag here</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Switch to the Audio/Narrative</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.audio&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Change the image size to large and render it</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.large&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Change the image size to thumb and render it</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.thumb&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;myshot&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Close the A/V shot declaration</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.end&rsqb;</pre>
</div>
<div class="av"><ul>
<li>WS: My wide shot tag here</li>
</ul>
<p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:90%;border:1px solid;padding:1em;"/></p>
<p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:20%;border:1px solid;padding:1em;"/></p>
</div>
<div class="extras"><p>You will see many examples using these builtins throughout the user documentation, especially in the <a href="#examples"><strong>Samples</strong></a> chapters, so you may want to look around at them to see more.</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>avs/shot.md builtins</h3></div>
<div class="extras"><p>Moving on, let's now spend some time looking at the more powerful builtins that are included in the <strong>sys.imports/avs/shot.md</strong> file that are part of <strong>smd</strong>. As we did previously, let's start by having a look at the help strings for the macros we will be using.</p></div>
<div class="extras"><p>Note that we won't look at all the building blocks in <strong>shot.md</strong>, just the more common things that you will use when writing A/V style markdown documents with shots and images. We will start with the factories: <strong>image_factory</strong>, <strong>image_factory_abs_style</strong> and <strong>shot_factory</strong>, which are used to create images and shots respectively, on the fly. The two image factories have additional macros to assist you, <strong>image_factory_config</strong> and <strong>_img_template_</strong>.</p></div>
<div class="extras"><ol class="olist">
<li><strong>image_factory</strong> - The most commonly used macro</li>
<li><strong>image_factory_abs_style</strong> - A variant that allows CSS styles to be specified directly</li>
<li><strong>image_factory_config</strong> - A macro used to change the default styles used by the two previous macros</li>
<li><strong>_img_template_</strong> - The template that is used when either factory creates a new @image variable.</li>
<li><strong>shot_factory</strong> - A macro used to create a variable to store the technical aspects of an image.</li>
</ol></div>
<div class="extras"><p class="note blue">
<span class="bigandbold">What is a shot?<br /><br /></span>
In this context, think of a <em>shot</em> as a way to describe the image in a technical fashion. Things like the camera information (lens, aperture, ISO, etc.) and even textual information. Because the two are <em>related</em>, this is one exception to the rule of avoiding using identical names across variables in namespaces. For this case, it makes sense to create both an <strong>&#64;image</strong> <em>shot1</em> and an <strong>&#64;var</strong> <em>shot1</em>. Later on, we will see how this is used to create even more flexible macros.
</p></div>
<div class="extras"><p>Let's look at the help strings for all of these, including the <strong>shot_factory</strong>.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>image_factory</strong> help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>image_factory(nm="varname" ip="img_srcpath" st="CSS Style Var/Attr")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Generates an @image declaration for <strong>nm</strong> with style specified as variable/attribute.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;See also: <strong>image_factory_abs_style</strong>.<br /><br />&nbsp;&nbsp;<strong>Parameters</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>nm</strong> - Specifies the name to use for the <strong>@image</strong> variable<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>ip</strong> - Specifies the image source path; can be absolute or relative<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>st</strong> - Specifies an existing variable or attribute with CSS styling for the image<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If <strong>st</strong> is wrapped with exclamation marks, it will defer expansion until runtime<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Otherwise, the expansion occurs immediately. In other words, if you write:<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>st="<em>!IMG_STYLE.inline!</strong></em>" - then <strong>style</strong> is <strong>&lsqb;IMG_STYLE.inline&rsqb;</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>st="<em>IMG_STYLE.inline</strong></em>" - then <strong>style</strong> is the value of <strong>IMG_STYLE.inline</strong><br /><br />&nbsp;&nbsp;<strong>Examples</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;image_factory&lpar;nm="myshot" ip="path/image.png" st="!IMG_STYLE.inline!"&rpar;&rsqb;</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>Is the same as</em><br />&nbsp;&nbsp;&nbsp;&nbsp;@image _id="myshot" _inherit="_img_template_" src="path/image.png" style="&lsqb;!IMG_STYLE.inline!&rsqb;"<br /><br />&nbsp;&nbsp;<strong>Notes</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;The @image variable created inherits attributes from <strong>_img_template_</strong>, which provides methods<br />&nbsp;&nbsp;&nbsp;&nbsp;to easily change the styling for the image after the variable is created. See <em>_img_template_.?</em>.</pre>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>image_factory_abs_style</strong> help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>image_factory_abs_style(nm="varname" ip="img_srcpath" st="CSS Style")</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Generates an @image declaration for <strong>nm</strong> with style specified inline.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;See also: <strong>image_factory</strong>.<br /><br />&nbsp;&nbsp;<strong>Parameters</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>nm</strong> - Specifies the name to use for the <strong>@image</strong> variable<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>ip</strong> - Specifies the image source path; can be absolute or relative<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>st</strong> - Specifies the CSS styling for the image. Default: <strong>&lcub;&lcub;IMG_STYLE.inline_border&rcub;&rcub;</strong><br /><br />&nbsp;&nbsp;<strong>Examples</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;image_factory&lpar;nm="myshot" ip="path/image.png" st="&lcub;&lcub;IMG_STYLE.inline&rcub;&rcub;"&rpar;&rsqb;</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>Is the same as</em><br />&nbsp;&nbsp;&nbsp;&nbsp;@image _id="myshot" _inherit="_img_template_" src="path/image.png" style="&lcub;&lcub;IMG_STYLE.inline&rcub;&rcub;"<br /><br />&nbsp;&nbsp;<strong>Notes</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;The @image variable created inherits attributes from <strong>_img_template_</strong>, which provides methods<br />&nbsp;&nbsp;&nbsp;&nbsp;to easily change the styling for the image after the variable is created. See <em>_img_template_.?</em>.</pre>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>_img_template_ - template for @image variables</strong> help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;&nbsp;&nbsp;Variable created by <strong>image_factory</strong> or <strong>image_factory_abs_style</strong>.<br /><br />&nbsp;&nbsp;<strong>Methods</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_set_style(st)</strong> - Set the CSS styling for this variable to <strong>st</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>_set_style_as_var(st)</strong> - Set the CSS styling for this variable to the variable <strong>st</strong><br /><br />&nbsp;&nbsp;<strong>Examples</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;imagevar._set_style(st="&lcub;&lcub;IMG_STYLE.inline&rcub;&rcub;")&rsqb;</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets <strong>imagevar.style</strong> to <em>margin-left:auto;margin-right:auto;width:90%;</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;imagevar._set_style_as_var(st="IMG_STYLE.block")&rsqb;</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets <strong>imagevar.style</strong> to <em>&lsqb;IMG_STYLE.block&rsqb;</em><br /><br /></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><div class="extras"><p class="box"><em>_img_template_</em> is inherited by variables created with one of the image factories, so each of the above attributes will exist in any <strong>&#64;image</strong> variables created. They provide a means for easily changing the CSS styling used by an image after it has been created.</p></div></pre>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>image_factory_config</strong> help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>image_factory_config</em> Macro<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;This macro is used to change the default styling used by the image factories.<br /><br />&nbsp;&nbsp;<strong>Methods</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>set_default_style(st)</strong> - Set the default style in <strong>code.image_factory</strong> to <strong>st</strong>.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>set_default_style_abs_style(st)</strong> - Set the default style in <strong>code.image_factory_abs_style</strong> to <strong>st</strong>.<br /><br />&nbsp;&nbsp;<strong>Notes</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>st</strong> is interpreted differently depending on which method is being used.<br />&nbsp;&nbsp;&nbsp;&nbsp;For <strong>set_default_style</strong>, it is an existing variable/attribute that is expanded when the image is rendered.<br />&nbsp;&nbsp;&nbsp;&nbsp;For <strong>set_default_abs_style</strong>, it is the CSS styling to be used when the image is rendered.<br /><br />&nbsp;&nbsp;<strong>Examples</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>image_factory_config.set_default_style(st="IMG_STYLE.inline_border")</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets <strong>code.image_factory.st</strong> to <em>&lsqb;IMG_STYLE.inline_border&rsqb;</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>image_factory_config.set_default_abs_style(st="&lsqb;IMG_STYLE.inline&rsqb;")</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets <strong>code.image_factory.st</strong> to <em>margin-left:auto;margin-right:auto;width:90%;</em><br /><br /></pre>
</div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>shot_factory</strong> help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>shot_factory(nm="varname" d="desc" notes="shot notes" ...)</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Generates a <strong>shot</strong> declaration on the fly<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>Shots</strong> are simply <strong>@var</strong> variables with a number of common attributes predefined, and several methods provided to perform common operations..<br /><br />&nbsp;&nbsp;<strong>Parameters</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>nm</strong> - Specifies the name to use for the <strong>@var</strong> (i.e. <em>shot</em>) variable<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>d</strong> - The shot description.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>l</strong> - The lens focal length.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>f</strong> - The f/stop.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>i</strong> - The ISO.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>h</strong> - The camera/crane height.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>c</strong> - Crane shot (Yes or No).<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>s</strong> - The scene name.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>notes</strong> - The shot notes.<br /><br />&nbsp;&nbsp;<strong>Note</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;When parameters are specified, they will override the default values.<br /><br />&nbsp;&nbsp;<strong>Attributes</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>desc</strong> - The shot description. Default: <em>&lsqb;_shot_defs_.desc&rsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>lens</strong> - The lens focal length. Default: <em>&lsqb;_shot_defs_.lens&rsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>fstop</strong> - The f/stop. Default: <em>&lsqb;_shot_defs_.fstop&rsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>iso</strong> - The ISO. Default: <em>&lsqb;_shot_defs_.iso&rsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>height</strong> - The camera/crane height. Default: <em>&lsqb;_shot_defs_.height&rsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>crane</strong> - Crane shot (Yes or No). Default: <em>&lsqb;_shot_defs_.crane&rsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>scene</strong> - The scene name. Default: <em>&lsqb;_shot_defs_.scene&rsqb;</em><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>notes</strong> - The shot notes. Default: <em>&lsqb;_shot_defs_.notes&rsqb;</em><br /><br />&nbsp;&nbsp;<strong>Note</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;The defaults are taken from <strong>var._shot_defs_</strong> unless they are specified when the shot is declared.<br /><br />&nbsp;&nbsp;<strong>Methods:</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<em><strong>NONE</strong></em> - If no method specified, returns a basic shot info table e.g. <strong>&lsqb;varname&rsqb;</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>visual</strong> - generate a shot info table suitable for the visual section of an avshot.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>visual_wn</strong> - generate a visual section table with shot notes included.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>audio</strong> - generate a shot info table suitable for the audio section of an avshot.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>audio_wn</strong> - generate an audio section table with shot notes included.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>with_notes</strong> - like <strong>visual_wn</strong> but with larger font and smaller table width.<br /><br />&nbsp;&nbsp;<strong>Examples</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lsqb;shot_factory&lpar;nm="myshot" s="my scene" d="opening shot"&rpar;&rsqb;</strong><br /></pre>
</div>
<div class="extras"><p>For our first example of using the factories, let's write the markdown for both the <strong>image_factory</strong> and the <strong>shot_factory</strong>, and test them out in an <strong>avshot</strong> sequence. This is one of the more common ways that you will use the factories in your documents. For example, if we write:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declare an image and a shot and then render them in AV style</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare the image and the shot using the factories</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image_factory&lpar;nm="myshot" ip="/path/shot1.jpg" st="!IMG_STYLE.inline_border!"&rpar;]</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;shot_factory&lpar;nm="myshot" d="WS: Crane down" notes="Opening crane shot" c="Yes"&rpar;&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Start the shot and render the image and notes inline</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.visual&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image.myshot&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Switch to audio/narration and render the shot info with notes</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.audio&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.myshot.audio&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.end&rsqb;</pre>
</div>
<div class="extras"><p>This is what we will get:</p></div>
<div class="av"><ul>
<li><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:92.3%;border:1px solid;padding:1em;"/></li>
</ul>
<table class="shotinfo" style="width:45%;float:right;margin-top:1em;margin-right:1em;padding:.7em 1em 1em;"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">myshot</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em>WS: Crane down</em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>24mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">Yes</td></tr></table>
</div>
<div class="extras"><p><br />Alternatively, you can inline the shot info directly below the shot image. Take a look at how to do that:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declare an image and a shot and then render them in AV style</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare the image and the shot</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image_factory&lpar;nm="myshot" ip="/path/shot1.jpg" st="!IMG_STYLE.inline_border!"&rpar;]</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;shot_factory&lpar;nm="myshot" d="WS: Crane down" notes="Opening crane shot" c="Yes"&rpar;&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Start the shot and render the image and notes inline</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.visual&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image.myshot&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.myshot&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Switch to audio/narration and render just the shot notes</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.audio&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.myshot.notes&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.end&rsqb;</pre>
</div>
<div class="extras"><p>This is what we will get:</p></div>
<div class="av"><ul>
<li><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:92.3%;border:1px solid;padding:1em;"/></li>
<li><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">myshot</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em>WS: Crane down</em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>24mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">Yes</td></tr></table></li>
</ul>
<p>Opening crane shot</p>
</div>
<div class="extras"><p>Because we are using the dynamic styling version of the image factory, if we use one of the <strong>IMG_SIZE</strong> methods to change the width, the same exact code will render the image differently. For example, assume the same sequence of markdown as before, only this time, right before we render the sequence, let's add <strong>&lsqb;IMG_SIZE.medium&rsqb;</strong>. Now we get this:</p></div>
<div class="av"><ul>
<li><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:70%;border:1px solid;padding:1em;"/></li>
<li><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">myshot</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em>WS: Crane down</em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>24mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">Yes</td></tr></table></li>
</ul>
<p>Opening crane shot</p>
</div>
<div class="extras"><p>So far so good, right? We have now seen how to use the image and shot factories to easily create variables that we can use when creating AV scripts. And by combining those with the <strong>avshot</strong> builtin, we can easily create detailed breakdowns for a film/video shoot.</p></div>
<div class="extras"><p>Of course we can use these same <em>factory-created</em> image and shot variables outside <strong>avshot</strong>, so let's take one quick look at that before moving on to the next topic.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Use image and shot factory variables outside avshot</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare the image and the shot</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image_factory&lpar;nm="myshot" ip="/path/shot1.jpg" st="!IMG_STYLE.inline_border!"&rpar;]</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;shot_factory&lpar;nm="myshot" d="WS: Crane down" notes="Opening crane shot" c="Yes"&rpar;&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Render the image and then the shot info</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image.myshot&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.myshot.notes&rsqb;</pre>
</div>
<div class="extras"><p>Which will render the following:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:70%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">myshot</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em>WS: Crane down</em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>24mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">Yes</td></tr></table></p></div>
<div class="extras"><p>One thing to notice if you didn't catch it is that you will always want to prefix the variable names with their namespace to guarantee that the parser will emit what you intend. If not, it will always emit the <strong>var.</strong> variable, since the <strong>var</strong> namespace variables have precedence over <strong>image</strong> namespace variables.</p></div>
<div class="extras"><p>Before moving on, let's see a few more combinations of using the factory-created image and shot variables in different contexts.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>More examples using the <strong>avs/shot.md</strong> builtins</h3></div>
<div class="extras"><p>Begin by creating a few variables we can use in our examples.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declare some common variables to use in examples</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare the image and the shot</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;var ss="&lcub;&lcub;var.IMG_STYLE.inline_border&rcub;&rcub;"</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;var trythis="{:.red.bold}Try to get this shot"</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&#64;var beforeshoot="{:.red.bold}NEED TO GET THIS DONE BEFORE PRODUCTION"</pre>
</div>
<div class="extras"><p>Although it's convenient to declare as many of the attributes as possible when the factory variable is created, it is also possible to add/update them after the fact. This is most commonly done with variables created by the <strong>shot_factory</strong>.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Declaring shot attributes after factory creation step</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare the variable using the factory and render it</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;shot_factory&lpar;nm="shot1"&rpar;]</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.shot1&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Update attributes using the ._null_ method and render again</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.shot1._null_(d="&ast;WS: Crane down to reveal MOM&ast;" c="yes" l="85mm")&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.shot1&rsqb;</pre>
</div>
<div class="extras"><p>And here is what we get:</p></div>
<div class="extras"><p><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em>Your shot description here.</em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>24mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">No</td></tr></table></p></div>
<div class="extras"><p><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr></table></p></div>
<div class="extras"><p>You can also add more attributes using the same technique. For example, say you want to add <strong>title</strong> and <strong>class</strong> attributes to your factory image variable. Here's how you could do that:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Adding image attributes after factory creation step</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Declare the variable using the factory and render it</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;IMG_SIZE.small&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image_factory&lpar;nm="shot1" ip="/path/shot1.jpg" st="!IMG_STYLE.inline_border!"&rpar;]</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image.shot1&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Add attributes using the ._null_ method and render again</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image.shot1._null_(title="title text for image" class="myimageclass")&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image.shot1&rsqb;</pre>
</div>
<div class="extras"><p>After the declaration of <strong>image.shot</strong>, the public attributes are:</p></div>
<div class="extras"><p class="box">
<em><strong>src</strong></em>=/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg<br /><em><strong>style</strong></em>=margin-left:auto;margin-right:auto;width:40%;border:1px solid;padding:1em;<br />
</p></div>
<div class="extras"><p>And it renders like this:</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:40%;border:1px solid;padding:1em;"/></p></div>
<div class="extras"><p>After the addition of the <strong>title</strong> and <strong>class</strong> attributes, the public attributes are:</p></div>
<div class="extras"><p class="box">
<em><strong>src</strong></em>=/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg<br /><em><strong>style</strong></em>=margin-left:auto;margin-right:auto;width:40%;border:1px solid;padding:1em;<br /><em><strong>title</strong></em>=title text for image<br /><em><strong>class</strong></em>=myimageclass<br />
</p></div>
<div class="extras"><p>And it renders like this (hover over both images for a couple of seconds to see the title on the 2nd):</p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:40%;border:1px solid;padding:1em;" title="title text for image" class="myimageclass"/></p></div>
<div class="extras"><p>Variables created with the <strong>shot_factory</strong> contain another attribute and methods that are specialized, the <em>notes</em> attribute and its companion methods <em>addNote</em> and <em>addBB</em>. Let's see how they can be used to add additional textual information to a shot variable.</p></div>
<div class="extras"><p>Recall that we previously created a shot variable called <strong>shot1</strong> using the <strong>shot_factory</strong> macro. Let's dump the shot now to see what it contains:</p></div>
<div class="extras"><p class="box">
<strong>shot1=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>{{self.visual}}<br />
&nbsp;&nbsp;<strong>visual=</strong>{{html._table_si_.&lt;}}{{self._basic_}}{{html.table.&gt;}}<br />
&nbsp;&nbsp;<strong>visual_wn=</strong>{{html._table_si_.&lt;}}{{self._basic_}}{{self._n_row_}}{{html.table.&gt;}}<br />
&nbsp;&nbsp;<strong>audio=</strong>{{html._table_si_right_.&lt;}}{{self._basic_}}{{html.table.&gt;}}<br />
&nbsp;&nbsp;<strong>audio_wn=</strong>{{html._table_si_right_.&lt;}}{{self._basic_}}{{self._n_row_}}{{html.table.&gt;}}<br />
&nbsp;&nbsp;<strong>with_notes=</strong>{{html._table_si_alt_.&lt;}}{{self._basic_}}{{self._n_row_alt_}}{{html.table.&gt;}}<br />
&nbsp;&nbsp;<strong>_basic_=</strong>{{html.tr.&lt;}}  {{html._td_header_.&lt;}}&lt;em&gt;&lt;strong&gt;Shot Information&lt;/strong&gt;&lt;/em&gt;{{html.td.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._th_item_.&lt;}}Item{{html.th.&gt;}}  {{html._th_desc_.&lt;}}Description{{html.th.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._td_item_.&lt;}}Scene{{html.td.&gt;}}  {{html._td_desc_.&lt;}}&lt;em&gt;&lt;strong&gt;{{self.scene}}&lt;/strong&gt;&lt;/em&gt;{{html.td.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._td_item_.&lt;}}Shot{{html.td.&gt;}}  {{html._td_desc_.&lt;}}{{self._id}}{{html.td.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._td_item_.&lt;}}Desc{{html.td.&gt;}}  {{html._td_desc_.&lt;}}&lt;em&gt;{{self.desc}}&lt;/em&gt;{{html.td.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._td_item_.&lt;}}Lens{{html.td.&gt;}}  {{html._td_desc_.&lt;}}&lt;strong&gt;{{self.lens}}&lt;/strong&gt;{{html.td.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._td_item_.&lt;}}f-stop{{html.td.&gt;}}  {{html._td_desc_.&lt;}}&lt;strong&gt;{{self.fstop}}&lt;/strong&gt;{{html.td.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._td_item_.&lt;}}ISO{{html.td.&gt;}}  {{html._td_desc_.&lt;}}&lt;strong&gt;{{self.iso}}&lt;/strong&gt;{{html.td.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._td_item_.&lt;}}Height{{html.td.&gt;}}  {{html._td_desc_.&lt;}}&lt;strong&gt;{{self.height}}&lt;/strong&gt;{{html.td.&gt;}}{{html.tr.&gt;}}{{html.tr.&lt;}}  {{html._td_item_.&lt;}}Crane{{html.td.&gt;}}  {{html._td_desc_.&lt;}}{{self.crane}}{{html.td.&gt;}}{{html.tr.&gt;}}<br />
&nbsp;&nbsp;<strong>_n_row_=</strong>{{html.tr.&lt;}}  {{html._td_2span_.&lt;}}{{self.notes}}{{html.td.&gt;}}{{html.tr.&gt;}}<br />
&nbsp;&nbsp;<strong>_n_row_alt_=</strong>{{html.tr.&lt;}}  {{html._td_2span_alt_.&lt;}}{{self.notes}}{{html.td.&gt;}}{{html.tr.&gt;}}<br />
&nbsp;&nbsp;<strong>desc=</strong>{{code.get_default(v="self.d", default="{{var._shot_defs_.desc}}")}}<br />
&nbsp;&nbsp;<strong>lens=</strong>{{code.get_default(v="self.l", default="{{var._shot_defs_.lens}}")}}<br />
&nbsp;&nbsp;<strong>fstop=</strong>{{code.get_default(v="self.f", default="{{var._shot_defs_.fstop}}")}}<br />
&nbsp;&nbsp;<strong>iso=</strong>{{code.get_default(v="self.i", default="{{var._shot_defs_.iso}}")}}<br />
&nbsp;&nbsp;<strong>height=</strong>{{code.get_default(v="self.h", default="{{var._shot_defs_.height}}")}}<br />
&nbsp;&nbsp;<strong>crane=</strong>{{code.get_default(v="self.c", default="{{var._shot_defs_.crane}}")}}<br />
&nbsp;&nbsp;<strong>scene=</strong>{{code.get_default(v="self.s", default="{{var._shot_defs_.scene}}")}}<br />
&nbsp;&nbsp;<strong>notes=</strong>{{var._shot_defs_.notes}}<br />
&nbsp;&nbsp;<strong>addNote=</strong>{{code.append(attr1="self.notes", attr2="self.val")}}<br />
&nbsp;&nbsp;<strong>addBB=</strong>{{self.addNote(val="{{bb}}")}}<br />
&nbsp;&nbsp;<strong>val=</strong>{{var._shot_defs_.notes}}<br />
&nbsp;&nbsp;<strong>d=</strong>&lt;em&gt;WS: Crane down to reveal MOM&lt;/em&gt;<br />
&nbsp;&nbsp;<strong>l=</strong>85mm<br />
&nbsp;&nbsp;<strong>f=</strong>{{var._shot_defs_.fstop}}<br />
&nbsp;&nbsp;<strong>i=</strong>{{var._shot_defs_.iso}}<br />
&nbsp;&nbsp;<strong>h=</strong>{{var._shot_defs_.height}}<br />
&nbsp;&nbsp;<strong>c=</strong>yes<br />
&nbsp;&nbsp;<strong>s=</strong>{{var._shot_defs_.scene}}<br />
<br />
</p></div>
<div class="extras"><p>For now, let's focus in on <strong>notes</strong>, <strong>addNote</strong> and <strong>addBB</strong>. Let's print the current value of each of those attributes now, just to clear things up:</p></div>
<div class="extras"><p class="note">
<strong>var.shot1.notes=</strong>{{var._shot_defs_.notes}}<br />
<strong>var.shot1.addNote=</strong>{{code.append(attr1="self.notes", attr2="self.val")}}<br />
<strong>var.shot1.addBB=</strong>{{self.addNote(val="{{bb}}")}}<br />
</p></div>
<div class="extras"><p>You can see that by default, <strong>notes</strong> returns the value of <em>&lcub;&lcub;var._shot_defs_.notes&rcub;&rcub;</em> which, if you have not changed it, is an empty string. We can add notes to a shot using the method <strong>addNote</strong>, and we can add a double blank line using <strong>addBB</strong>. So, if we wrote something like this:</p></div>
<div class="extras"><p class="note">
<em>// Add a shot note to <strong>shot1</strong></em><br />
&lsqb;shot1.addNote(val="Mom reaches in and takes grocery bags from trunk")&rsqb;<br /><br />
<em>// Render the shot info table<br /></em>
&lsqb;shot1.with_notes&rsqb;
</p></div>
<div class="extras"><p>Will render as follows:</p></div>
<div class="extras"><p><table class="shotinfo" style="font-size:1.1em;margin:10px 10px;width:90%"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr><tr>  <td colspan="2" style="font-size:1.3em">Mom reaches in and takes grocery bags from trunk</td></tr></table></p></div>
<div class="extras"><p>If we review the current value of the <strong>notes</strong> attribute, we see:</p></div>
<div class="extras"><p class="note">
<strong>var.shot1.notes=</strong>{{var._shot_defs_.notes}}Mom reaches in and takes grocery bags from trunk<br />
</p></div>
<div class="extras"><p>Notice that the <em>&lcub;&lcub;var._shot_defs_.notes&rcub;&rcub;</em> is still there, and our note has been appended to the value. This is intentional, allowing some type of document <strong>default</strong> to be present in the shot notes for every factory-generated shot variable. However, you can easily override it by simply setting the <strong>notes</strong> attribute to an empty string (or any other value), and then any additional calls to <strong>addNote</strong> will append to that.</p></div>
<div class="extras"><p>Moving on, let's say we want to add another note, in this case, the previously defined <strong>trythis</strong> constant we created. We could do that with the following markdown:</p></div>
<div class="extras"><p class="note">
<em>// Add a double blank and the trythis note to <strong>shot1</strong></em><br />
&lsqb;shot1.addBB&rsqb;<br />
&lsqb;shot1.addNote(val="&lsqb;trythis&rsqb;")&rsqb;<br /><br />
</p></div>
<div class="extras"><p>And now, it will render as follows:</p></div>
<div class="extras"><p><table class="shotinfo" style="font-size:1.1em;margin:10px 10px;width:90%"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr><tr>  <td colspan="2" style="font-size:1.3em">Mom reaches in and takes grocery bags from trunk<br /><br /><span class="red bold">Try to get this shot</span></td></tr></table></p></div>
<div class="extras"><p>If we review the current value of the <strong>notes</strong> attribute, we see:</p></div>
<div class="extras"><p class="note">
<strong>var.shot1.notes=</strong>{{var._shot_defs_.notes}}Mom reaches in and takes grocery bags from trunk&lt;br /&gt;&lt;br /&gt;&lt;span class="red bold"&gt;Try to get this shot&lt;/span&gt;<br />
</p></div>
<div class="extras"><p>You get the idea, right? Add as many or as few additional notes to your shots, so that when you generate any documents for your production team, they will be alerted to things that need to be done. Before we leave, it's worth mentioning that it's quite common to actually use the shot table below the shot image in an AV script, and then print the shot notes in the audio/narrative section by simply referencing the <strong>notes</strong> attribute. Let's see how that is done.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Show usage of image and shot with notes in AV style</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Start the shot and render the image and shot table inline</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.visual&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image.shot1&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.shot1&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Switch to audio/narration and render just the shot notes</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.audio&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.shot1.notes&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.end&rsqb;</pre>
</div>
<div class="extras"><p>This is what we will get:</p></div>
<div class="av"><ul>
<li><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:92.3%;border:1px solid;padding:1em;" title="title text for image" class="myimageclass"/></li>
<li><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr></table></li>
</ul>
<p>Mom reaches in and takes grocery bags from trunk<br /><br /><span class="red bold">Try to get this shot</span></p>
</div>
<div class="extras"><p>Up to this point, we have seen how to use the builtins in <strong>avs/shot.md</strong> to create variables that allow us to manage all the details of a <em>shot</em>. Again, a <em>shot</em> in this context refers to an <strong>&#64;image</strong> variable and a <strong>&#64;var</strong> variable that collectively describe a shot for a film or video project.</p></div>
<div class="extras"><p>And the usage of these <em>shots</em> is simplified through the use of the attributes and methods associated with the two variables that together make up a shot, which greatly reduces the amount of markdown required to create rich documents to describe your project to others.</p></div>
<div class="extras"><p>But as we've seen, many times we are still repeating a lot of markdown for each shot, so it seems that additional gains can be made through the addition of another level of builtins. As luck would have it, such a level is part <strong>avs/shot.md</strong>, so let's take a look at it now.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Wrappers for avs/shot.md builtins</h3></div>
<div class="extras"><p>As we were discussing, although the builtins covered so far greatly reduce the markdown needed to manage shots in your documents, we are still repeating quite a bit of code each time we want to emit a shot and all of its accompanying information. The first step we need is a builtin that wraps a <em>shot</em>, and emits the more common cases via methods on that builtin. Enter <strong>shotdetail</strong>.</p></div>
<div class="extras"><p>That the following markdown:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Markdown to emit shot details</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.shot1.desc&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image.shot1&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.shot1.with_notes&rsqb;</pre>
</div>
<div class="extras"><p>That markdown will render as follows:</p></div>
<div class="extras"><p><em>WS: Crane down to reveal MOM</em></p></div>
<div class="extras"><p><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:88%;border:1px solid;padding:1em;" title="title text for image" class="myimageclass"/></p></div>
<div class="extras"><p><table class="shotinfo" style="font-size:1.1em;margin:10px 10px;width:90%"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr><tr>  <td colspan="2" style="font-size:1.3em">Mom reaches in and takes grocery bags from trunk<br /><br /><span class="red bold">Try to get this shot</span></td></tr></table></p></div>
<div class="extras"><p>The first thing to notice is that all three builtins take the name of the shot, in this case <em>shot1</em>. Besides that, the markdown would be the same for any shots created with the factories. So what we need is a builtin that takes a parameter, say <em>shotid</em>, and substitutes it on each of the lines where <em>shot1</em> is written, and then it would only take a single line of markdown to generate the same thing. That builtin is called <strong>shotdetail</strong>, so let's try it now and see what happens. We will write <em><strong>&lsqb;shotdetail.with_notes(shotid="shot1")&rsqb;</strong></em>, and this is what the parser will emit:</p></div>
<div class="extras"><p><em>WS: Crane down to reveal MOM</em><br /><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:88%;border:1px solid;padding:1em;" title="title text for image" class="myimageclass"/><br /><table class="shotinfo" style="font-size:1.1em;margin:10px 10px;width:90%"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr><tr>  <td colspan="2" style="font-size:1.3em">Mom reaches in and takes grocery bags from trunk<br /><br /><span class="red bold">Try to get this shot</span></td></tr></table></p></div>
<div class="extras"><p>Okay, so that's much more abbreviated, and we get the same results. Let's take a quick look at the help for <strong>shotdetail</strong> to see what it supports:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>shotdetail</strong> help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>shotdetail(shotid)</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Emit shot details for <strong>shotid</strong>; requires that the image & shot factories created <strong>shotid</strong><br /><br />&nbsp;&nbsp;<strong>Methods</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>basic(shotid)</strong> - Emits the shot description line, the image, and the details for <strong>shotid</strong>.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>with_notes(shotid)</strong> - Same as <strong>basic</strong>, but emits the shot notes at the end of the table.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>needshot(shotid)</strong> - Like <strong>basic</strong>, but uses <em>_needshot_</em> image instead of <strong>image.shotid</strong>.<br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>needshot_wn(shotid)</strong> - Same as <strong>needshot</strong>, but emits the shot notes at the end of the table.<br /><br />&nbsp;&nbsp;<strong>Notes</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;The <strong>needshot</strong> options are provided because a sample image may not be available at this time.<br />&nbsp;&nbsp;&nbsp;&nbsp;This provides a placeholder/reminder that you need to get a sample shot/storyboard.<br /><br />&nbsp;&nbsp;<strong>Examples</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>shotdetail.basic(shotid="shot_var_name")</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emits &lsqb;var.shot_var_name.desc&rsqb;&nbsp;&lsqb;image.shot_var_name&rsqb;&nbsp;&lsqb;var.shot_var_name&rsqb;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>shotdetail.with_notes(shotid="shot_var_name")</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emits same as <em>shotdetail.basic</em> but uses <em>.with_content</em> for the shot detail table.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<strong>shotdetail.needshot(shotid="shot_var_name")</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emits same as <em>shotdetail.basic</em> but uses <em>_needshot_</em> image instead of <strong>image.shotid</strong>.</pre>
</div>
<div class="extras"><p>You probably noticed the two special methods <strong>needshot</strong> and <strong>needshot_wn</strong> that are available in <strong>shotdetail</strong>. These methods come in handy when you don't have an image readily available to show the framing or storyboard for the shot you are documenting. In this case, you can use the <strong>needshot</strong> methods, as they will use a system-provided image as a placeholder when generating the markdown for your shot. Later, when you have an image, you can update your document to use either <strong>basic</strong> or <strong>with_notes</strong>.</p></div>
<div class="extras"><p>Let's see how you can use <strong>needshot</strong> in your document. Assume we are documenting <strong>shot38</strong>, which is a drone shot flying over a pasture somewhere. You've written the following markdown, but you know that the <strong>image.shot38</strong> variable will not resolve to a valid image at this point. So instead of using <em>&lsqb;shotdetail.basic(shotid="shot38")&rsqb;</em>, you will write <em>&lsqb;shotdetail.needshot(shotid="shot38")&rsqb;</em>.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Sample showing usage of .needshot method</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Generate the shot38 variables</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;image_factory(nm="shot38")&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;shot_factory(nm="shot38")&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;var.shot38._null_(d="&ast;WS: Drone flying over pasture&ast;" c="No" l="50mm")&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle"><em>// Use needshot image since we don't have our own image for shot38 at this time</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;shotdetail.needshot(shotid="shot38")&rsqb;</pre>
</div>
<div class="extras"><p>That markdown will render as follows:</p></div>
<div class="extras"><p><em>WS: Drone flying over pasture</em><br /><img src="/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png" style="margin-left:auto;margin-right:auto;width:88%;border:1px solid;padding:1em;"/><br /><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot38</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Drone flying over pasture</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>50mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">No</td></tr></table></p></div>
<div class="extras"><p>Of course we can also use the <strong>shotdetail</strong> builtin inside <strong>avshot</strong> sequences as well. For example:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle">Using .needshot inside <em>avshot</em></pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.visual&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;shotdetail.needshot(shotid="shot38")&rsqb;</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&lsqb;avshot.noaudio&rsqb;</pre>
</div>
<div class="extras"><p>That markdown will render as follows:</p></div>
<div class="av"><ul>
<li><em>WS: Drone flying over pasture</em><br /><img src="/Users/ken/Dropbox/shared/src/script/smd/smd/import/avs/needshot.png" style="margin-left:auto;margin-right:auto;width:88%;border:1px solid;padding:1em;"/><br /><table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot38</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Drone flying over pasture</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>50mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">No</td></tr></table></li>
</ul>
</div>
<div class="extras"><p>So this seems to point out the next missing piece of the puzzle: builtins that wrap the <strong>avshot</strong> sequences. Let's take a look at those.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Using the avs/shot.md builtins that wrap <em>avshot</em></h3></div>
<div class="extras"><p>The last two builtin we will cover is the <strong>shot_emitter</strong>. It provides a convenient way to emit shots in the most commonly used formats. Here's the help for <strong>shot_emitter</strong>:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic;padding:5px 10px;white-space:pre-wrap" class="divTitle"><strong>shot_emitter</strong> help:</pre>
<pre style="background-color:lightgray;font-weight:100;padding:5px 10px;white-space:pre-wrap" class="divTitle">&nbsp;&nbsp;<em>shot_emitter - Markdown Shot Emitter</em><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Automates the emitting of markdown for shots<br /><br />&nbsp;&nbsp;<strong>Methods</strong><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;split(shotid) - emits an <strong>avshot</strong> sequence with the shot left and the details right<br />&nbsp;&nbsp;&nbsp;&nbsp;left(shotid) - emits an <strong>avshot</strong> sequence with the shot and details left and the shot notes right<br />&nbsp;&nbsp;&nbsp;&nbsp;shot_only(shotid) - emits the image inline raw (no @wrap other other HTML)<br />&nbsp;&nbsp;&nbsp;&nbsp;shot_with_notes(shotid) - emits the image inline raw with detail table</pre>
</div>
<div class="extras"><p>Let's take a closer look at each of them. First up is <strong>shot_emitter.split</strong>, which emits an <strong>avshot</strong> sequence, and splits the visual (image) and the audio (notes) between the two columns. This is a space saving way to emit a shot list with storyboards. Here's what it looks like when we use write <strong>&lsqb;shot_emitter.split(shotid="shot1")&rsqb;</strong>:</p></div>
<div class="av"><ul>
<li><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:88%;border:1px solid;padding:1em;" title="title text for image" class="myimageclass"/></li>
</ul>
<table class="shotinfo" style="width:45%;float:right;margin-top:1em;margin-right:1em;padding:.7em 1em 1em;"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr><tr>  <td colspan="2">Mom reaches in and takes grocery bags from trunk<br /><br /><span class="red bold">Try to get this shot</span></td></tr></table>
</div>
<div class="extras"><p><br /><br /></p></div>
<div class="extras"><p>Next up is shot left, which also emits an <strong>avshot</strong> sequence, but in this variant, it places the image and details on the left, and then puts the shot notes on the right. This is more typical of how you would use it in an A/V script. The markdown is: <strong>&lsqb;shot_emitter.left(shotid="shot1")&rsqb;</strong>:</p></div>
<div class="av"><ul>
<li><img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:88%;border:1px solid;padding:1em;" title="title text for image" class="myimageclass"/></li>
<table class="shotinfo"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr></table>
</ul>
<p>Mom reaches in and takes grocery bags from trunk<br /><br /><span class="red bold">Try to get this shot</span></p>
</div>
<div class="extras"><p>Next up is <strong>shot_only</strong>, which, as you probably guessed, simply emits the shot. The markdown: <strong>&lsqb;shot_emitter.shot_only(shotid="shot1")&rsqb;</strong>:</p></div>
<img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:88%;border:1px solid;padding:1em;" title="title text for image" class="myimageclass"/>
<div class="extras"><p>And finally, there's <strong>shot_with_notes</strong>, which displays the shot and notes table inline and raw, so you can use this version in or outside of an <strong>avshot</strong> sequence. The markdown: <strong>&lsqb;shot_emitter.shot_with_notes(shotid="shot1")&rsqb;</strong>:</p></div>
<div class="plain pbb"></div>
<img src="/Users/ken/Dropbox/shared/src/script/smd/docs/samples/image/shot1.jpg" style="margin-left:auto;margin-right:auto;width:88%;border:1px solid;padding:1em;" title="title text for image" class="myimageclass"/>
<table class="shotinfo" style="font-size:1.1em;margin:10px 10px;width:90%"><tr>  <td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr><tr>  <th class="item" style="padding:5px;width:20%;font-size:1.3em">Item</th>  <th class="item" style="padding:5px;width:75%;font-size:1.3em">Description</th></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Scene</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><strong></strong></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Shot</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">shot1</td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Desc</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><em><em>WS: Crane down to reveal MOM</em></em></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Lens</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>85mm</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">f-stop</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>f/2.8</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">ISO</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>320</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Height</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em"><strong>36in</strong></td></tr><tr>  <td class="item" style="padding:5px;width:20%;font-size:1.3em">Crane</td>  <td class="item" style="padding:5px;width:75%;font-size:1.3em">yes</td></tr><tr>  <td colspan="2" style="font-size:1.3em">Mom reaches in and takes grocery bags from trunk<br /><br /><span class="red bold">Try to get this shot</span></td></tr></table>
<div class="extras"><p>And we finally come to the end of this chapter. We've covered quite a bit, but hopefully you've got a good idea on how to use the builtins available for generating images and shot details for your documents. Be sure to review the actual markdown that was used to generate this documentation, as it will give more insight into how everything works.</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
<a id="summary"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Summary</h2></div>
<div class="extras"><p>Well that's it! Hope you've enjoyed reading the docs for the smd utility. More importantly, I hope that you can use this app to streamline your html document and audio/visual script development!</p></div>
<div class="extras"><p><a href="#toc">Table of Contents</a></p></div>
</div>
</body>
</html>
