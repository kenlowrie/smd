<!DOCTYPE html>
<html lang="en">
<head>
<!-- Generated by /Users/ken/Dropbox/shared/src/script/smd/smd/smdparse.py -->
<title>userdocs.md</title>
<meta charset="UTF-8">
<link rel="stylesheet" href="smd.css" />
</head>
<body>
<div class="wrapper">
<h1 class="blue center">Script Markdown User Manual</h1>
<div class="cover"><h3>Script Markdown Utility</h3><p><strong>This guide is NOT Confidential</strong></p><p class="coverSummary">This manual describes the <em>Script Markdown Utility</em>, its features, purpose and more. I've packed it with examples too, so hopefully after you read it, you'll know all you need to know about how to use it to create script markdown documents quickly, easily and most important, efficiently. <strong>Enjoy!</strong><br /><br /><em><strong>NOTE:</strong></em> Additional samples that might be worth reviewing are those in the unit test code located here: <em><strong>(../tests/in/&ast;.md)</strong></em>. Keep in mind that the unit test code is meant to stress test the parser as well as the limits and edges of the syntax of smd, so in some cases it might be confusing or even contradictory to what the user guide covers.</p></div>
<div class="revision"><p class="revTitle">Revision: <em><strong>0.4.2</strong></em> (20200626 @ 06:03:48) </p></div>
<div class="contact"><table style="border:none"><tr style="border:none"><td class="left nowrap" style="border:none">Copyright (c) 2018-2020 by <a href="https://cloudylogic.com">Cloudy Logic Studios</a>, LLC.<br />All Rights Reserved.<br />www.cloudylogic.com<br /></td><td class="right nowrap" style="border:none">Ken Lowrie<br /><em>512-867-5309</em><br /><a href="&#109;&#x61;&#105;&#x6c;t&#x6f;&#58;&#121;&#x6f;&#117;&#x40;&#121;&#x6f;u&#x72;d&#111;&#x6d;&#97;&#x69;n&#x2e;c&#111;&#x6d;">me@mydomain.com</a><br /></td></tr></table></div>
<div class="review"><p class="divTitle">Notes to Reviewer</p><p style="font-size:1.2em">    Please send <a href="&#x6d;&#97;&#x69;&#108;t&#x6f;&#58;m&#x65;&#64;&#x6d;&#121;d&#x6f;&#109;a&#x69;&#110;&#x2e;&#x63;o&#x6d;&#63;s&#x75;&#98;j&#x65;&#99;&#x74;&#61;[&#x77;&#111;r&#x6b;&#105;&#x6e;&#103;t&#x69;&#116;l&#x65;&#93;&#x25;&#x32;0&#x46;&#101;e&#x64;&#98;a&#x63;&#107;">Ken Lowrie</a> any and all feedback, preferably by marking up the PDF using embedded comments. If you edit the PDF text, do so inline using comment boxes, or if you edit the text directly, change the color and/or font size so I can easily find it. Within different versions of this proposal, <ins>additions are marked like this</ins> and <del>deletions are marked like this</del></p></div>
<div class="toc"><p class="divTitle">Table of Contents - SMD User Guide<br /><br /></p><p style="font-size:1.2em">
<a href="#setup">Setup SMD</a> - <strong>How to setup SMD for your environment</strong><br />
<a href="#cmdline">Command Line</a> - <strong>The SMD Command Line Parameters</strong><br />
<a href="#intro">Introduction</a> - <strong>Introduction to SMD</strong><br />
<a href="#inlinemd">Inline Markdown</a> - <strong>Formatting content inline</strong><br />
<a href="#headings">Headings</a> - <strong>Adding Headings</strong><br />
<a href="#wrap">@wrap and @parw</a> - <strong>@wrap and @parw and how they are used</strong><br />
<a href="#helpers">Helper built-ins</a> - <strong>Helper built-ins. Why do I care?</strong><br />
<a href="#namespaces">Namespaces</a> - <strong>Namespaces</strong><br />
<span class="indent"><a href="#ns_var">@var Namespace</a> - <strong>@var Namespace</strong></span><br />
<span class="indent"><a href="#ns_html">@html Namespace</a> - <strong>@html Namespace</strong></span><br />
<span class="indent"><a href="#ns_link">@link Namespace</a> - <strong>@link Namespace</strong>"</span><br />
<span class="indent"><span class="indent"><a href="#links">Links</a> - <strong>Link Styles</strong></span></span><br />
<span class="indent"><span class="indent"><a href="#hyperlinks">Hyper Links</a> - <strong>Creating hyperlinks</strong></span></span><br />
<span class="indent"><span class="indent"><a href="#bookmarks">Bookmark Links</a> - <strong>Creating bookmarks</strong></span></span><br />
<span class="indent"><span class="indent"><a href="#mailto_links">mailto Links</a> - <strong>Specialized link href prefix - mailto:</strong></span></span><br />
<span class="indent"><a href="#ns_image">@image Namespace</a> - <strong>@image Namespace</strong></span><br />
<span class="indent"><a href="#ns_code">@code Namespace</a> - <strong>@code Namespace</strong></span><br />
<a href="#div">DIV</a> - <strong>Creating new DIV sections</strong><br />
<a href="#title_pages">Title Pages</a> - <strong>Creating Title Pages</strong><br />
<a href="#imports">Importing files</a> - <strong>Importing files</strong><br />
<a href="#advanced">Advanced Topics</a> - <strong>Introducing @raw and other stuff</strong><br />
<a href="#predefined_classes">Predefined Classes</a> - <strong>Using predefined CSS classes</strong><br />
<a href="#avs">Audio/Visual &lpar;AV&rpar; Scripts</a> - <strong>Creating Audio/Visual Scripts</strong><br />
<a href="#debug">Debug</a> - <strong>Debugging topics</strong><br />
<a href="#summary">Summary</a> - <strong>Summary of the User Guide</strong><br />
</p></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to ????.md</h2></div>
<div class="extras">Holding tank for adding things that need to be covered somewhere...</div>
</code>
</pre>
<a id="setup"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Setting up smd</h2></div>
<div class="extras"><p>There are two approaches to installing <strong>SMD</strong> on your system; either using <strong>pip</strong> or <strong>pipenv</strong>. The remainder of this chapter will cover both methods, and you can choose which is better for you.</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Installing with pip</h3></div>
<div class="extras"><p>Is pip optional or built-in? Need to address that.</p></div>
<div class="extras"><p>The easiest way to install smd on your system is to use the package installer for Python or <strong>pip</strong>. From a terminal window on your machine, change to the root directory of your cloned repository and type:</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-weight:100" class="divTitle">$ pip install .</pre></div>
<div class="extras"><p>One drawback to this method is that the package and its dependencies will be installed globally, which could interfere with other packages installed on your system. In addition to that, you</p></div>
<div class="extras"><p>TODO: Mention that this will not install bottle and selenium which are required by <strong>ismd</strong>..., but pipenv will...</p></div>
<div class="extras"><p>You can also install the package in developer mode with the -e flag. This will point the installation of the package to the current cloned repository directory instead of copying it over to your site-packages installation directory; useful if you plan on making changes and don't want to reinstall each time you make a change.</p></div>
<div class="plain" style="padding-left:3em;padding-right:3em"><pre style="background-color:lightgray;font-style:italic" class="divTitle">Install in developer mode with pip</pre><pre style="background-color:lightgray;font-weight:100" class="divTitle">
&nbsp;
$ pip install -e .
</pre></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to setup-doc.md</h2></div>
<div class="extras">Make the build process create a "compiled" version of the documentation as a part of the build tree, so the instructions in the README.md can say to just "open this file with your browser" to read the docs current with the release you are looking at... Doesn't need to be a build thing, just needs to be a "release" thing.</div>
</code>
</pre>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>README.md from root of this tree</h3></div>
<div class="extras" style="margin:5em;margin-right:250px;background-color:lightgray;padding:2em">
<div class="extras"><h1>smd</h1></div>
<div class="extras"><h3>Script Markdown Processor</h3></div>
<div class="extras">Welcome to the Script Markdown Processor. This document should help you get the project up and running. If you have questions, or would like to provide feedback and/or to report a bug, feel free to contact the author, Ken Lowrie, at [www.kenlowrie.com](http://www.kenlowrie.com/).</div>
<div class="extras"><h3>Attributions</h3></div>
<div class="extras">This project was originally inspired by John Gruber's [Markdown](https://daringfireball.net/projects/markdown/), the [Python Markdown](https://github.com/Python-Markdown/markdown) Project, and Mark Boszko's [AVScriptFormat](https://github.com/bobtiki/AVScriptFormat) BBEdit plug-in. That resulted in [avscript](https://github.com/kenlowrie/avscript), the predecessor to <strong>smd</strong>.</div>
<div class="extras"><h4>Installing this app on your system</h4></div>
<div class="extras">To install this on your system, do the following from a terminal window (after cloning it to your local system):</div>
<div class="extras">```</div>
<div class="extras">cd root_of_cloned_repo</div>
<div class="extras">pip install .</div>
<div class="extras">```</div>
<div class="extras">That's it! If you run into any problems, feel free to contact me for assistance.</div>
<div class="extras"><h4>Why Script Markdown Processor?</h4></div>
<div class="extras">I wanted a way to dynamically create pages for use in OBS Studio, and this seemed like a good starting point to leverage other code I had.</div>
<div class="extras"><h4>Getting Started with the App</h4></div>
<div class="extras">I don't think this app requires much documentation. But again, I will write up some additional basic information after I finish fixing a few more bugs and testing it out on different devices and browsers.</div>
<div class="extras">User documentation is available via the "userdocs.md" file, which relies on the import file import/userguideheading.md.</div>
<div class="extras"><h4>Summary</h4></div>
<div class="extras">This concludes the documentation on the Script Markdown (smd) Processor.</div>
</div>
<a id="cmdline"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>smd command line parameters</h2></div>
<div class="extras"><p>this will talk about the command line parameters.</p></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to cmdline-doc.md</h2></div>
<div class="extras">all the new command line switches. distinguish between smd, ismd, smdparse, smdlive</div>
<div class="extras">41. Document all the new command line switches (smd, smdparse, ismd and smdlive)</div>
</code>
</pre>
<a id="intro"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h1>Introduction to SMD</h1></div>
<div class="extras"><p>In this chapter, we will discuss the basics of SMD: what it is, and some of the things you can do with it. It's a fairly versatile script parser, that you can use to easily create HTML documents on the fly, and turn them into a static page, or serve them via an endpoint. Let's dive right in.</p></div>
<div class="extras" style="border-bottom:3px solid black;color:green"><h2>What is SMD?</h2></div>
<div class="extras"><p>SMD is a Python command line utility that takes plain text files loosely, <em>oh, so loosely</em>, based on Markdown as input, and generates an HTML document. A CSS file can be used to style the output, making it super easy to customize the final render to your liking.</p></div>
<div class="extras"><p>In the beginning, it started as a utility for generating AV (Audio/Video) style scripts for filmmakers. Essentially:</p></div>
<div class="extras"><p class="note red indent"><strong>Markdown</strong> list item tags <em><strong>&lpar;&ast;, -, +&rpar;</strong></em> were used to identify <em><strong>visuals</strong></em> &lpar;shots&rpar;, and regular paragraphs are the <em><strong>audio/narration</strong></em> that go along with the visuals.</p></div>
<div class="extras"><p>At least that's how it started out. In order to use it effectively, however, you needed to be using BBEDIT, which has built-in support for previewing markdown files, or really anything that uses Python to generate the <strong>&lt;body&gt;</strong> contents of an HTML document. It was also difficult to use because BBEDIT would only refresh the preview window when the primary document was updated, and as the scripts became more complex and modular, making a change in an imported script meant you had to change the primary document in order to see the changes.</p></div>
<div class="extras"><p>It's grown quite a bit since those early days, and while some markdown span elements are still supported, generating AV Scripts is now done using specialized <em><strong>macros</strong></em> that are provided as part of the built-ins that come with SMD. The remainder of this document will attempt to provide an in-depth overview of most of the capabilities of SMD, but you are encouraged to look thru all of the samples provided to get a better idea of what it can do.</p></div>
<a id="inlinemd"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h2>Inline Markdown</h2></div>
<div class="extras"><p>A few of the standard markdown span elements are supported, as are a couple of specialized span elements. These include (in order of precedence, that is the order they are parsed when scanning input lines):</p></div>
<ol>
<li style="font-size:1.3em;margin-left:2em">Variables - These are smd namespace variables accessed with this type of markdown: <strong>&#91;variable]</strong></li>
<li style="font-size:1.3em;margin-left:2em">Strong - Double &ast;&ast; placed around content will apply the <strong>&lt;strong&gt;</strong> tag: <strong>&#42;&#42;wrap text in a single asterisk for bold&#42;&#42;</strong></li>
<li style="font-size:1.3em;margin-left:2em">Emphasis - Single &ast; placed around content will apply the <strong>&lt;em&gt;</strong> tag: <em>&#42;wrap text in single asterisks for emphasis&#42;</em></li>
<li style="font-size:1.3em;margin-left:2em">Insertion - Double &plus; placed around content will apply the <strong>&lt;ins&gt;</strong> tag: <ins>&plus;&plus;wrap text in double plus signs for &lt;ins&gt; tag&plus;&plus;</ins></li>
<li style="font-size:1.3em;margin-left:2em">Deletion - Double &sim; placed around content will apply the <strong>&lt;del&gt;</strong> tag: <del>&sim;&sim;wrap text in double tilde for &lt;del&gt; tag&sim;&sim;</del></li>
</ol>
<div class="extras"><h3>Here are a few examples:</h3></div>
<div class="extras"><p>When I write &ast;text&ast;, it becomes <em>text</em>, and when I write &ast;&ast;text&ast;&ast;, it becomes <strong>text</strong>.</p></div>
<div class="extras"><p>You can stack them too, so that &ast;&ast;&ast;text&ast;&ast;&ast; becomes <em><strong>text</strong></em>.</p></div>
<div class="extras"><p>When you want to wrap text with &lt;ins&gt;, use the double plus (&plus;&plus;), and it will render like this: <ins>Stuff that's been added</ins>.</p></div>
<div class="extras"><p>Similarly, when you want to wrap text with &lt;del&gt;, use the double tilde (&sim;&sim;), and it will render like this: <del>Stuff that's been removed</del>.</p></div>
<div class="extras"><p>So far, this is similar to using regular markdown, so that part, at least, probably isn't new or exciting. When we start mixing in variables, however, things will get much more interesting. We will see that in the chapters that cover the namespaces: <strong>var</strong>, <strong>html</strong>, <strong>link</strong>, <strong>image</strong>, and <strong>code</strong>.</p></div>
<a id="headings"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Headings</h2></div>
<div class="extras"><p>Just like in standard Markdown, you can use the # symbol at the beginning of a line to designate an HTML <strong>&lt;h1&gt;</strong> element. ## symbols designate an <strong>&lt;h2&gt;</strong> element, and so on, up to ###### for <strong>&lt;h6&gt;</strong>. Here are examples of each.</p></div>
<div class="extras"><h3 class="indent"># Heading h1</h3></div>
<div class="extras"><h3 class="indent">## Heading h2</h3></div>
<div class="extras"><h3 class="indent">### Heading h3</h3></div>
<div class="extras"><h3 class="indent">#### Heading h4</h3></div>
<div class="extras"><h3 class="indent">##### Heading h5</h3></div>
<div class="extras"><h3 class="indent">###### Heading h6</h3></div>
<div class="extras"><div class="extras"><p>And this is how they will look in the document when it's formatted:</p></div></div>
<div class="extras"><h1>Heading h1</h1></div>
<div class="extras"><h2>Heading h2</h2></div>
<div class="extras"><h3>Heading h3</h3></div>
<div class="extras"><h4>Heading h4</h4></div>
<div class="extras"><h5>Heading h5</h5></div>
<div class="extras"><h6>Heading h6</h6></div>
<div class="extras"><p>You may want to style the headers to your liking in the smd.css file.</p></div>
<div class="extras"><p class="note red indent">IMPORTANT! Using the # to create headings <em><strong>requires</strong></em> that the hashtag start in column 1 of the line. If you start it anywhere else, it will be interepreted simply as an inline hashtag.</p></div>
<div class="extras"><p>For example:</p></div>
<div class="extras"><h1>this works</h1></div>
<div class="extras"><p>But <strong>#this works</strong>, clearly does not work.</p></div>
<a id="wrap"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>@wrap and @parw</h2></div>
<div class="extras"><p>By default, smd does not place any type of wrapper around emitted content. This is a good default, however, many times there are cases where adding wrappers can greatly assist your formatting efforts. This is where @wrap comes in handy...</p></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to wrap-doc.md</h2></div>
<div class="extras">Add @wrap, and probably need to clean up the docs in tests/in/script1.md; possibly xfer to shared markdown files.</div>
<div class="extras">99. @wrap nop and null - add tests to wrap.md</div>
<div class="extras">100. @parw *|all @parw -3 | 0 | 1 | 25 - add tests.</div>
<div class="extras">96. Add @wrap tag1 [, tag2 [...]] support</div>
<div class="extras">98. Should handle_header() handle @wrap lines? Code added, need to review closely.</div>
</code>
</pre>
<a id="namespaces"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Namespaces</h2></div>
<div class="extras"><p>This is the section on namespaces.</p></div>
<a id="ns_var"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>The @var Namespace</h2></div>
<div class="extras"><p>The @var keyword is used to construct a more flexible type of variable for your documents. It uses a syntax similar to the @image keyword.</p></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to nsvar-doc.md</h2></div>
<div class="extras">The anatomy of a complex variable definition. Passing parameters, self, why _ is important. How link and html work. How code works.</div>
<div class="extras">.@var fu=\"bar\" i.e. short notation</div>
<div class="extras">.@var fu=\"bar\" _format=\"wins\" i.e. assignment to fu ignored if _format present</div>
<div class="extras">.@set fu=\"bar2\" a1=\"val\" i.e. you can add attrs during a set operation</div>
<div class="extras">.@set _=\"defaults\" revision=\"0.4.2\" - that you can add an attr while keeping the rest...</div>
<div class="extras">.{:.bigandbold}you can add a span prefix</div>
</code>
</pre>
<div class="syntax"><p class="divTitle">@image keyword</p>    @var _id="varname" attr1="value1" _format="format string"</div>
<div class="extras"><p>Here's how it works. _id="varname" is going to be how you reference any of the attributes of the variable. You can specify up to 20 attributes per variable, including the name, so really only 19. Accessing the variable attributes is similar to what we say with the @image attributes, using the dot syntax. Given the prior example:</p></div>
<div class="extras"><p><span class="indent bigandbold">&#91;varname.attr1] would be <em><strong>value1</strong></em><br />             &#91;varname._id] would be <em><strong>varname</strong></em>, and <br />            &#91;varname._format] would be <em><strong>format string</strong></em>.</span></p></div>
<div class="extras"><p>So that's pretty cool, but there's a bit more to the _format attribute. You can reference the attributes contained within the variable by using <strong>{{self}}.attrname</strong>. Given that, if we rewrote the prior example as:</p></div>
<div class="extras"><p><span class="indent bigandbold">@var _id="fullname" first="ken" last="lowrie" _format="{{self.first}} {{self.last}}"</span></p></div>
<div class="extras"><p>and then we wrote:</p></div>
<div class="extras"><p><span class="indent bigandbold">&#91;fullname]</span></p></div>
<div class="extras"><p>The result would be: <strong>ken lowrie</strong></p></div>
<div class="extras"><p>Using that, you can build some pretty powerful tools for automating frequently used tasks in your documents. Take a look at the film.md, image.md and varv2.md tests to get an idea of what you can do.</p></div>
<div class="extras"><p>Before we leave this, take note of the difference between {{first}} and {{self.first}}. Both syntaxes are valid, but the first one references the normal variable first, while the second one (self.first) references the first attribute defined within the <em>varname</em> variable. Also take note that you can reference the attributes of other @var variables as long as you qualify them. Let me show you a quick example of that. Take this:</p></div>
<div class="extras"><p><span class="indent bigandbold">@var _id="var1" first="ken" last="lowrie"<br /> @var _id="var2" prefix="mr." _format="{{self.prefix}} {{var1.first}} {{var1.last}}"<br /> &#91;var2]</span></p></div>
<div class="extras"><p>When you run it, you get:</p></div>
<div class="extras"><p><span class="indent"><strong>mr. ken lowrie</strong></span></p></div>
<div class="extras"><p>One last thing, remember how we discussed that sometimes you need a way to resolve ambiguities of variables across the different variable types? <strong>image.</strong> can be used to resolve a variable inside the @image namespace, and <strong>varv2.</strong> can be used to resolve a variable inside the @var namespace. Given that:</p></div>
<div class="extras"><p><span class="indent bigandbold">&#91;var2] and &#91;<em><strong>varv2.</strong></em>var2] resolve to the same variable.</span></p></div>
<div class="extras"><p>This can let you build some really cool automation in your documents. But you need one more thing before you get started. A way to change one or more attributes of an existing @image or @var variable. Enter @set.</p></div>
<a id="ns_html"></a>
<div class="extras"><p><h2>@html Namespace</h2></p></div>
<div class="extras"><p>Section on @html namespaces</p></div>
<a id="ns_link"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>@link Namespace</h2></div>
<div class="extras"><p>The @link namespace is built atop the @html namespace, and as such, it inherits all the same characteristics of things defined in the @html space. In this chapter, we will take a closer look at the @link namespace and what it has to offer.</p></div>
<a id="links"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h2>Link Styles</h2></div>
<div class="extras"><p>There are two different styles of links built-in to smd which map to standard HTML links:</p></div>
<ol>
<li style="font-size:1.3em;margin-left:2em">Hyperlinks - Links created using the HTML <strong>a</strong> tag with the <strong>href</strong> attribute. e.g. <em>&lt;a href="url"&gt;content&lt;/a&gt;</em></li>
<li style="font-size:1.3em;margin-left:2em">Bookmarks - Links created using the HTML <strong>a</strong> tag with the <strong>id</strong> attribute. <em>&lt;a id="bookmark_name"&gt;&lt;/a&gt;</em></li>
</ol>
<div class="extras"><p>As you can see, these links are both based on the HTML <strong>a</strong> attribute, and the distinction lies in how they are rendered within a document. The sections that follow describe how each link type is creating using the built-in factories specified in the <em><strong>sys.imports/link.md</strong></em> file.</p></div>
<a id="hyperlinks"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Creating Hyperlinks</h3></div>
<div class="extras"><p>Hyperlinks are created using the @link namespace in smd, while specifying the attributes desired to describe the link. The @link namespace is a subclass of @html, and therefore it shares all the same characteristics, such as the &lt; attribute to emit the open tag HTML and &gt; to emit the close tag HTML. For more information on the @html namespace, refer to the user manual.</p></div>
<div class="extras"><p>You can create a variable in the @link namespace using the following syntax:</p></div>
<div class="extras"><h3 class="indent">&#64;link _="name" href="http://example.com"</h3></div>
<div class="extras"><p>If you then specify <strong>&lsqb;link.name&rsqb;</strong>, the parser will emit <strong>&lt;a href="http://example.com"&gt;&lt;/a&gt;</strong>. Such a simple example isn't very useful, however, since we need the ability to insert content between the anchor tag. This can be accomplished by using the special attributes &lt; and &gt;, as follows:</p></div>
<div class="extras"><h3 class="indent">&#91;link.name.<]content here&#91;link.name.>]</h3></div>
<div class="extras"><p>Now, the parser emits: <strong>&lt;a href="http://example.com"&gt;content here&lt;/a&gt;</strong>, which is a bit more useful, but seemingly rather complex to to use in practice. In light of this, two special built-ins are provided in order to ease the creation and usage of hyperlinks. The first is a link template, <strong>&lsqb;link._template_&rsqb;</strong>, which can be inherited during creation of new links, and the second is a factory, <strong>&lsqb;link.ln_factory&rsqb;</strong>, which can be used to easily create a hyperlink with minimal input, and which has several useful attributes that can be used during rendering. Let's take a look at each of these now.</p></div>
<div class="extras"><p>Going back to our original example, if we add <strong>_inherit="_template_"</strong> to the definition e.g.:</p></div>
<div class="extras"><h3 class="indent">&#64;link _="name" href="http://example.com" _inherit="_template_"</h3></div>
<div class="extras"><p>We now have several new attributes available to use. For example, if we write <strong>&lsqb;link.name._asurl&rsqb;</strong>, the parser emits <strong>&lt;a href="http://example.com"&gt;http://example.com&lt;/a&gt;</strong> which renders as <a href="http://example.com">http://example.com</a>. If we use just the variable name like we did before e.g. <strong>&lsqb;link.name&rsqb;</strong>, we get this: <a href="http://example.com">Usage: link.name(_text="Text to Link")</a>. As you can see, the default text for the link is actually a usage statement, requesting that we add the <strong>_text=</strong> parameter like so: <strong>&#91;link.name&lpar;_text="my web site"&rpar;]</strong>, which then yields: <a href="http://example.com">my web site</a>.</p></div>
<div class="extras"><p>If you want to use different content with the same link, then specifying the <strong>_text=</strong> parameter provides a convenient way to do that. For example, if I change the parameter to <strong>_text="My Really Cool Website"</strong>, I will get: <a href="http://example.com">My Really Cool Website</a>.</p></div>
<div class="extras"><p>There is one side effect to overriding the default values for attributes on variables in all namespaces except the @code namespace. When a default attribute is overridden in a call, it changes the default value of that attribute for subsequent calls! For example, if I write <strong>&#91;link.name]</strong>, I will get the last value specified for _text, e.g. <a href="http://example.com">My Really Cool Website</a>.</p></div>
<div class="extras"><p class="note red indent">Keep that in mind as it affects parameter passing in all of the namespaces except @code.<br /><br />In <strong>@code</strong>, default values for parameters can only be overridden when the variable is defined with <strong>@code</strong> or updated with <strong>@set</strong>. Anything passed via a call will be persisted for that call, and then revert to the original values.</p></div>
<div class="extras"><p>You can also set the initial value for <strong>_text</strong> when the link variable is initially defined. For example, if we write:</p></div>
<div class="extras"><h3 class="indent">&#64;link _="name" href="http://example.com" _inherit="_template_" _text="my default title"</h3></div>
<div class="extras"><p>And I then write <strong>&lsqb;link.name&rsqb;</strong>, I will get the new default value for _text, i.e.: <a href="http://example.com">my default title</a>, without having to specify <strong>_text</strong> on the initial usage of the link.</p></div>
<div class="extras" style="border-bottom:2px solid black"><h3>Using the link factory to create hyperlinks</h3></div>
<div class="extras"><p>Before we leave the section on hyperlinks, let's a have a look at a better shorthand for creating links, the built-in link factory <strong>ln_factory</strong>. This built-in allows you to easily create a new link with minimal parameters:</p></div>
<div class="extras"><h3 class="indent">&lsqb;ln_factory(nm="sample" hr="http://example.com" t="my default title")&rsqb;</h3></div>
<div class="extras"><p>And now, if I write <strong>&#91;sample]</strong>, I will get: <a href="http://example.com">my default title</a>. Notice how in this example, we left off the namespace <strong>link.</strong>. Namespaces allow identifiers to be reused, and the value of a duplicated identifier in different namespaces will be unique. This ambiguity can lead to unexpected expansion since the if no namespace is supplied, the different namespaces are searched attempting to resolve the identifier. If the parser finds a match before it searches the intended namespace, then that is what it will use. Given that, it's always a good idea to specify the namespace except in the most simple of documents, to avoid incorrect expansion down the road. Thus, if I write <strong>&#91;link.sample]</strong>, I will get the value as before: <a href="http://example.com">my default title</a>.</p></div>
<div class="extras"><p>As you might expect, <strong>ln_factory</strong> inherits from <strong>link._template</strong>, and as such, it inherits attributes including <strong>_asurl</strong>. For example, <em><strong>&lsqb;link.sample._asurl&rsqb;</strong></em> which expands to <strong>&lt;a href="http://example.com"&gt;http://example.com&lt;/a&gt;</strong> and renders as: <a href="http://example.com">http://example.com</a>.</p></div>
<div class="extras"><p>One other feature of the <strong>link._template_</strong> is the <strong>_qlink</strong> and <strong>_qtext</strong> attributes. These allow you to specify alternative link text to the same <strong>href</strong>. For example, if I add <strong>_qtext="alternative link text"</strong> when the variable is declared, and then write <strong>&#91;link.sample._qlink]</strong>, I will get: <a href="http://example.com">alternative link text</a>.</p></div>
<div class="extras"><p>You can also specify the <strong>_qtext</strong> using the special <strong>_null_</strong> syntax:  <strong>&#91;link.sample._null_&lpar;_qtext="alt2 link text"&rpar;]</strong>. Doing so then cause <strong>_qlink</strong> to emit: <a href="http://example.com">alt2 link text</a>.</p></div>
<div class="extras"><p>As in the @html namespace, any valid HTML attribute can be specified when creating link variables. Like @html, attributes that begin with an underscore <em><strong>_</strong></em> are considered <em>private</em> and attributes that begin with a letter are considered <em>public</em>. When HTML tags are emitted as part of variable expansion, all public attributes are written as part of the opening tag. Let's see how this works.</p></div>
<div class="extras"><p>If we add <strong>title="my link title here"</strong> when we define the link variable <strong>link.sample</strong> we were just using, and then emit the code using any of the emitters <strong>(link.sample, link.sample._asurl, link.sample._qlink)</strong>, the HTML code includes a <strong>title=</strong> attribute every time the anchor opening tag is written. Let's see how that looks, first, we'll declare it:</p></div>
<div class="extras"><h3 class="indent">&lsqb;ln_factory(nm="sample" hr="http://example.com" t="my default title" title="my link title here")&rsqb;</h3></div>
<div class="extras"><p>And now, let's take a look at what the parser emits and what the browser renders:</p></div>
<div class="extras"><p><strong>&lsqb;link.sample&rsqb;</strong> emits <em>&lt;a href="http://example.com" title="my link title here"&gt;my default title&lt;/a&gt;</em> which renders as: <a href="http://example.com" title="my link title here">my default title</a></p></div>
<div class="extras"><p><strong>&lsqb;link.sample._asurl&rsqb;</strong> emits <em>&lt;a href="http://example.com" title="my link title here"&gt;http://example.com&lt;/a&gt;</em> which renders as: <a href="http://example.com" title="my link title here">http://example.com</a></p></div>
<div class="extras"><p><strong>&lsqb;link.sample._qlink&rsqb;</strong> emits <em>&lt;a href="http://example.com" title="my link title here"&gt;alt2 link text&lt;/a&gt;</em> which renders as: <a href="http://example.com" title="my link title here">alt2 link text</a></p></div>
<div class="extras"><p>If you hover over any of the preceding links, the browser will show "<strong>my link title here</strong>" after a couple of seconds. By using this feature, you can add custom CSS styling via <strong>style=</strong> along with other valid HTML attributes to any <em>@link, @image or @html</em> namespace tag.. As one last example, we will add <strong>style="font-size:3em"</strong> to the link.sample variable, and then emit the same 3 links as before:</p></div>
<div class="extras"><p><strong>&lsqb;link.sample&rsqb;</strong> emits <em>&lt;a href="http://example.com" title="my link title here" style="font-size:3em"&gt;my default title&lt;/a&gt;</em> which renders as: <a href="http://example.com" title="my link title here" style="font-size:3em">my default title</a></p></div>
<div class="extras"><p>Similarly, <strong>&lsqb;link.sample._asurl&rsqb;</strong>  and <strong>&lsqb;link.sample._qlink&rsqb;</strong> render as:</p></div>
<div class="extras"><p><a href="http://example.com" title="my link title here" style="font-size:3em">http://example.com</a></p></div>
<div class="extras"><p><a href="http://example.com" title="my link title here" style="font-size:3em">alt2 link text</a></p></div>
<div class="extras"><p>This should give you a pretty good idea of how you can use hyperlinks in your smd documents, and so this wraps up the section on creating them using the built-ins provided in <em><strong>sys.imports/link.md</strong></em>.</p></div>
<a id="bookmarks"></a>
<div class="extras" style="border-bottom:3px solid black;color:green"><h3>Creating Bookmarks</h3></div>
<div class="extras"><p>Bookmarks are a special type of link used within an HTML document. There are two logical parts to a bookmark, the <em><strong>ID</strong></em> and the actual reference to the ID, which is done by writing <em><strong>#ID</strong></em>. Within smd, bookmarks are implemented with the @link namespace, and are usually created using the Bookmark factory, <strong>bm_factory</strong>, which is a built-in link variable. <strong>bm_factory</strong> uses the <strong>bm_template</strong> variable in order to provide a simple abstraction for creating and using bookmarks within an HTML document.</p></div>
<div class="extras"><p class="note red indent"><em><strong>NOTE</strong></em>: Because the <strong>bm_template</strong> isn't useful outside the context of the <strong>bm_factory</strong>, we are going to focus on the latter only, since it is what you will use to create and use bookmarks.</p></div>
<div class="extras"><p>Similar to it's counterpart <strong>ln_factory</strong>, has the following syntax:</p></div>
<div class="extras"><h3 class="indent">&lsqb;bm_factory(nm="bookmark1" t="my bookmark text")&rsqb;</h3></div>
<div class="extras"><p>The <strong>bm_factory</strong> does not need the <strong>hr=</strong> parameter, however, because the href is constructed using only the bookmark name, since it refers to a location within the current document.</p></div>
<div class="extras"><p>Once the bookmark is created using the syntax above, hyperlinks within the current document are created by using the <strong>.link</strong> attribute, and the anchor location is emitted using simply the variable name. Let's look at an example.</p></div>
<div class="extras"><p>Within your document, use the <strong>&#91;link.bookmark1]</strong> to place the anchor at the appropriate location. In our case, I've placed the anchor just below the variable dump below, so that it's easy to test.  To create a hyperlink to that location, use the syntax: <strong>&#91;link.bookmark1.link]</strong>, as I have done right here: <a href="#bookmark1">my bookmark text</a>. &lt;-- Click on that link and see that it takes you to the location below.</p></div>
<div class="extras"><p>I'm going to dump the various @link variables we've been creating to create some space between the bookmark link I just emitted above and the location where the heading is that I dropped the anchor.</p></div>
<div class="variables">
<code>
----------------------------------------<br />
NAMESPACE: link<br />
----------------------------------------<br />
<strong>bookmark1=</strong><br />&nbsp;&nbsp;<strong>id=</strong>{{self._}}<br />
&nbsp;&nbsp;<strong>_format=</strong>@@ {{self._inline}}<br />
&nbsp;&nbsp;<strong>link=</strong>&lt;a href="#{{self.id}}"&gt;{{self.text}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>text=</strong>my bookmark text<br />
&nbsp;&nbsp;<strong>_inline=</strong>&lt;a id="{{self.id}}"&gt;&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
<br />
<strong>name=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>{{self.&lt;}}{{self._text}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_text=</strong>my default title<br />
&nbsp;&nbsp;<strong>href=</strong>http://example.com<br />
&nbsp;&nbsp;<strong>_asurl=</strong>{{self.&lt;}}{{code.esc_html.run(url="{{self.href}}")}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_qlink=</strong>{{self.&lt;}}{{self._qtext}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_qtext=</strong>SETMETOLINKTEXT<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
&nbsp;&nbsp;<strong>_inherit=</strong>_template_<br />
<br />
<strong>namespaces=</strong><br />&nbsp;&nbsp;<strong>id=</strong>{{self._}}<br />
&nbsp;&nbsp;<strong>_format=</strong>@@ {{self._inline}}<br />
&nbsp;&nbsp;<strong>link=</strong>&lt;a href="#{{self.id}}"&gt;{{self.text}}&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>text=</strong>Namespaces<br />
&nbsp;&nbsp;<strong>_inline=</strong>&lt;a id="{{self.id}}"&gt;&lt;/a&gt;<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
<br />
<strong>sample=</strong><br />&nbsp;&nbsp;<strong>_format=</strong>{{self.&lt;}}{{self._text}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_text=</strong>my default title<br />
&nbsp;&nbsp;<strong>href=</strong>http://example.com<br />
&nbsp;&nbsp;<strong>_asurl=</strong>{{self.&lt;}}{{code.esc_html.run(url="{{self.href}}")}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_qlink=</strong>{{self.&lt;}}{{self._qtext}}{{self.&gt;}}<br />
&nbsp;&nbsp;<strong>_qtext=</strong>alt2 link text<br />
&nbsp;&nbsp;<strong>_tag=</strong>a<br />
&nbsp;&nbsp;<strong>title=</strong>my link title here<br />
&nbsp;&nbsp;<strong>style=</strong>font-size:3em<br />
<br />
</code>
</div>
<a id="bookmark1"></a>
<div class="extras"><h3>This is where I dropped the anchor for <strong>bookmark1</strong></h3></div>
<div class="extras"><p>That's about all there is to using the smd built-ins for creating HTML bookmarks within a document.</p></div>
<a id="mailto_links"></a>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to mailto-doc.md</h2></div>
<div class="extras">mailto: hyperlinks must be discussed here, we cannot do that in the unittest for link.md because output changes between runs.</div>
</code>
</pre>
<div class="extras" style="border-bottom:5px solid green;color:green"><h3>mailto links</h3></div>
<div class="extras"><p>You can create mailto: links in your document too, which enables users to click on a link to automatically compose an email addressed to the specified email address. <strong>smd</strong> will encode the entire mailto: link URL using a mix of decimal and hexadecimal HTML entities as a deterrent to spam bots that mine email addresses from HTML documents. Here's the syntax for a <em>mailto:</em> link:</p></div>
<div class="syntax"><p class="divTitle">mailto Link Syntax</p>    {:.indent2.bigandbold}&lt;&#91;<em>LinkID</em>&#93;&gt; &lt; : &gt; &lt;<em><strong>mailto:you@yourdomain.com</strong></em>&gt;    &nbsp;    {:.indent2.bigandbold}Examples:    &nbsp;    {:.indent3.bigandbold}&#91;email_me&#93;:mailto:user@mydomain.com <em>&lt;-- mailto Link Example</em>    {:.indent3.bigandbold}&#91;feedback&#93;:mailto:user@mydomain.com?subject=feature%20feedback<em>&lt;-- mailto link with subject</em></div>
<div class="extras"><p>[email_me]:mailto:user@mydomain.com</p></div>
<div class="extras"><p>[feedback]:mailto:user@mydomain.com?subject=feature%20feedback</p></div>
<div class="extras"><p>I've defined the previous examples inline in the user docs, so now we can use them by embedding the link id within square brackets, like so: [email_me]. Or using the second form, send me [feedback].</p></div>
<div class="extras"><p><span class="syntax">--- divTitle Variable Decorators</span></p></div>
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="bigandbold indent">&#91;variable]={:.class}value</span></p></div>
<div class="extras"><p>So, if you declared this: &#64;var mynewvar="{:.bigandbold.red}My new big bold value", and then write &#91;mynewvar], you'd get this:</p></div>
<div class="extras"><p><span class="bigandbold red">My new big bold value</span> &lt;-- At the start of the line</p></div>
<div class="extras"><p>And it can also be used inline: <span class="bigandbold red">My new big bold value</span></p></div>
<div class="extras"><p><h3>Delayed Expansion</h3></p></div>
<div class="extras"><p>Sometimes, it's useful to delay the expansion of a variable until right before it's used. Take the following example:</p></div>
<div class="extras"><p>&#91;first]=Ken<br />&#91;last]=Lowrie<br />&#91;full]=&#91;first]&#91;last]</p></div>
<div class="extras"><p>When you look at this, the expectation might be that the variable <strong>&#91;full]</strong> would be different if I changed &#91;first]=Brenda. But let's see what happens when we do that. Here's the code:</p></div>
<div class="extras"><p>&#91;first]=Ken<br />&#91;last]=Lowrie<br />&#91;full]={:.red}&#91;first]&#91;last] <br />&#91;full]<br />&#91;first]=Brenda<br />&#91;full]</p></div>
<div class="extras"><p>And when we run that code:</p></div>
<div class="extras"><p>[first]=Ken</p></div>
<div class="extras"><p>[last]=Lowrie</p></div>
<div class="extras"><p>[full]={:.red}[first] [last]</p></div>
<div class="extras"><p>[full]</p></div>
<div class="extras"><p>[first]=Brenda</p></div>
<div class="extras"><p>[full]</p></div>
<div class="extras"><p>This happens because any variable used in an assignment is expanded at the time that the variable is defined, and not when it's actually used. However, it's possible to force that behavior using <strong>{{}}</strong> when defining a variable. In this example, we'll change the line <strong>&#91;full]={:.red}[{{first}}] [{{last}}]</strong>, but everything else remains the same. Let's see what happens.</p></div>
<div class="extras"><p>[first]=Ken</p></div>
<div class="extras"><p>[last]=Lowrie</p></div>
<div class="extras"><p>[full]={:.red}[{{first}}] [{{last}}]</p></div>
<div class="extras"><p>[full]</p></div>
<div class="extras"><p>[first]=Brenda</p></div>
<div class="extras"><p>[full]</p></div>
<div class="extras"><p>Sweet! Just what we wanted. By using the {{}} around a variable name used in an assignment of another variable, expansion is delayed until the variable is used. This feature is used quite a bit in the film, shot and image support later on. Check the examples in the tests directory to see it in action.</p></div>
<a id="ns_image"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>The @image Namespace</h2></div>
<div class="extras"><p>The @image statement can be used to include images in your document. Basically, @image is a convenient way to abstract the &lt;IMG&gt; HTML tag. The full syntax is:</p></div>
<div class="extras"><p><span class="syntax">--- divTitle @image keyword</span></p></div>
<div class="extras"><p>Here's how it works. _id="imagename" is going to be how you cause the &lt;img&gt; tag to be generated in your document. Any variable that begins with an underscore (_) is considered private, and will not be included in the generated IMG HTML code. So, if you were to write:</p></div>
<div class="extras"><p><h4 class="indent">@image _id="img1" src="path/foo.jpg" alt="my text for alt" class="myclass" _private="My private note"</h4></p></div>
<div class="extras"><p>and then I wrote:</p></div>
<div class="extras"><p><h4 class="indent">[img1]</h4></p></div>
<div class="extras"><p>The code that would be inserted in the an "extras" DIV would be:</p></div>
<div class="extras"><p><h4 class="indent">&ltimg src="path/foo.jpg" alt="my text for alt" class="myclass" /&gt;</h4></p></div>
<div class="extras"><p>Note that _id wasn't included, nor was _private. However, I can reference them both using the syntax:</p></div>
<div class="extras"><p><h4 class="indent">&#91;img1._id] and &#91;img1._private].</h4></p></div>
<div class="extras"><p>This also works to reference the normal attributes. e.g. &#91;img1.class] would print <strong>myclass</strong>.</p></div>
<div class="extras"><p>Note that if there's ambiguity in the names used for regular variables, image variables and <em>as you'll see next</em>, varv2 variables, you can add a prefix to clarify. For example, <em><strong>image.</strong></em> in front of the name to force the correct namespace to resolve. For example:</p></div>
<div class="extras"><p><span class="indent bigandbold">&#91;img1]=image1<br />@image _id="img1"     src="foo.png"<br />&#91;img1] would expand as <em><strong>image1</strong></em>, and     &#91;image.img1] would expand as the <em><strong>&ltimg ...&gt</strong></em> html code.</span></p></div>
<a id="ns_code"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>@code Namespace</h2></div>
<div class="extras"><p>Section on @code namespaces</p></div>
<a id="div"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Divs</h2></div>
<div class="extras"><p>You can create a new DIV using <em><strong>---</strong></em> or <em><strong>@@@</strong></em> at the start of a new line. <em><strong>Actually, no, you can't do that...</strong></em></p></div>
<div class="extras"><p>This will need to document each of the sections in the divs.md built-ins.</p></div>
<div class="extras"><p>The complete syntax is:</p></div>
<div class="extras"><p><h3>&#91;{:.class}&lt;<em><strong>---</strong></em> | <em><strong>@@@</strong></em>&gt; &lt;<em><strong>title_className | .</strong></em>&gt; &#91;optional title&#93;</h3></p></div>
<div class="extras"><p>The class prefix is optional, but handy if you want your DIV to be styled in a unique way. You can list one or more classes in dotted notation. E.g.: <strong>{:.myclass}</strong> or <strong>{:.myclass1.myclass2}</strong>. Then an optional class for the title, or '.' to indicate no title class, and finally, the optional title. Let's take a look at an example:</p></div>
<div class="extras"><p>When I write <em><strong>{:.section}@@@ divTitle This is my new DIV section</strong></em> at the start of a new line, I get this:</p></div>
<div class="extras"><p><span class="section">--- divTitle This is my new DIV section</span></p></div>
<div class="extras"><p>If I indent subsequent lines immediately following the DIV declaration, they become part of the DIV as a regular paragraph. For example, I'll add four (4) indented lines immediately after the previous DIV declaration and I get this:</p></div>
<div class="extras"><p><span class="section">--- divTitle This is my new DIV section</span></p></div>
<div class="extras"><p>This is line 1</p></div>
<div class="extras"><p>This is line 2</p></div>
<div class="extras"><p>This is line 3</p></div>
<div class="extras"><p>This is line 4</p></div>
<div class="extras"><p>There are a several built-in CSS classes that are defined in the accompanying <strong>avscript_md.css</strong> file, and you can add your own to get new DIVs formatted to your liking.</p></div>
@ divTitle Predefined DIVs
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.toc} -- For Table of Contents sections.</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.section} -- Generic section.</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.unused} -- Unused section.</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.syntax} -- Syntax section.</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.review} -- Review section.</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.plain} -- Plain section.</span></p></div>
<div class="extras"><p>Remember, you can add your own classes in a CSS file, and then reference them using the built-in formatting of <strong>avscript_md</strong>.</p></div>
<a id="title_pages"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Cover, Revision & Contact Sections</h2></div>
<div class="extras"><p>There are three (3) specialized sections that can be defined within your document to add commonly used information in script files. They are:</p></div>
<div class="extras"><p><span class="syntax width60">--- divTitle Specialized Sections</span></p></div>
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent bigandbold">@cover - To add a cover section</span></p></div>
<div class="extras"><p><span class="indent bigandbold">@revision - To add a revision section</span></p></div>
<div class="extras"><p><span class="indent bigandbold">@contact - To add a contact section</span></p></div>
<div class="extras"><p>The details for each specialized section follows.</p></div>
@ plainTitle
<div class="extras"><p><h3>Cover Title</h3></p></div>
@ divTitle Syntax:
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent bigandbold">@cover title="title of script" author="written by" logline="logline or short description"</span></p></div>
<div class="extras"><p>Each element is optional, and they can appear in any order. Also note that the value of any parameter can be whatever you want. Just because it says "author", doesn't mean you have to put the author name there. You could instead write <em>"Roses are Red"</em>, and that would be just fine...</p></div>
@ plainTitle
<div class="extras"><p><h3>Revision</h3></p></div>
@ divTitle Syntax:
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent bigandbold">@revision v="revision" timestamp="yes"</span></p></div>
<div class="extras"><p>Specify the revision number of your document within the angle brackets. If timestamp is either not specified or has any value other than "No", "Off", "False" or "0", the current date and time of the document at the time of processing will also be inserted immediately following the revision number. This provides additional clarification of the version, in case you forget to bump the version number.</p></div>
<div class="extras"><p>If you specify timestamp="No" | "Off" | "False" | "0", then the timestamp will not be added to the revision string.</p></div>
@ plainTitle
<div class="extras"><p><h3>Contact</h3></p></div>
@ divTitle Syntax:
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent bigandbold">@contact cn="name" ph="phone" em="email" c1="copyright 1" c2="copyright 2" c3="copyright 3"</span></p></div>
<div class="extras"><p>The contact section allows you to specify several key elements about the script project. They include the following elements:</p></div>
@ divTitle Contact Elements
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent bigandbold">cn="Contact Name"</span></p></div>
<div class="extras"><p><span class="indent bigandbold">ph="Contact Phone"</span></p></div>
<div class="extras"><p><span class="indent bigandbold">em="Contact Email"</span></p></div>
<div class="extras"><p><span class="indent bigandbold">c1="Copyright Line 1"</span></p></div>
<div class="extras"><p><span class="indent bigandbold">c2="Copyright Line 2"</span></p></div>
<div class="extras"><p><span class="indent bigandbold">c3="Copyright Line 3"</span></p></div>
<div class="extras"><p>Each contact element is optional, and the elements can appear in any order. To see these tags in action, take a look at the <strong>userguideheading.md</strong> document in the import folder of this user guide.</p></div>
<a id="imports"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Importing documents</h2></div>
<div class="extras"><p>Content about what TEMPLATE IS USED FOR.</p></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to import-doc.md</h2></div>
<div class="extras">8. Document the @embed "filename" support.</div>
<div class="extras">40. DOCS: @import "/Users/ken/Dropbox/shared/src/script/smd/smd/import/def_head.md" twice in a row only works the first time. Intentional. stream().open()</div>
<div class="extras">Explain how @import '$' works when no files open i.e. reading from stdin</div>
</code>
</pre>
@ divTitle Syntax:
<div class="extras"><p><span class="indent"><strong>@import "filename"</strong></span></p></div>
<div class="extras"><p><span class="indent"><strong>@import "/abs/path/to/filename"</strong></span></p></div>
<div class="extras"><p><span class="indent"><strong>@import "../relative/path/to/filename"</strong></span></p></div>
<div class="extras"><p><span class="indent"><strong>@import "$/relative/to/current/filename"</strong></span></p></div>
<div class="extras"><p>The @import statement can be used to include documents that contain commonly used contents for your scripts, such as common aliases, links, headers, sections, etc. You can use fully qualified paths, relative paths, or paths based on the current file being processed. The latter uses the symbol '$' to designate that the path to this file should begin with the path the current file being processed. For example, assume the current file being processed is: /mydir/myfile.md. The statement:</p></div>
<div class="extras"><p><h3>@import "$/vars.md"</h3></p></div>
<div class="extras"><p>Would be the same as writing <strong>@import "/mydir/vars.md"</strong>. This is useful because it doesn't require that you use absolute paths for everything.</p></div>
<div class="extras"><p><span class="note blue indent4">There is a gotcha when using this with BBEdit's Markup Preview. There is no context for the top level file, since it is passed to the Python script as sys.stdin. Because of that, you can't rely on avscript_md to determine the relative path of the top level file. It will work just fine when using mkavscript_md, but that won't be useful if you are using BBEdit's Markup Preview to write your documents...</span></p></div>
<div class="extras"><p>The path can be specified as either <strong>'$/path/filename'</strong> or <strong>'$path/filename'</strong>. In other words, you can specify the '/' after '$' or leave it off, whatever your preference is.</p></div>
<a id="advanced"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Advanced Topics: @raw, @image, @var &amp; @set</h2></div>
@ divTitle Syntax:
<div class="extras"><p><span class="indent"><strong>@raw raw HTML</strong></span></p></div>
<div class="extras"><p><span class="indent"><strong>@image _id="name" src="/path/to/image" ...</strong></span></p></div>
<div class="extras"><p><span class="indent"><strong>@var _id="name" attr1="value1" _format="fmt string"</strong></span></p></div>
<div class="extras"><p>These keywords, @raw, @image and @var, can be used to incorporate more control over the output of your document. I'll provide a high level look at each of them, but probably the best way to see what type of flexibility they offer would be to review some of the samples in the "tests" directory.</p></div>
<div class="extras"><p>First things first, because describing content dynamically using these keywords can get a bit long, you'll want to get familiar with the line continuation character '\'. The line continuation character can actually be used anywhere, but I document it here because it was this support that caused me to introduce it. Anyway, you can continue a line by ending it with the '\' character (spaces or tabs can follow, but it must be the last non-white space character on the line). When you do that, the internal file handler sees the continuation character, and reads the next line, concatenating it onto the current line. For example:</p></div>
<div class="extras"><p><span class="syntax">--- .</span></p></div>
<div class="extras"><p><span class="indent4">attr1="value1" &#92;</span></p></div>
<div class="extras"><p><span class="indent4">attr2="value2"</span></p></div>
<div class="extras"><p>Causes that line to be interpreted as <strong>@var _id="myvar" attr1="value1" attr2="value2"</strong>, as if it were all typed on the same line. You'll see this convention used quite a bit in the samples and the tests.</p></div>
<div class="extras"><p><h3>@set keyword</h3></p></div>
<div class="extras"><p>Once you build some cool abstractions to assist with the automation of common tasks in your documents, you'll need to have a method for changing a value for an attribute in order to affect the generation of the output. Take the following example.</p></div>
<div class="extras"><p>Say we want to display a storyboard in our shot AV file along with some common camera and setup information. So we create the following set of expansions to assist:</p></div>
<div class="extras"><p><span class="indent bigandbold">// provide default values<br />&#91;_i_width]=90%<br />[_b_size]=1px<br />[_b_type]=solid<br />[img-border-style]=border:[{{_b_size}}] [{{_b_type}}];padding:1em;<br />[img-inline-style]=margin-left:auto;margin-right:auto;width:[{{_i_width}}];<br />[img-st-inline]=[{{img-inline-style}}]<br />[img-st-inline-border]=[{{img-inline-style}}][{{img-border-style}}]<br />[ss]=[{{img-st-inline-border}}]<br />// Some useful defaults for _i_width<br />[IMG_SIZE_THUMB]=20%<br />[IMG_SIZE_SMALL]=40%<br />[IMG_SIZE_MEDIUM]=70%<br />[IMG_SIZE_LARGE]=90%<br />[_shotinfo_]=&lt;table class="shotinfo"&gt;&#92;<br />    [SP][SP][SP][SP]&lt;tr&gt;&lt;td class="center" colspan="2"&gt;<em><strong>Shot Information</strong></em>&lt;/td&gt;&lt;/tr&gt;&#92;<br />    [SP][SP][SP][SP]&lt;tr&gt;&lt;th class="item"&gt;Item&lt;/th&gt;&lt;th class="desc"&gt;Description&lt;/th&gt;&lt;/tr&gt;&#92;<br />    [SP][SP][SP][SP]&lt;tr&gt;&lt;td class="item"&gt;Shot&lt;/td&gt;&lt;td class="desc"&gt;{{self.name}}&lt;/td&gt;&lt;/tr&gt;&#92;<br />    [SP][SP][SP][SP]&lt;tr&gt;&lt;td class="item"&gt;Desc&lt;/td&gt;&lt;td&gt;<em>{{self.desc}}</em>&lt;/td&gt;&lt;/tr&gt;&#92;<br />    [SP][SP][SP][SP]&lt;tr&gt;&lt;td class="item"&gt;Lens&lt;/td&gt;&lt;td&gt;<strong>{{self.lens}}</strong>&lt;/td&gt;&lt;/tr&gt;&#92;<br />    [SP][SP][SP][SP]&lt;tr&gt;&lt;td class="item"&gt;Crane&lt;/td&gt;&lt;td&gt;{{self.crane}}&lt;/td&gt;&lt;/tr&gt;&#92;<br />&lt;/table&gt;<br />@var _id="shotinfo" _format="- [var.{{self.shotid}}.desc]&lt;br /&gt;[image.{{self.shotid}}]&lt;br /&gt;[var.{{self.shotid}}]" shotid="NOTSET"</span></p></div>
<div class="extras"><p>And now we agree to use the convention of defining an <strong>@image</strong> and an <strong>@var</strong> variable using the same <em><strong>_id</strong></em> value, which would result in us doing something like this in our document:</p></div>
<div class="extras"><p><span class="indent bigandbold">@var _id="shot1" name="WS: Sky with top of trunk bottom of frame" desc="<em>Short Description shot 1</em>" lens="<strong>85mm</strong>" crane="yes" _format="[_shotinfo_]"<br />@image _id="shot1" src="[imgpath]/shot1.jpg" style="[ss]"<br /><br />@var _id="shot2" name="MS: Taking groceries from trunk" desc="<em>Short Description shot 2</em>" lens="<strong>50mm</strong>" crane="yes" _format="[_shotinfo_]"<br />@image _id="shot2" src="[imgpath]/shot2.jpg" style="[ss]"</span></p></div>
<div class="extras"><p>And now, we can auto generate the shot and info using syntax like this:</p></div>
<div class="extras"><p><span class="indent bigandbold">@set _id="shotinfo" shotid="shot1"<br />[var.shotinfo]<br />And some random shot comments here.<br /><br />@set _id="shotinfo" shotid="shot2"<br />[var.shotinfo]<br />Some random shot 2 comments here.</span></p></div>
<div class="extras"><p>And then, when we run the prior code, we'd get this:</p></div>
<div class="extras"><p>[_i_width]=90%</p></div>
<div class="extras"><p>[_b_size]=1px</p></div>
<div class="extras"><p>[_b_type]=solid</p></div>
<div class="extras"><p>[img-border-style]=border:[{{_b_size}}] [{{_b_type}}];padding:1em;</p></div>
<div class="extras"><p>[img-inline-style]=margin-left:auto;margin-right:auto;width:[{{_i_width}}];</p></div>
<div class="extras"><p>[img-st-inline]=[{{img-inline-style}}]</p></div>
<div class="extras"><p>[img-st-inline-border]=[{{img-inline-style}}][{{img-border-style}}]</p></div>
<div class="extras"><p>[img-st-block]=display:block;[{{img-inline-style}}]</p></div>
<div class="extras"><p>[img-st-block-border]=display:block;[img-inline-style][img-border-style]</p></div>
<div class="extras"><p>[ss]=[{{img-st-inline-border}}]</p></div>
<div class="extras"><p>[IMG_SIZE_THUMB]=20%</p></div>
<div class="extras"><p>[IMG_SIZE_SMALL]=40%</p></div>
<div class="extras"><p>[IMG_SIZE_MEDIUM]=70%</p></div>
<div class="extras"><p>[IMG_SIZE_LARGE]=90%</p></div>
<div class="extras"><p>[_shotinfo_]=<table class="shotinfo">    <tr><td class="center" colspan="2"><em><strong>Shot Information</strong></em></td></tr>    <tr><th class="item">Item</th><th class="desc">Description</th></tr>    <tr><td class="item">Shot</td><td class="desc">{{self.name}}</td></tr>    <tr><td class="item">Desc</td><td><em>{{self.desc}}</em></td></tr>    <tr><td class="item">Lens</td><td><strong>{{self.lens}}</strong></td></tr>    <tr><td class="item">Crane</td><td>{{self.crane}}</td></tr></table></p></div>
<div class="extras"><p>- <em>Short Description</em><br /><img src="../import/shot1.jpg" style="[ss]"/><br />[_shotinfo_]</p></div>
<div class="extras"><p>And some random shot comments here.<br /></p></div>
<div class="extras"><p>- <em>Short Description</em><br /><img src="../import/shot2.jpg" style="[ss]"/><br />[_shotinfo_]</p></div>
<div class="extras"><p>Some random shot 2 comments here.</p></div>
<div class="extras"><h1></h1></div>
<div class="extras"><p>What the ...? Sweeeeet! So basically, by simply changing the value of the attribute <strong>shotid</strong> in the <strong>shotinfo</strong> variable, we can cause <strong>shotinfo</strong> to display different shots (both images and shot information)!</p></div>
<div class="extras"><p>Okay, that should give you an idea of how you can use these advanced keywords to build some cool automation for your AV documents. There's quite a bit of these already built and included in the various tests that I've created to assist with the development, so take a look at them, and build from there! And when you come up with some new and improved versions of them, please share!</p></div>
<div class="extras"><p>Keep in mind that once you have this stuff defined, it's easy to change. For example, if I write &#91;_i_width]=80%, and then write &#91;varv2.shotinfo], look what happens:</p></div>
<div class="extras"><p>[_i_width]=80%</p></div>
<div class="extras"><p>[varv2.shotinfo]</p></div>
<div class="extras"><h1></h1></div>
<div class="extras"><p>And look what happens if we generate the image outside of a shot. I'll do that by just writing the image reference, like so: &#91;image.shot1], and you'll get this:</p></div>
<div class="extras"><h1></h1></div>
<div class="extras"><p><img src="../import/shot1.jpg" style="[ss]"/></p></div>
<div class="extras"><p>I can make it small by setting the width to one of those predefined sizes. For example, &#91;_i_width]=&#91;IMG_SIZE_SMALL]. And then I'll get this:</p></div>
<div class="extras"><p>[_i_width]=[IMG_SIZE_SMALL]</p></div>
<div class="extras"><p><img src="../import/shot1.jpg" style="[ss]"/></p></div>
<div class="extras"><p>Awww. And if I don't want the border, I could choose a different style. So if I write this:</p></div>
<div class="extras"><p><span class="indent bigandbold">&#91;ss]=&#91;{{img-st-inline}}<br />    &#91;image.shot1]</span></p></div>
<div class="extras"><p>I'll get this instead:</p></div>
<div class="extras"><p>[ss]=[{{img-st-inline}}]</p></div>
<div class="extras"><p><img src="../import/shot1.jpg" style="[ss]"/></p></div>
<div class="extras"><p>Same image, but without a border.</p></div>
<div class="extras"><p>So that pretty much sums up the advanced section. Hopefully it was helpful, if not, ask questions, and I'll clarify. Or better yet, improve the docs, and submit a pull request. :)</p></div>
<a id="predefined_classes"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Predefined classes</h2></div>
<div class="extras"><p>There are a number of predefined classes in the primary CSS file that can be used to quickly style your AV scripts. You can add others as required, and decorate your elements as needed. Here are a few of them, used outside the AV DIV, and then again inside an AV DIV.</p></div>
@ divTitle Predefined classes
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.note} -- This is a note.</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.question} -- This is a question.</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.vo} -- This is a VO note</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.important} -- This is important.</span></p></div>
<div class="extras"><p><span class="indent bigandbold">&#123;:.greyout} -- This is grey text on grey background.</span></p></div>
<div class="extras"><p>Here they are used outside an AV DIV Section.</p></div>
<div class="extras"><p><span class="note">This is a note.</span></p></div>
<div class="extras"><p><span class="question">This is a question.</span></p></div>
<div class="extras"><p><span class="vo">This is a VO note</span></p></div>
<div class="extras"><p><span class="important">This is important.</span></p></div>
<div class="extras"><p><span class="greyout">This is grey text on grey background.</span></p></div>
<div class="extras"><p>*CU: Predefined Classes used inside AV section</p></div>
<div class="extras"><p>Here they are again, used inside an AV DIV section</p></div>
<div class="extras"><p><span class="note">This is a note.</span></p></div>
<div class="extras"><p><span class="question">This is a question.</span></p></div>
<div class="extras"><p><span class="vo">This is a VO note</span></p></div>
<div class="extras"><p><span class="important">This is important.</span></p></div>
<div class="extras"><p><span class="greyout">This is grey text on grey background.</span></p></div>
<div class="extras"><h1></h1></div>
<div class="extras"><p>Here are a few more of the predefined classes available, and remember, you can tailor these or add more as required for your particular purpose.</p></div>
@ divTitle More predefined classes
<div class="extras"><p>[SP]</p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.pbb}</strong> -- Page Break Before (when printing).</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.pba}</strong> -- Page Break After (when printing).</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.red}</strong> -- To color text red.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.green}</strong> -- To color text green.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.blue}</strong> -- To color text blue.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.center}</strong> -- To center text.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.left}</strong> -- To left align text.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.right}</strong> -- To right align text.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.bigandbold}</strong> -- To increase text size and make it bold.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.box}</strong> -- To put a box around it.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.dashed}</strong> -- To put a dashed line around it.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.greybg}</strong> -- To make the background grey.</span></p></div>
<div class="extras"><p><span class="indent"><strong>&#123;:.ignore}</strong> -- So it won't display in the output.</span></p></div>
<div class="extras"><p>You can stack multiple classes by simply stringing them together. For example, on the next line, I'll write <strong>{:.greybg.bigandbold.blue}This is a big and bold blue note on a grey background.</strong></p></div>
<div class="extras"><p><span class="greybg bigandbold blue">This is a big and bold blue note on a grey background.</span></p></div>
<a id="avs"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>AV Visual Script Formatter</h2></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to av-doc.md</h2></div>
<div class="extras">avshot ...</div>
</code>
</pre>
<div class="extras"><p>Let's see a quick example now. The next line will begin with an <em><strong>&#42;</strong></em> and then contain the text that describes the visual, and the line after that will contain the narration that goes with it.</p></div>
<div class="extras"><p><h2>This will have to be moved to a "shots" doc</h2></p></div>
<div class="extras"><p><span class="bigandbold green">Seems to me that an example that shows how you could use SMD to generate an A/V script would be useful, and would be a way for me to bring over all the film, shot, etc, markdown, put into a directory, such as import/avs or something.  Then, I could use isolate all of that into a shot-specific userguide, and leave this one for the main smd utility.<br /><br />Also, the formatting in the new doc looks different than the old version, need to run that down to make sure it was intentional.<br /><br /></span></p></div>
<div class="av"><ul>
<li>WS:Sunrise</li>
</ul>
<p>There&apos;s just something about a sunrise that gets the blood flowing...    And here&apos;s some additional narration.<br /><br />    and here is some additional shot notes.</p>
</div>
<div class="extras"><p class="note red indent">When you want to force the document out of shot mode, use <em><strong>@break</strong></em> or <em><strong>@exit</strong></em> on an empty line. That will reset the floats which are controlling the AV formatting, and start a new section. See how the document leaves the narration mode of the prior shot, and starts this new block paragraph?</p></div>
<div class="extras"><h1></h1></div>
<div class="extras"><p><strong>[at]break</strong> [lt]--Use @break or @exit to close a shot DIV."</p></div>
<div class="extras"><p>You can have as much narration as required, just keep writing, even starting new regular paragraphs. When you're done, start a new visual, or add any other block element, such as links, aliases, headers, divs, etc. To add another shot, just repeat the steps above, like this:</p></div>
<div class="av"><ul>
<li>CU:Coffee pot heating on wire rack of fire pit</li>
</ul>
<p>There&apos;s nothing like waking up to the smell of coffee percolating in the outdoors.</p>
</div>
<div class="extras"><p>If you have text you want included in the HTML document, but do not want it rendered by the browser, use the <strong>{:.ignore}</strong> class prefix. For example, on the next line, we'll write {:.ignore}You won't see this.<br /><br /></p></div>
<div class="extras"><p><span class="ignore">You won't see this.</span></p></div>
<div class="extras"><p>When you examine the HTML, you'll see the prior text wrapped in <strong>[lt]p[gt]</strong> tags, inside <strong>[lt]div class="extras"[gt]</strong> markup. However, it will not be rendered by the browser, unless you modify the CSS rule for the ignore class.</p></div>
<div class="extras"><p>Lines that begin with a double forward slash [<em><strong>//</strong></em>] are treated as comments, and are discarded by AVScript. They will not appear in the HTML at all. As another example, we'll write <em>//This will not appear in the HTML</em> on the next line.</p></div>
<div class="extras"><p>If you examine the HTML output, you will not see the previous line in the output.</p></div>
<a id="debug"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Debugging</h2></div>
<pre style="white-space:pre-wrap">
<code style="display:block;color:purple">
<div class="extras"><h2>Add this to debug-doc.md</h2></div>
<div class="extras">17. Document @debug, @debug key="re", @debug tags=""</div>
<div class="extras">Document @defaults, @watch "filename"</div>
<div class="extras">@ defaults keyword - currently no parameters, but perhaps extend? @defaults [flags | raw | imports ...]</div>
<div class="extras">Document @dump sysdef="." tracked="." and @debug.</div>
</code>
</pre>
<div class="extras"><p>Debugging scripts</p></div>
<div class="extras"><p>.debug</p></div>
<div class="extras"><p>Dumping variables and links</p></div>
<div class="extras"><p>.@dump link="."</p></div>
<div class="extras"><p>.@dump html="."</p></div>
<div class="extras"><p>.@dump link="."</p></div>
<div class="extras"><p>.@dump var="."</p></div>
<a id="summary"></a>
<div class="extras" style="border-bottom:5px solid green;color:green"><h2>Summary</h2></div>
<div class="extras"><p>Well that's it! Hope you've enjoyed reading the docs for the smd utility. More importantly, I hope that you can use this app to streamline your html document and audio/visual script development!</p></div>
</div>
</body>
</html>
